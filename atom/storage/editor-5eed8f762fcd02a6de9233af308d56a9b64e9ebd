{"version":1,"windowDimensions":{"x":4,"y":23,"width":1436,"height":877,"maximized":false},"grammars":{"grammarOverridesByPath":{"/Users/victor.martins/Google Drive/_Projects/gratus/Fudgefile":"source.ruby"}},"project":{"deserializer":"Project","paths":["/Users/victor.martins/Google Drive/_Projects/gratus"],"buffers":[{"id":"517197ff710db9b1aa0d279588c59b89","text":"require 'rails_helper'\nrequire 'support/authentication_helpers'\n\ndescribe 'Users', type: :request do\n  include AuthenticationHelpers\n\n  let(:user_email) { '' }\n  let(:access_token) { '' }\n  let(:headers) { auth_headers(email: user_email, token: access_token) }\n\n  describe 'create a user' do\n    before do\n      post '/api/v1/users', params, headers\n    end\n\n    context 'with valid params' do\n      let(:user_email) { 'foo@bar.com' }\n      let(:username) { 'fooo' }\n      let(:params) { { user: { email: user_email, username: username, password: 'iuhgfghja' } } }\n\n      it 'creates a User' do\n        expect(response).to have_http_status(:created)\n\n        created_user = User.last\n        expect(created_user.email).to eq user_email\n        expect(created_user.username).to eq username\n      end\n\n      it 'sends an email with the API Key' do\n        email = ActionMailer::Base.deliveries.last\n\n        expect(email).to be_present\n        expect(email.subject).to eq \"Welcome #{username}.\"\n      end\n\n      it 'responds in Json format' do\n        expect(response.content_type).to eq('application/json')\n      end\n    end\n\n    context 'with invalid params' do\n      let(:params) { { user: { email: 'foo@bar.com', username: 'F' } } }\n\n      it 'returns validation messages' do\n        expect(response).to have_http_status(:unprocessable_entity)\n\n        json_response = JSON.parse(response.body)\n        expect(json_response['username']).to include 'is too short (minimum is 4 characters)'\n      end\n    end\n  end\n\n  describe 'edit a user' do\n    let(:user) { create :user }\n    let(:params) { { user: { about: new_about } } }\n    let(:id_for_action) { user.id }\n\n    before do\n      put \"/api/v1/users/#{id_for_action}\", params, headers\n    end\n\n    context 'user is authenticated' do\n      let(:user_email) { user.email }\n      let(:access_token) { user.access_token }\n\n      context 'with valid params' do\n        let(:new_about) { 'lorem ipsum' }\n\n        it 'allows the editing of the user about data' do\n          expect(response).to have_http_status(:accepted)\n\n          updated_user = User.last\n          expect(updated_user.about).to eq new_about\n        end\n\n        context 'editing another users data' do\n          let(:id_for_action) { create(:user, username: 'other_user').id }\n\n          context 'as a normal user' do\n            it 'does not authorize' do\n              expect(response).to have_http_status(:forbidden)\n            end\n          end\n\n          context 'as an admin' do\n            let(:user) { create :user, :admin, username: :admin }\n\n            it 'authorizes' do\n              expect(response).to have_http_status(:accepted)\n            end\n          end\n        end\n\n        context 'with a unknown id' do\n          let(:id_for_action) { 9999 }\n\n          it 'returns not_found code' do\n            expect(response).to have_http_status(:not_found)\n          end\n        end\n      end\n\n      context 'with invalid params' do\n        let(:new_about) { 'x' * 1001 }\n\n        it 'returns validation messages' do\n          expect(response).to have_http_status(:unprocessable_entity)\n\n          json_response = JSON.parse(response.body)\n          expect(json_response['about']).to include 'is too long (maximum is 1000 characters)'\n        end\n      end\n    end\n\n    context 'user not authenticated' do\n      let(:user_email) { '' }\n      let(:access_token) { '' }\n      let(:params) { {} }\n\n      it 'returns unauthorized request without email and token' do\n        expect(response).to have_http_status(:unauthorized)\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2},"6":{"id":"6","maintainHistory":false,"markersById":{},"version":2},"7":{"id":"7","maintainHistory":true,"markersById":{"2":{"range":{"start":{"row":111,"column":9},"end":{"row":111,"column":9}},"properties":{"type":"selection","goalScreenRange":null,"preserveFolds":true,"autoscroll":false,"wordRegex":{}},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"10":{"id":"10","maintainHistory":false,"markersById":{},"version":2},"12":{"id":"12","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":13,"history":{"version":3,"nextCheckpointId":29,"undoStack":[{"type":"checkpoint","id":2,"snapshot":{"2":{"1":{"range":[[0,0],[5,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":true,"tailed":true,"valid":true,"invalidate":"never"}},"7":{"2":{"range":[[68,8],[68,8]],"properties":{"type":"selection","goalScreenRange":null,"preserveFolds":true},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"checkpoint","id":17,"snapshot":{"7":{"2":{"range":[[46,25],[46,25]],"properties":{"type":"selection","goalScreenRange":null,"preserveFolds":true,"autoscroll":false,"wordRegex":{}},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/.Trash/users_spec.rb","digestWhenLastPersisted":"feef846a925de10eb5c9a3b82100b1a3aef002ca","preferredLineEnding":null,"nextMarkerId":668,"deserializer":"TextBuffer","version":5},{"id":"c4992dfad04087ff58daddf09e17b852","text":"# The User Model\nclass User < ActiveRecord::Base\n  require 'support/string_inquirer'\n\n  validates :email, :username, presence: true, uniqueness: true\n  validates :username, length: { minimum: 4 }\n  validates :password, length: { minimum: 8 }, allow_nil: true\n  validates :about, length: { maximum: 1000 }\n\n  before_create :set_api_key\n\n  has_one :api_key, autosave: true\n  has_many :posts\n\n  has_secure_password\n\n  delegate :access_token, to: :api_key\n\n  # Returns an object that we can use to query the role of the user.\n  # Ex: user.role.admin?\n  #     user.role.member?\n  #     user.role.guest?\n  def role\n    role = api_key.present? ? api_key.role : 'guest'\n    Support::StringInquirer.new(role)\n  end\n\n  # Sets the role of the user\n  def role=(role)\n    api_key.role = role\n    api_key.save!\n  end\n\n  private\n\n  def set_api_key\n    build_api_key\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/app/models/user.rb","digestWhenLastPersisted":"f569801a9677c87c928fd6a9713fe8f5acc77106","preferredLineEnding":null,"nextMarkerId":10,"deserializer":"TextBuffer","version":5},{"id":"7c42dee88dc5fff99f7193462985620e","text":"require File.expand_path('../boot', __FILE__)\n\nrequire 'rails'\n# Pick the frameworks you want:\nrequire 'active_model/railtie'\nrequire 'active_job/railtie'\nrequire 'active_record/railtie'\nrequire 'action_controller/railtie'\nrequire 'action_mailer/railtie'\nrequire 'action_view/railtie'\n# require 'sprockets/railtie'\n# require 'rails/test_unit/railtie'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule Gratus\n  # Main Application Class\n  class Application < Rails::Application\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration should go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded.\n\n    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.\n    # Run 'rake -D time' for a list of tasks for finding time zone names. Default is UTC.\n    # config.time_zone = 'Central Time (US & Canada)'\n\n    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.\n    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]\n    # config.i18n.default_locale = :de\n\n    # Do not swallow errors in after_commit/after_rollback callbacks.\n    config.active_record.raise_in_transactional_callbacks = true\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":11,"column":35},"end":{"row":11,"column":35}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":18,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[11,35],[11,35]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[11,35],[11,35]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[11,35],[11,35]],"newRange":[[11,35],[12,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[12,0],[12,0]],"newRange":[[12,0],[12,0]],"oldText":"","newText":""}},{"type":"change","content":{"oldRange":[[12,0],[12,0]],"newRange":[[12,0],[13,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[13,0],[13,0]],"newRange":[[13,0],[13,0]],"oldText":"","newText":""}},{"type":"change","content":{"oldRange":[[12,0],[12,0]],"newRange":[[12,0],[12,0]],"oldText":"","newText":""}},{"type":"change","content":{"oldRange":[[13,0],[13,0]],"newRange":[[13,0],[13,39]],"oldText":"","newText":"include ActionController::Serialization"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[13,39],[13,39]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[13,0],[13,39]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[13,0],[13,39]],"newRange":[[13,0],[13,0]],"oldText":"include ActionController::Serialization","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[13,0],[13,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[13,0],[13,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[12,0],[13,0]],"newRange":[[12,0],[12,0]],"oldText":"\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[12,0],[12,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[12,0],[12,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[11,35],[12,0]],"newRange":[[11,35],[11,35]],"oldText":"\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[11,35],[11,35]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/config/application.rb","digestWhenLastPersisted":"fbd2d894d5f4d6c7a95ea8016e8a0cc7a04e4490","preferredLineEnding":null,"nextMarkerId":77,"deserializer":"TextBuffer","version":5},{"id":"a7c2d8c15503249037b12c28bf69af65","text":"# Module that contains all the Api Versions\nmodule Api\n  # Module with the first version of the API\n  module V1\n    # API Controller for Users\n    class UsersController < ApplicationController\n      require 'users/email'\n\n      skip_before_action :authenticate!, only: [:create]\n\n      before_action :set_user, only: [:update]\n\n      # Creates a user and sends the user a welcome email\n      def create\n        @user = User.new(resource_params)\n\n        if @user.save\n          Users::Email::Welcome.new(@user).send\n          render json: @user, status: :created\n        else\n          render json: { errors: @user.errors }, status: :unprocessable_entity\n        end\n      end\n\n      # Updates the user data\n      def update\n        authorize! :update, @user\n\n        if @user.update(resource_params)\n          render json: @user, status: :accepted\n        else\n          render json: { errors: @user.errors }, status: :unprocessable_entity\n        end\n      end\n\n      private\n\n      def resource_params\n        params.require(:user).permit(:email, :username, :password, :about)\n      end\n\n      def set_user\n        @user = User.find(params[:id])\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"20":{"range":{"start":{"row":21,"column":0},"end":{"row":21,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":13,"column":15},"end":{"row":13,"column":15}},"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":124,"undoStack":[{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,28],[20,29]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,28],[20,29]],"newRange":[[20,28],[20,28]],"oldText":".","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[20,28],[20,28]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,28],[20,29]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,28],[20,29]],"newRange":[[20,28],[20,28]],"oldText":"e","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[20,28],[20,28]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,28],[20,29]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,28],[20,29]],"newRange":[[20,28],[20,28]],"oldText":"r","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[20,28],[20,28]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,28],[20,29]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,28],[20,29]],"newRange":[[20,28],[20,28]],"oldText":"r","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[20,28],[20,28]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,28],[20,29]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,28],[20,29]],"newRange":[[20,28],[20,28]],"oldText":"o","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[20,28],[20,28]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,28],[20,29]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,28],[20,29]],"newRange":[[20,28],[20,28]],"oldText":"r","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[20,28],[20,28]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,28],[20,29]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,28],[20,29]],"newRange":[[20,28],[20,28]],"oldText":"s","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[20,28],[20,28]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":10,"snapshot":{"2":{"1":{"range":[[20,28],[20,28]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,28],[20,28]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,28],[20,28]],"newRange":[[20,28],[20,29]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[20,29],[20,29]],"newRange":[[20,29],[20,30]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[20,30],[20,30]],"newRange":[[20,30],[20,31]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[20,31],[20,31]],"newRange":[[20,31],[20,32]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[20,32],[20,32]],"newRange":[[20,32],[20,33]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[20,33],[20,33]],"newRange":[[20,33],[20,34]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[20,34],[20,34]],"newRange":[[20,34],[20,35]],"oldText":"","newText":"s"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[20,35],[20,35]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":20,"snapshot":{"2":{"1":{"range":[[20,23],[20,23]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,23],[20,23]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,23],[20,23]],"newRange":[[20,23],[20,24]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[20,24],[20,24]],"newRange":[[20,24],[20,25]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[20,25],[20,25]],"newRange":[[20,25],[20,26]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[20,26],[20,26]],"newRange":[[20,26],[20,27]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[20,27],[20,27]],"newRange":[[20,27],[20,28]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[20,28],[20,28]],"newRange":[[20,28],[20,29]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[20,29],[20,29]],"newRange":[[20,29],[20,30]],"oldText":"","newText":":"}},{"type":"change","content":{"oldRange":[[20,30],[20,30]],"newRange":[[20,30],[20,31]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[20,23],[20,31]],"newRange":[[20,23],[20,23]],"oldText":"errors: ","newText":""}},{"type":"change","content":{"oldRange":[[20,23],[20,23]],"newRange":[[20,23],[20,24]],"oldText":"","newText":":"}},{"type":"change","content":{"oldRange":[[20,23],[20,24]],"newRange":[[20,23],[20,23]],"oldText":":","newText":""}},{"type":"change","content":{"oldRange":[[20,23],[20,35]],"newRange":[[20,23],[20,23]],"oldText":"@user.errors","newText":""}},{"type":"change","content":{"oldRange":[[20,23],[20,23]],"newRange":[[20,23],[20,25]],"oldText":"","newText":"{}"}},{"type":"change","content":{"oldRange":[[20,24],[20,24]],"newRange":[[20,24],[20,25]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[20,25],[20,25]],"newRange":[[20,25],[20,26]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[20,26],[20,26]],"newRange":[[20,26],[20,27]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[20,27],[20,27]],"newRange":[[20,27],[20,28]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[20,28],[20,28]],"newRange":[[20,28],[20,29]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[20,29],[20,29]],"newRange":[[20,29],[20,30]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[20,30],[20,30]],"newRange":[[20,30],[20,31]],"oldText":"","newText":":"}},{"type":"change","content":{"oldRange":[[20,31],[20,31]],"newRange":[[20,31],[20,32]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[20,32],[20,32]],"newRange":[[20,32],[20,44]],"oldText":"","newText":"@user.errors"}},{"type":"change","content":{"oldRange":[[20,44],[20,44]],"newRange":[[20,44],[20,45]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[20,24],[20,24]],"newRange":[[20,24],[20,25]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[30,23],[30,35]],"newRange":[[30,23],[30,47]],"oldText":"@user.errors","newText":"{ errors: @user.errors }"}},{"type":"change","content":{"oldRange":[[25,16],[25,16]],"newRange":[[25,16],[26,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[26,0],[26,0]],"newRange":[[26,0],[26,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[26,8],[26,8]],"newRange":[[26,8],[26,9]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[26,9],[26,9]],"newRange":[[26,9],[26,10]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[26,10],[26,10]],"newRange":[[26,10],[26,11]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[26,8],[26,11]],"newRange":[[26,8],[26,15]],"oldText":"prt","newText":"private"}},{"type":"change","content":{"oldRange":[[26,8],[26,15]],"newRange":[[26,8],[26,9]],"oldText":"private","newText":"p"}},{"type":"change","content":{"oldRange":[[26,9],[26,9]],"newRange":[[26,9],[26,10]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[26,10],[26,10]],"newRange":[[26,10],[26,11]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[26,8],[26,11]],"newRange":[[26,8],[26,15]],"oldText":"prt","newText":"private"}},{"type":"change","content":{"oldRange":[[26,8],[26,15]],"newRange":[[26,8],[26,9]],"oldText":"private","newText":"p"}},{"type":"change","content":{"oldRange":[[26,9],[26,9]],"newRange":[[26,9],[26,10]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[26,8],[26,10]],"newRange":[[26,8],[26,11]],"oldText":"pr","newText":"pry"}},{"type":"change","content":{"oldRange":[[26,8],[26,11]],"newRange":[[26,8],[26,19]],"oldText":"pry","newText":"binding.pry"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[26,19],[26,19]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[26,0],[27,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[26,0],[27,0]],"newRange":[[26,0],[26,0]],"oldText":"        binding.pry\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[26,0],[26,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":90,"snapshot":{"2":{"1":{"range":[[26,33],[26,33]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[26,33],[26,33]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[26,33],[26,33]],"newRange":[[26,33],[27,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[27,0],[27,0]],"newRange":[[27,0],[27,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[27,8],[27,8]],"newRange":[[27,8],[27,9]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[27,8],[27,9]],"newRange":[[27,8],[27,8]],"oldText":"r","newText":""}},{"type":"change","content":{"oldRange":[[27,8],[27,8]],"newRange":[[27,8],[27,9]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[27,9],[27,9]],"newRange":[[27,9],[27,10]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[27,10],[27,10]],"newRange":[[27,10],[27,11]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[27,8],[27,11]],"newRange":[[27,8],[27,11]],"oldText":"pry","newText":"pry"}},{"type":"change","content":{"oldRange":[[27,8],[27,11]],"newRange":[[27,8],[27,19]],"oldText":"pry","newText":"binding.pry"}},{"type":"change","content":{"oldRange":[[27,8],[27,19]],"newRange":[[27,8],[27,8]],"oldText":"binding.pry","newText":""}},{"type":"change","content":{"oldRange":[[27,0],[27,8]],"newRange":[[27,0],[27,0]],"oldText":"        ","newText":""}},{"type":"change","content":{"oldRange":[[27,0],[27,0]],"newRange":[[27,0],[27,1]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[27,1],[27,1]],"newRange":[[27,1],[27,2]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[27,2],[27,2]],"newRange":[[27,2],[27,3]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[27,0],[27,3]],"newRange":[[27,0],[27,3]],"oldText":"pry","newText":"pry"}},{"type":"change","content":{"oldRange":[[27,0],[27,3]],"newRange":[[27,0],[27,11]],"oldText":"pry","newText":"binding.pry"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[31,37],[31,37]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":118,"snapshot":{"2":{"1":{"range":[[27,0],[27,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[27,0],[27,11]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[27,0],[27,11]],"newRange":[[27,0],[27,0]],"oldText":"binding.pry","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[27,0],[27,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[27,0],[27,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,0],[20,0]],"newRange":[[20,0],[21,0]],"oldText":"","newText":"          render json: @user.errors, status: :unprocessable_entity\n"}},{"type":"change","content":{"oldRange":[[21,0],[22,0]],"newRange":[[21,0],[21,0]],"oldText":"          render json: { errors: @user.errors }, status: :unprocessable_entity\n","newText":""}},{"type":"change","content":{"oldRange":[[27,0],[28,0]],"newRange":[[27,0],[27,0]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[30,0],[30,0]],"newRange":[[30,0],[31,0]],"oldText":"","newText":"          render json: @user.errors, status: :unprocessable_entity\n"}},{"type":"change","content":{"oldRange":[[31,0],[32,0]],"newRange":[[31,0],[31,0]],"oldText":"          render json: { errors: @user.errors }, status: :unprocessable_entity\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[27,0],[27,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[27,0],[27,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,0],[20,0]],"newRange":[[20,0],[21,0]],"oldText":"","newText":"          render json: { errors: @user.errors }, status: :unprocessable_entity\n"}},{"type":"change","content":{"oldRange":[[21,0],[22,0]],"newRange":[[21,0],[21,0]],"oldText":"          render json: @user.errors, status: :unprocessable_entity\n","newText":""}},{"type":"change","content":{"oldRange":[[27,0],[27,0]],"newRange":[[27,0],[28,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[31,0],[31,0]],"newRange":[[31,0],[32,0]],"oldText":"","newText":"          render json: { errors: @user.errors }, status: :unprocessable_entity\n"}},{"type":"change","content":{"oldRange":[[32,0],[33,0]],"newRange":[[32,0],[32,0]],"oldText":"          render json: @user.errors, status: :unprocessable_entity\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[28,0],[28,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/api/v1/users_controller.rb","digestWhenLastPersisted":"50381a5cc3fde436505f5fa132cf635f6f166a8c","preferredLineEnding":null,"nextMarkerId":122,"deserializer":"TextBuffer","version":5},{"id":"08247b6e5e2ba05e6d311c71bf8f373b","text":"require 'rails_helper'\nrequire 'support/authentication_helpers'\n\ndescribe 'Admin Users', type: :request do\n  include AuthenticationHelpers\n\n  describe 'turn a member into an admin' do\n    context 'when the user is an admin' do\n      it 'sets the member into an admin' do\n        admin = create :user, :admin, username: 'admin'\n        headers = auth_headers(email: admin.email, token: admin.access_token)\n        member = create :user, username: 'member'\n        params = { user: { role: :admin } }\n\n        put api_v1_admin_user_path(member.id), params, headers\n\n        expect(response).to have_http_status(:accepted)\n        expect(response).to match_response_schema('user')\n        member.reload\n        expect(member.role).to be_admin\n      end\n    end\n\n    context 'when the user is not admin' do\n      it 'receives an unauthorized error' do\n        loged_in_user = create :user\n        headers = auth_headers(email: loged_in_user.email, token: loged_in_user.access_token)\n        member = create :user, username: 'member'\n        params = { user: { role: :admin } }\n\n        put api_v1_admin_user_path(member.id), params, headers\n\n        member.reload\n        expect(response).to have_http_status(:forbidden)\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"59":{"range":{"start":{"row":19,"column":0},"end":{"row":19,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":20,"column":0},"end":{"row":20,"column":0}},"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":307,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[18,19],[18,19]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[18,19],[18,19]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[18,19],[18,58]],"newRange":[[18,19],[18,19]],"oldText":"create :user, :admin, username: 'admin'","newText":""}},{"type":"change","content":{"oldRange":[[20,43],[20,43]],"newRange":[[20,43],[21,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[21,0],[21,0]],"newRange":[[21,0],[21,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[21,8],[21,8]],"newRange":[[21,8],[21,9]],"oldText":"","newText":"u"}},{"type":"change","content":{"oldRange":[[21,9],[21,9]],"newRange":[[21,9],[21,10]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[21,10],[21,10]],"newRange":[[21,10],[21,11]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[21,11],[21,11]],"newRange":[[21,11],[21,12]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[21,12],[21,12]],"newRange":[[21,12],[21,13]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[21,13],[21,13]],"newRange":[[21,13],[21,14]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[21,14],[21,14]],"newRange":[[21,14],[21,15]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[21,15],[21,15]],"newRange":[[21,15],[21,54]],"oldText":"","newText":"create :user, :admin, username: 'admin'"}},{"type":"change","content":{"oldRange":[[18,6],[18,21]],"newRange":[[18,6],[18,6]],"oldText":"let(:user) {  }","newText":""}},{"type":"change","content":{"oldRange":[[17,42],[18,0]],"newRange":[[17,42],[17,42]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[17,42],[17,48]],"newRange":[[17,42],[17,42]],"oldText":"      ","newText":""}},{"type":"change","content":{"oldRange":[[13,8],[13,42]],"newRange":[[13,8],[13,25]],"oldText":"\"/api/v1/admin/users/#{member.id}\"","newText":"api_v1_admin_user"}},{"type":"change","content":{"oldRange":[[13,25],[13,25]],"newRange":[[13,25],[13,26]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[13,26],[13,26]],"newRange":[[13,26],[13,27]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[13,27],[13,27]],"newRange":[[13,27],[13,28]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[13,28],[13,28]],"newRange":[[13,28],[13,29]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[13,29],[13,29]],"newRange":[[13,29],[13,30]],"oldText":"","newText":"h"}},{"type":"change","content":{"oldRange":[[13,4],[13,47]],"newRange":[[13,4],[13,4]],"oldText":"put api_v1_admin_user_path, params, headers","newText":""}},{"type":"change","content":{"oldRange":[[20,54],[20,54]],"newRange":[[20,54],[21,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[21,0],[21,0]],"newRange":[[21,0],[21,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[21,8],[21,8]],"newRange":[[21,8],[22,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[22,0],[22,0]],"newRange":[[22,0],[22,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[21,0],[21,8]],"newRange":[[21,0],[21,0]],"oldText":"        ","newText":""}},{"type":"change","content":{"oldRange":[[22,8],[22,8]],"newRange":[[22,8],[22,51]],"oldText":"","newText":"put api_v1_admin_user_path, params, headers"}},{"type":"change","content":{"oldRange":[[22,51],[22,51]],"newRange":[[22,51],[23,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[23,0],[23,0]],"newRange":[[23,0],[23,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[22,34],[22,34]],"newRange":[[22,34],[22,36]],"oldText":"","newText":"()"}},{"type":"change","content":{"oldRange":[[22,35],[22,35]],"newRange":[[22,35],[22,36]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[22,36],[22,36]],"newRange":[[22,36],[22,37]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[22,37],[22,37]],"newRange":[[22,37],[22,38]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[22,38],[22,38]],"newRange":[[22,38],[22,39]],"oldText":"","newText":"b"}},{"type":"change","content":{"oldRange":[[22,39],[22,39]],"newRange":[[22,39],[22,40]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[22,40],[22,40]],"newRange":[[22,40],[22,41]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[22,41],[22,41]],"newRange":[[22,41],[22,42]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[22,42],[22,42]],"newRange":[[22,42],[22,43]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[22,43],[22,43]],"newRange":[[22,43],[22,44]],"oldText":"","newText":"d"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[22,44],[22,44]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[22,43],[22,43]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[23,0],[23,8]],"newRange":[[23,0],[23,0]],"oldText":"        ","newText":""}},{"type":"change","content":{"oldRange":[[13,0],[13,4]],"newRange":[[13,0],[13,0]],"oldText":"    ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[22,43],[22,43]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":53,"snapshot":{"2":{"1":{"range":[[8,17],[8,17]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[8,17],[8,17]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[8,17],[8,49]],"newRange":[[8,17],[8,17]],"oldText":"create :user, username: 'member'","newText":""}},{"type":"change","content":{"oldRange":[[20,54],[20,54]],"newRange":[[20,54],[21,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[21,0],[21,0]],"newRange":[[21,0],[21,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[21,8],[21,8]],"newRange":[[21,8],[21,40]],"oldText":"","newText":"create :user, username: 'member'"}},{"type":"change","content":{"oldRange":[[20,8],[20,12]],"newRange":[[20,8],[20,9]],"oldText":"user","newText":"a"}},{"type":"change","content":{"oldRange":[[20,9],[20,9]],"newRange":[[20,9],[20,10]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[20,10],[20,10]],"newRange":[[20,10],[20,11]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[20,11],[20,11]],"newRange":[[20,11],[20,12]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[20,12],[20,12]],"newRange":[[20,12],[20,13]],"oldText":"","newText":"n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[20,13],[20,13]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":69,"snapshot":{"2":{"1":{"range":[[9,32],[9,32]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[9,32],[9,32]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[9,18],[9,70]],"newRange":[[9,18],[9,18]],"oldText":"auth_headers(email: user_email, token: access_token)","newText":""}},{"type":"change","content":{"oldRange":[[9,2],[9,20]],"newRange":[[9,2],[9,2]],"oldText":"let(:headers) {  }","newText":""}},{"type":"change","content":{"oldRange":[[8,2],[8,19]],"newRange":[[8,2],[8,2]],"oldText":"let(:member) {  }","newText":""}},{"type":"change","content":{"oldRange":[[6,2],[8,2]],"newRange":[[6,2],[6,2]],"oldText":"let(:user_email) { user.email }\n  let(:access_token) { user.access_token }\n  ","newText":""}},{"type":"change","content":{"oldRange":[[19,40],[19,40]],"newRange":[[19,40],[20,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[20,0],[20,0]],"newRange":[[20,0],[20,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[20,8],[20,8]],"newRange":[[20,8],[20,60]],"oldText":"","newText":"auth_headers(email: user_email, token: access_token)"}},{"type":"change","content":{"oldRange":[[20,8],[20,8]],"newRange":[[20,8],[20,9]],"oldText":"","newText":"h"}},{"type":"change","content":{"oldRange":[[20,9],[20,9]],"newRange":[[20,9],[20,10]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[20,10],[20,10]],"newRange":[[20,10],[20,11]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[20,11],[20,11]],"newRange":[[20,11],[20,12]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[20,12],[20,12]],"newRange":[[20,12],[20,13]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[20,13],[20,13]],"newRange":[[20,13],[20,14]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[20,14],[20,14]],"newRange":[[20,14],[20,15]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[20,15],[20,15]],"newRange":[[20,15],[20,16]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[20,16],[20,16]],"newRange":[[20,16],[20,17]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[20,17],[20,17]],"newRange":[[20,17],[20,18]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[7,0],[7,2]],"newRange":[[7,0],[7,0]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[6,0],[6,2]],"newRange":[[6,0],[6,0]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[20,38],[20,48]],"newRange":[[20,38],[20,39]],"oldText":"user_email","newText":"a"}},{"type":"change","content":{"oldRange":[[20,39],[20,39]],"newRange":[[20,39],[20,40]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[20,40],[20,40]],"newRange":[[20,40],[20,41]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[20,41],[20,41]],"newRange":[[20,41],[20,42]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[20,42],[20,42]],"newRange":[[20,42],[20,43]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[20,43],[20,43]],"newRange":[[20,43],[20,44]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[20,44],[20,44]],"newRange":[[20,44],[20,45]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[20,45],[20,45]],"newRange":[[20,45],[20,46]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[20,46],[20,46]],"newRange":[[20,46],[20,47]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[20,47],[20,47]],"newRange":[[20,47],[20,48]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[20,44],[20,48]],"newRange":[[20,44],[20,49]],"oldText":"emai","newText":"email"}},{"type":"change","content":{"oldRange":[[20,58],[20,58]],"newRange":[[20,58],[20,59]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[20,59],[20,59]],"newRange":[[20,59],[20,60]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[20,60],[20,60]],"newRange":[[20,60],[20,61]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[20,61],[20,61]],"newRange":[[20,61],[20,62]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[20,62],[20,62]],"newRange":[[20,62],[20,63]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[20,63],[20,63]],"newRange":[[20,63],[20,64]],"oldText":"","newText":"."}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[20,64],[20,64]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":113,"snapshot":{"2":{"1":{"range":[[20,8],[20,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"checkpoint","id":116,"snapshot":{"2":{"1":{"range":[[19,8],[19,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[19,8],[19,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,8],[19,8]],"newRange":[[19,8],[19,9]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[19,9],[19,9]],"newRange":[[19,9],[19,10]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[19,10],[19,10]],"newRange":[[19,10],[19,11]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[19,11],[19,11]],"newRange":[[19,11],[19,12]],"oldText":"","newText":"b"}},{"type":"change","content":{"oldRange":[[19,12],[19,12]],"newRange":[[19,12],[19,13]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[19,13],[19,13]],"newRange":[[19,13],[19,14]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[19,14],[19,14]],"newRange":[[19,14],[19,15]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[19,15],[19,15]],"newRange":[[19,15],[19,16]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[19,16],[19,16]],"newRange":[[19,16],[19,17]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[19,8],[19,49]],"newRange":[[19,8],[19,8]],"oldText":"member = create :user, username: 'member'","newText":""}},{"type":"change","content":{"oldRange":[[18,55],[19,0]],"newRange":[[18,55],[18,55]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[19,77],[19,77]],"newRange":[[19,77],[20,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[20,0],[20,0]],"newRange":[[20,0],[20,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[20,8],[20,8]],"newRange":[[20,8],[20,49]],"oldText":"","newText":"member = create :user, username: 'member'"}},{"type":"change","content":{"oldRange":[[18,55],[18,63]],"newRange":[[18,55],[18,55]],"oldText":"        ","newText":""}},{"type":"change","content":{"oldRange":[[9,0],[12,5]],"newRange":[[9,0],[9,0]],"oldText":"\n  before do\n\n  end","newText":""}},{"type":"change","content":{"oldRange":[[8,17],[8,44]],"newRange":[[8,17],[8,17]],"oldText":"{ user: { role: :admin } } ","newText":""}},{"type":"change","content":{"oldRange":[[8,2],[8,18]],"newRange":[[8,2],[8,2]],"oldText":"let(:params) { }","newText":""}},{"type":"change","content":{"oldRange":[[8,0],[8,2]],"newRange":[[8,0],[8,0]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[7,0],[8,0]],"newRange":[[7,0],[7,0]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[6,0],[7,0]],"newRange":[[6,0],[6,0]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[5,0],[6,0]],"newRange":[[5,0],[5,0]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[4,31],[5,0]],"newRange":[[4,31],[4,31]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[5,0],[6,0]],"newRange":[[5,0],[5,0]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[12,49],[12,49]],"newRange":[[12,49],[13,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[13,0],[13,0]],"newRange":[[13,0],[13,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[13,8],[13,8]],"newRange":[[13,8],[13,9]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[13,9],[13,9]],"newRange":[[13,9],[13,10]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[13,10],[13,10]],"newRange":[[13,10],[13,11]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[13,11],[13,11]],"newRange":[[13,11],[13,12]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[13,12],[13,12]],"newRange":[[13,12],[13,13]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[13,13],[13,13]],"newRange":[[13,13],[13,14]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[13,14],[13,14]],"newRange":[[13,14],[13,15]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[13,15],[13,15]],"newRange":[[13,15],[13,16]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[13,16],[13,16]],"newRange":[[13,16],[13,17]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[13,17],[13,17]],"newRange":[[13,17],[13,44]],"oldText":"","newText":"{ user: { role: :admin } } "}},{"type":"change","content":{"oldRange":[[13,43],[13,44]],"newRange":[[13,43],[13,43]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[7,42],[8,0]],"newRange":[[7,42],[7,42]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[23,0],[23,51]],"newRange":[[23,0],[23,0]],"oldText":"      let(:user) { create :user, username: 'user' }","newText":""}},{"type":"change","content":{"oldRange":[[23,0],[25,0]],"newRange":[[23,0],[23,0]],"oldText":"\n\n","newText":""}},{"type":"change","content":{"oldRange":[[24,0],[24,56]],"newRange":[[24,0],[33,0]],"oldText":"        expect(response).to have_http_status(:forbidden)","newText":"        admin = create :user, :admin, username: 'admin'\n        headers = auth_headers(email: admin.email, token: admin.access_token)\n        member = create :user, username: 'member'\n        params = { user: { role: :admin } }\n\n        put api_v1_admin_user_path(member.id), params, headers\n\n        member.reload\n        expect(response).to have_http_status(:accepted)\n"}},{"type":"change","content":{"oldRange":[[24,0],[24,8]],"newRange":[[24,0],[24,8]],"oldText":"        ","newText":"        "}},{"type":"change","content":{"oldRange":[[32,55],[33,0]],"newRange":[[32,55],[32,55]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[24,37],[24,55]],"newRange":[[24,37],[24,37]],"oldText":" username: 'admin'","newText":""}},{"type":"change","content":{"oldRange":[[24,36],[24,37]],"newRange":[[24,36],[24,36]],"oldText":",","newText":""}},{"type":"change","content":{"oldRange":[[24,35],[24,36]],"newRange":[[24,35],[24,35]],"oldText":"n","newText":""}},{"type":"change","content":{"oldRange":[[24,34],[24,35]],"newRange":[[24,34],[24,34]],"oldText":"i","newText":""}},{"type":"change","content":{"oldRange":[[24,33],[24,34]],"newRange":[[24,33],[24,33]],"oldText":"m","newText":""}},{"type":"change","content":{"oldRange":[[24,32],[24,33]],"newRange":[[24,32],[24,32]],"oldText":"d","newText":""}},{"type":"change","content":{"oldRange":[[24,31],[24,32]],"newRange":[[24,31],[24,31]],"oldText":"a","newText":""}},{"type":"change","content":{"oldRange":[[24,30],[24,31]],"newRange":[[24,30],[24,30]],"oldText":":","newText":""}},{"type":"change","content":{"oldRange":[[24,29],[24,30]],"newRange":[[24,29],[24,29]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[24,28],[24,29]],"newRange":[[24,28],[24,28]],"oldText":",","newText":""}},{"type":"change","content":{"oldRange":[[24,8],[24,13]],"newRange":[[24,8],[24,9]],"oldText":"admin","newText":"l"}},{"type":"change","content":{"oldRange":[[24,9],[24,9]],"newRange":[[24,9],[24,10]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[24,10],[24,10]],"newRange":[[24,10],[24,11]],"oldText":"","newText":"g"}},{"type":"change","content":{"oldRange":[[24,11],[24,11]],"newRange":[[24,11],[24,12]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[24,12],[24,12]],"newRange":[[24,12],[24,13]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[24,13],[24,13]],"newRange":[[24,13],[24,14]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[24,14],[24,14]],"newRange":[[24,14],[24,15]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[24,15],[24,15]],"newRange":[[24,15],[24,16]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[24,16],[24,16]],"newRange":[[24,16],[24,17]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[24,17],[24,17]],"newRange":[[24,17],[24,18]],"oldText":"","newText":"u"}},{"type":"change","content":{"oldRange":[[24,18],[24,18]],"newRange":[[24,18],[24,19]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[24,19],[24,19]],"newRange":[[24,19],[24,20]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[24,20],[24,20]],"newRange":[[24,20],[24,21]],"oldText":"","newText":"r"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[24,21],[24,21]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,38],[25,43]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,38],[25,43]],"newRange":[[25,38],[25,51]],"oldText":"admin","newText":"loged_in_user"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,51],[25,51]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,66],[25,71]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,66],[25,71]],"newRange":[[25,66],[25,79]],"oldText":"admin","newText":"loged_in_user"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,79],[25,79]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":232,"snapshot":{"2":{"1":{"range":[[32,46],[32,54]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[32,46],[32,54]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[32,46],[32,54]],"newRange":[[32,46],[32,46]],"oldText":"accepted","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[32,46],[32,46]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[32,46],[32,46]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[32,46],[32,46]],"newRange":[[32,46],[32,47]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[32,47],[32,47]],"newRange":[[32,47],[32,48]],"oldText":"","newText":"o"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[32,48],[32,48]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[32,48],[32,48]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[32,48],[32,48]],"newRange":[[32,48],[32,49]],"oldText":"","newText":"r"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[32,49],[32,49]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[32,49],[32,49]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[32,49],[32,49]],"newRange":[[32,49],[32,50]],"oldText":"","newText":"b"}},{"type":"change","content":{"oldRange":[[32,50],[32,50]],"newRange":[[32,50],[32,51]],"oldText":"","newText":"i"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[32,51],[32,51]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[32,51],[32,51]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[32,46],[32,51]],"newRange":[[32,46],[32,55]],"oldText":"forbi","newText":"forbidden"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[32,55],[32,55]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[17,55],[17,55]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[17,55],[17,55]],"newRange":[[17,55],[17,56]],"oldText":"","newText":"A"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[17,56],[17,56]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[17,56],[17,56]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[17,55],[17,56]],"newRange":[[17,55],[17,55]],"oldText":"A","newText":""}},{"type":"change","content":{"oldRange":[[17,55],[17,55]],"newRange":[[17,55],[18,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[18,0],[18,0]],"newRange":[[18,0],[18,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[18,8],[18,8]],"newRange":[[18,8],[18,9]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[18,9],[18,9]],"newRange":[[18,9],[18,10]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[18,10],[18,10]],"newRange":[[18,10],[18,11]],"oldText":"","newText":"y"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[18,11],[18,11]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[18,11],[18,11]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[18,8],[18,11]],"newRange":[[18,8],[18,11]],"oldText":"pry","newText":"pry"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[18,11],[18,11]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[18,11],[18,11]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[18,8],[18,11]],"newRange":[[18,8],[18,19]],"oldText":"pry","newText":"binding.pry"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[18,19],[18,19]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[18,8],[18,19]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":true,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[18,8],[18,19]],"newRange":[[18,8],[18,8]],"oldText":"binding.pry","newText":""}},{"type":"change","content":{"oldRange":[[18,8],[18,8]],"newRange":[[18,8],[18,57]],"oldText":"","newText":"expect(response).to match_response_schema('user')"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[18,57],[18,57]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[18,8],[18,57]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[18,8],[18,57]],"newRange":[[18,8],[18,8]],"oldText":"expect(response).to match_response_schema('user')","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[18,8],[18,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[18,0],[18,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[17,55],[18,0]],"newRange":[[17,55],[17,55]],"oldText":"\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[17,55],[17,55]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[18,39],[18,39]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[18,39],[18,39]],"newRange":[[18,39],[19,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[19,0],[19,0]],"newRange":[[19,0],[19,8]],"oldText":"","newText":"        "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[19,8],[19,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[19,8],[19,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,8],[19,8]],"newRange":[[19,8],[19,57]],"oldText":"","newText":"expect(response).to match_response_schema('user')"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[19,57],[19,57]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[19,56],[19,56]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[17,55],[17,63]],"newRange":[[17,55],[17,55]],"oldText":"        ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[19,56],[19,56]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[19,8],[19,57]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,8],[19,57]],"newRange":[[19,8],[19,8]],"oldText":"expect(response).to match_response_schema('user')","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[19,8],[19,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[15,0],[15,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[15,0],[15,0]],"newRange":[[15,0],[16,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[16,0],[16,0]],"newRange":[[16,0],[16,0]],"oldText":"","newText":""}},{"type":"change","content":{"oldRange":[[15,0],[15,0]],"newRange":[[15,0],[15,0]],"oldText":"","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[16,0],[16,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[16,0],[16,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[16,0],[16,0]],"newRange":[[16,0],[16,49]],"oldText":"","newText":"expect(response).to match_response_schema('user')"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[16,49],[16,49]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[16,0],[16,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[16,0],[16,0]],"newRange":[[16,0],[16,8]],"oldText":"","newText":"        "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[16,8],[16,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[17,8],[17,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[20,0],[20,8]],"newRange":[[20,0],[20,0]],"oldText":"        ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[17,8],[17,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[18,8],[18,55]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[18,8],[18,55]],"newRange":[[18,8],[18,8]],"oldText":"expect(response).to have_http_status(:accepted)","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[18,8],[18,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[18,0],[18,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[17,21],[18,0]],"newRange":[[17,21],[17,21]],"oldText":"\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[17,21],[17,21]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[15,0],[15,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[15,0],[15,0]],"newRange":[[15,0],[16,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[16,0],[16,0]],"newRange":[[16,0],[16,0]],"oldText":"","newText":""}},{"type":"change","content":{"oldRange":[[15,0],[15,0]],"newRange":[[15,0],[15,0]],"oldText":"","newText":""}},{"type":"change","content":{"oldRange":[[16,0],[16,0]],"newRange":[[16,0],[16,47]],"oldText":"","newText":"expect(response).to have_http_status(:accepted)"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[16,47],[16,47]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[16,0],[16,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[16,0],[16,0]],"newRange":[[16,0],[16,8]],"oldText":"","newText":"        "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[16,8],[16,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[17,8],[17,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[18,21],[18,29]],"newRange":[[18,21],[18,21]],"oldText":"        ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[17,8],[17,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[39,0],[39,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[38,3],[39,0]],"newRange":[[38,3],[38,3]],"oldText":"\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[38,3],[38,3]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[38,3],[38,3]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[38,3],[38,3]],"newRange":[[38,3],[39,0]],"oldText":"","newText":"\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[38,3],[38,3]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,0],[20,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,39],[20,0]],"newRange":[[19,39],[19,39]],"oldText":"\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[19,39],[19,39]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,0],[20,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[6,0],[6,0]],"newRange":[[6,0],[16,0]],"oldText":"","newText":"  let(:user_email) { user.email }\n  let(:access_token) { user.access_token }\n  let(:member) { create :user, username: 'member' }\n  let(:headers) { auth_headers(email: user_email, token: access_token) }\n  let(:params) { { user: { role: :admin } } }\n\n  before do\n    put \"/api/v1/admin/users/#{member.id}\", params, headers\n  end\n\n"}},{"type":"change","content":{"oldRange":[[18,0],[18,0]],"newRange":[[18,0],[20,0]],"oldText":"","newText":"      let(:user) { create :user, :admin, username: 'admin' }\n\n"}},{"type":"change","content":{"oldRange":[[21,0],[21,0]],"newRange":[[21,0],[22,0]],"oldText":"","newText":"        member.reload\n"}},{"type":"change","content":{"oldRange":[[22,0],[29,0]],"newRange":[[22,0],[22,0]],"oldText":"        admin = create :user, :admin, username: 'admin'\n        headers = auth_headers(email: admin.email, token: admin.access_token)\n        member = create :user, username: 'member'\n        params = { user: { role: :admin } }\n\n        put api_v1_admin_user_path(member.id), params, headers\n\n","newText":""}},{"type":"change","content":{"oldRange":[[23,0],[25,0]],"newRange":[[23,0],[23,0]],"oldText":"        expect(response).to match_response_schema('user')\n        member.reload\n","newText":""}},{"type":"change","content":{"oldRange":[[28,0],[28,0]],"newRange":[[28,0],[30,0]],"oldText":"","newText":"      let(:user) { create :user, username: 'user' }\n\n"}},{"type":"change","content":{"oldRange":[[31,0],[39,0]],"newRange":[[31,0],[31,0]],"oldText":"        loged_in_user = create :user\n        headers = auth_headers(email: loged_in_user.email, token: loged_in_user.access_token)\n        member = create :user, username: 'member'\n        params = { user: { role: :admin } }\n\n        put api_v1_admin_user_path(member.id), params, headers\n\n        member.reload\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[24,0],[24,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[20,0],[20,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[6,0],[16,0]],"newRange":[[6,0],[6,0]],"oldText":"  let(:user_email) { user.email }\n  let(:access_token) { user.access_token }\n  let(:member) { create :user, username: 'member' }\n  let(:headers) { auth_headers(email: user_email, token: access_token) }\n  let(:params) { { user: { role: :admin } } }\n\n  before do\n    put \"/api/v1/admin/users/#{member.id}\", params, headers\n  end\n\n","newText":""}},{"type":"change","content":{"oldRange":[[8,0],[8,0]],"newRange":[[8,0],[13,0]],"oldText":"","newText":"      it 'sets the member into an admin' do\n        admin = create :user, :admin, username: 'admin'\n        headers = auth_headers(email: admin.email, token: admin.access_token)\n        member = create :user, username: 'member'\n        params = { user: { role: :admin } }\n"}},{"type":"change","content":{"oldRange":[[13,0],[14,0]],"newRange":[[13,0],[13,0]],"oldText":"      let(:user) { create :user, :admin, username: 'admin' }\n","newText":""}},{"type":"change","content":{"oldRange":[[14,0],[14,0]],"newRange":[[14,0],[18,0]],"oldText":"","newText":"        put api_v1_admin_user_path(member.id), params, headers\n\n        expect(response).to have_http_status(:accepted)\n        expect(response).to match_response_schema('user')\n"}},{"type":"change","content":{"oldRange":[[18,0],[19,0]],"newRange":[[18,0],[18,0]],"oldText":"      it 'sets the member into an admin' do\n","newText":""}},{"type":"change","content":{"oldRange":[[19,0],[20,0]],"newRange":[[19,0],[19,0]],"oldText":"        expect(response).to have_http_status(:accepted)\n","newText":""}},{"type":"change","content":{"oldRange":[[24,0],[24,0]],"newRange":[[24,0],[29,0]],"oldText":"","newText":"      it 'receives an unauthorized error' do\n        loged_in_user = create :user\n        headers = auth_headers(email: loged_in_user.email, token: loged_in_user.access_token)\n        member = create :user, username: 'member'\n        params = { user: { role: :admin } }\n"}},{"type":"change","content":{"oldRange":[[29,0],[30,0]],"newRange":[[29,0],[29,0]],"oldText":"      let(:user) { create :user, username: 'user' }\n","newText":""}},{"type":"change","content":{"oldRange":[[30,0],[30,0]],"newRange":[[30,0],[33,0]],"oldText":"","newText":"        put api_v1_admin_user_path(member.id), params, headers\n\n        member.reload\n"}},{"type":"change","content":{"oldRange":[[33,0],[34,0]],"newRange":[[33,0],[33,0]],"oldText":"      it 'receives an unauthorized error' do\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[18,0],[18,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/admin/users_spec.rb","digestWhenLastPersisted":"0010e8760214fabfa7e241b7a5d29cc71bc879f8","preferredLineEnding":null,"nextMarkerId":540,"deserializer":"TextBuffer","version":5},{"id":"4a3ecbecec9a5402ac69a3a2467d4168","text":"require 'rails_helper'\n\ndescribe ApiKey, type: :model do\n  let(:token) { 'foo' }\n\n  before do\n    allow(Security::AccessTokenGenerator).to receive(:generate).and_return(token)\n  end\n\n  describe 'db' do\n    it { is_expected.to have_db_index(:user_id) }\n  end\n\n  describe 'validations' do\n    it { is_expected.to validate_uniqueness_of(:access_token).on(:create) }\n\n    it { is_expected.to validate_presence_of :user_id }\n    it { is_expected.to validate_uniqueness_of :user_id }\n\n    it { is_expected.to validate_presence_of :role }\n  end\n\n  describe 'setting access token' do\n    it 'gets set when a record is created' do\n      subject.run_callbacks :create\n\n      expect(subject.access_token).to eq token\n    end\n  end\n\n  describe '#role' do\n    it 'is member by default' do\n      expect(subject.role).to eq 'member'\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":12,"column":0},"end":{"row":12,"column":0}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":8,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[24,35],[24,35]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[24,35],[24,35]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[24,35],[24,35]],"newRange":[[24,35],[25,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[25,0],[25,0]],"newRange":[[25,0],[25,6]],"oldText":"","newText":"      "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,6],[25,6]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[31,4],[31,4]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,0],[25,6]],"newRange":[[25,0],[25,0]],"oldText":"      ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[31,4],[31,4]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[12,0],[12,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,0],[26,0]],"newRange":[[25,0],[25,0]],"oldText":"\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[12,0],[12,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[12,0],[12,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,0],[25,0]],"newRange":[[25,0],[26,0]],"oldText":"","newText":"\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[12,0],[12,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/models/api_key_spec.rb","digestWhenLastPersisted":"27057a27af6e16349d496417e054cc9f41182596","preferredLineEnding":null,"nextMarkerId":5,"deserializer":"TextBuffer","version":5},{"id":"7e9feaa597faaa25072448b70021ac20","text":"require 'rails_helper'\n\ndescribe User, type: :model do\n  describe 'db' do\n    it { is_expected.to have_db_index(:email) }\n    it { is_expected.to have_db_index(:username) }\n  end\n\n  describe 'validations' do\n    it { is_expected.to validate_presence_of :email }\n    it { is_expected.to validate_uniqueness_of :email }\n\n    it { is_expected.to validate_presence_of :username }\n    it { is_expected.to validate_uniqueness_of :username }\n    it { is_expected.to validate_length_of(:username).is_at_least(4) }\n\n    it { is_expected.to validate_length_of(:password).is_at_least(8) }\n\n    it { is_expected.to validate_length_of(:about).is_at_most(1000) }\n  end\n\n  describe 'security' do\n    it { is_expected.to have_secure_password }\n  end\n\n  describe 'associations' do\n    it { is_expected.to have_one :api_key }\n    it { is_expected.to have_many :posts }\n  end\n\n  describe 'setting the api_key' do\n    it 'gets set when a record is created' do\n      subject.run_callbacks :create\n      expect(subject.api_key).to be_present\n    end\n  end\n\n  describe '#access_token' do\n    it 'returns the api key' do\n      user = create :user\n\n      expect(user.access_token).to eq user.api_key.access_token\n    end\n  end\n\n  describe '#role' do\n    it 'is guest for new users' do\n      user = User.new\n\n      expect(user.role).to be_guest\n    end\n\n    it 'is member by default' do\n      user = create :user\n\n      expect(user.role).to be_member\n    end\n  end\n\n  describe '#role=' do\n    it 'sets the user roles' do\n      user = create :user\n      user.role = 'admin'\n\n      expect(user.role).to be_admin\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":53,"column":7},"end":{"row":53,"column":7}},"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":34,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[39,25],[39,25]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[39,25],[39,25]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[39,25],[39,25]],"newRange":[[39,25],[40,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[40,0],[40,0]],"newRange":[[40,0],[40,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[40,0],[40,6]],"newRange":[[40,0],[40,0]],"oldText":"      ","newText":""}},{"type":"change","content":{"oldRange":[[47,0],[47,0]],"newRange":[[47,0],[47,1]],"oldText":"","newText":"A"}},{"type":"change","content":{"oldRange":[[47,0],[47,1]],"newRange":[[47,0],[47,0]],"oldText":"A","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[47,0],[47,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":9,"snapshot":{"2":{"1":{"range":[[47,21],[47,21]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[47,21],[47,21]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[47,21],[47,21]],"newRange":[[47,21],[48,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[48,0],[48,0]],"newRange":[[48,0],[48,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[48,0],[48,6]],"newRange":[[48,0],[48,0]],"oldText":"      ","newText":""}},{"type":"change","content":{"oldRange":[[53,25],[53,25]],"newRange":[[53,25],[53,26]],"oldText":"","newText":"A"}},{"type":"change","content":{"oldRange":[[53,25],[53,26]],"newRange":[[53,25],[53,25]],"oldText":"A","newText":""}},{"type":"change","content":{"oldRange":[[53,21],[53,25]],"newRange":[[53,21],[53,26]],"oldText":"user","newText":"users"}},{"type":"change","content":{"oldRange":[[53,26],[53,26]],"newRange":[[53,26],[54,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[54,0],[54,0]],"newRange":[[54,0],[54,6]],"oldText":"","newText":"      "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,6],[54,6]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":20,"snapshot":{"2":{"1":{"range":[[62,25],[62,25]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[62,25],[62,25]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[62,25],[62,25]],"newRange":[[62,25],[63,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[63,0],[63,0]],"newRange":[[63,0],[63,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[63,0],[63,6]],"newRange":[[63,0],[63,0]],"oldText":"      ","newText":""}},{"type":"change","content":{"oldRange":[[54,0],[54,6]],"newRange":[[54,0],[54,0]],"oldText":"      ","newText":""}},{"type":"change","content":{"oldRange":[[53,26],[53,26]],"newRange":[[53,26],[53,27]],"oldText":"","newText":"A"}},{"type":"change","content":{"oldRange":[[53,26],[53,27]],"newRange":[[53,26],[53,26]],"oldText":"A","newText":""}},{"type":"change","content":{"oldRange":[[53,25],[53,26]],"newRange":[[53,25],[53,25]],"oldText":"s","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,25],[53,25]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,23],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[2,0],[2,0]],"newRange":[[2,0],[3,0]],"oldText":"","newText":"describe User, type: :model  do\n"}},{"type":"change","content":{"oldRange":[[3,0],[4,0]],"newRange":[[3,0],[3,0]],"oldText":"describe User, type: :model do\n","newText":""}},{"type":"change","content":{"oldRange":[[40,0],[41,0]],"newRange":[[40,0],[40,0]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[47,0],[48,0]],"newRange":[[47,0],[47,0]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[52,0],[53,0]],"newRange":[[52,0],[52,0]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[60,0],[61,0]],"newRange":[[60,0],[60,0]],"oldText":"\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,23],[51,23]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,7],[53,7]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[2,0],[2,0]],"newRange":[[2,0],[3,0]],"oldText":"","newText":"describe User, type: :model do\n"}},{"type":"change","content":{"oldRange":[[3,0],[4,0]],"newRange":[[3,0],[3,0]],"oldText":"describe User, type: :model  do\n","newText":""}},{"type":"change","content":{"oldRange":[[40,0],[40,0]],"newRange":[[40,0],[41,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[48,0],[48,0]],"newRange":[[48,0],[49,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[54,0],[54,0]],"newRange":[[54,0],[55,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[63,0],[63,0]],"newRange":[[63,0],[64,0]],"oldText":"","newText":"\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[56,7],[56,7]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/models/user_spec.rb","digestWhenLastPersisted":"29492b06f04750cee3aa6064e070afc7b197fd23","preferredLineEnding":null,"nextMarkerId":35,"deserializer":"TextBuffer","version":5},{"id":"ddae4bbe40b5c03887913fa872888360","text":"require 'rails_helper'\n\ndescribe Api::V1::UsersController, type: :routing do\n  xit { expect(get: 'api/v1/users').to   route_to('api/v1/users#index', format: 'json') }\n  xit { expect(get: 'api/v1/users/1').to route_to('api/v1/users#show', id: '1', format: 'json') }\n  it { expect(post: 'api/v1/users').to   route_to('api/v1/users#create', format: 'json') }\n  it { expect(put: 'api/v1/users/1').to route_to('api/v1/users#update', id: '1', format: 'json') }\n  xit { expect(delete: 'api/v1/users/1').to route_to('api/v1/users#destroy', id: '1', format: 'json') }\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":7,"column":2},"end":{"row":7,"column":2}},"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/routing/api/v1/users_routing_spec.rb","digestWhenLastPersisted":"ffcf9bc7e822f2634ca92eac337193b611928cf5","preferredLineEnding":null,"nextMarkerId":22,"deserializer":"TextBuffer","version":5},{"id":"b092b15cfb06f1600560fcc814800a4d","text":"","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":1,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/posts/list_posts_spec.rb","digestWhenLastPersisted":"da39a3ee5e6b4b0d3255bfef95601890afd80709","preferredLineEnding":"\n","nextMarkerId":2,"deserializer":"TextBuffer","version":5},{"id":"a9ec505b893d2fc02f47722f0c50b37e","text":"# Serializer class for posts\nclass PostSerializer < ActiveModel::Serializer\n  attributes :id, :title, :body\n  belongs_to :user\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"2":{"range":{"start":{"row":3,"column":0},"end":{"row":4,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":3,"column":17},"end":{"row":3,"column":17}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":8,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[2,31],[2,31]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[2,31],[2,31]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[2,31],[2,31]],"newRange":[[2,31],[3,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[3,0],[3,0]],"newRange":[[3,0],[3,2]],"oldText":"","newText":"  "}},{"type":"change","content":{"oldRange":[[3,2],[3,2]],"newRange":[[3,2],[3,18]],"oldText":"","newText":"belongs_to :user"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[3,18],[3,18]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/app/serializers/post_serializer.rb","digestWhenLastPersisted":"0a36cb1107b03aa7d30af7e122c9d797d57a6e56","preferredLineEnding":null,"nextMarkerId":3,"deserializer":"TextBuffer","version":5},{"id":"3bda4d2970a7d096cce870619cd45c08","text":"require 'rails_helper'\nrequire 'support/authentication_helpers'\n\ndescribe 'Posts API', type: :request do\n  include AuthenticationHelpers\n\n  describe 'Create a Post' do\n    context 'with valid params' do\n      it 'creates a Post' do\n        user = create :user\n        headers = auth_headers(email: user.email, token: user.access_token)\n        params = { post: attributes_for(:post) }\n\n        post api_v1_user_posts_path(user.id), params, headers\n\n        expect {\n          post api_v1_user_posts_path(user.id), params, headers\n        }.to change(Post, :count).by(1)\n\n        expect(response).to have_http_status(:created)\n      end\n\n      it 'returns a json message with the post data' do\n        user = create :user\n        headers = auth_headers(email: user.email, token: user.access_token)\n        params = { post: attributes_for(:post) }\n\n        expect {\n          post api_v1_user_posts_path(user.id), params, headers\n        }.to change(Post, :count).by(1)\n\n        expect(response).to match_response_schema('post')\n        json_response = JSON.parse(response.body)\n        expect(json_response['post']['body']).to eq params[:post][:body]\n      end\n\n      it 'creates the post owned by the current user' do\n        user = create :user\n        headers = auth_headers(email: user.email, token: user.access_token)\n        params = { post: attributes_for(:post) }\n\n        post api_v1_user_posts_path(user.id), params, headers\n\n        post = Post.where(user_id: user.id).first\n        expect(post.title).to eq params[:post][:title]\n        expect(post.body).to eq params[:post][:body]\n        expect(post.user_id).to eq user.id\n      end\n    end\n\n    context 'with invalid params' do\n      it 'returns the validation messages' do\n        user = create :user\n        headers = auth_headers(email: user.email, token: user.access_token)\n        params = { post: { title: '1', body: 'A' } }\n\n        post api_v1_user_posts_path(user.id), params, headers\n\n        expect(response).to have_http_status(:unprocessable_entity)\n        json_response = JSON.parse(response.body)\n        expect(json_response['title']).to include 'is too short (minimum is 4 characters)'\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":32,"column":8},"end":{"row":32,"column":8}},"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":16,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[32,49],[32,49]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[32,49],[32,49]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[32,49],[32,49]],"newRange":[[32,49],[33,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[33,0],[33,0]],"newRange":[[33,0],[33,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[33,8],[33,8]],"newRange":[[33,8],[33,9]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[33,9],[33,9]],"newRange":[[33,9],[33,10]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[33,10],[33,10]],"newRange":[[33,10],[33,11]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[33,8],[33,11]],"newRange":[[33,8],[33,11]],"oldText":"pry","newText":"pry"}},{"type":"change","content":{"oldRange":[[33,8],[33,11]],"newRange":[[33,8],[33,19]],"oldText":"pry","newText":"binding.pry"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[33,19],[33,19]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[33,0],[34,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[33,0],[34,0]],"newRange":[[33,0],[33,0]],"oldText":"        binding.pry\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[33,0],[33,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/posts/create_posts_spec.rb","digestWhenLastPersisted":"d20dfba0a8a242ef0efbcd80deac867dd7d64b08","preferredLineEnding":null,"nextMarkerId":23,"deserializer":"TextBuffer","version":5},{"id":"cc3d4e9ba3cf17f67aaa01cc1a0e5c75","text":"module Api\n  module V1\n    # API Controller for Posts\n    class PostsController < ApplicationController\n      # List the current_user posts\n      def index\n        @posts = current_user.messages\n        render json: @posts\n      end\n\n      # Creates a post\n      def create\n        @post = current_user.posts.build(resource_params)\n\n        if @post.save\n          render json: @post, status: :created\n        else\n          render json: @post.errors, status: :unprocessable_entity\n        end\n      end\n\n      private\n\n      def resource_params\n        params.require(:post).permit(:title, :body)\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"47":{"range":{"start":{"row":4,"column":0},"end":{"row":10,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":6,"column":20},"end":{"row":6,"column":20}},"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":99,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[3,49],[3,49]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[3,49],[3,49]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[3,49],[3,49]],"newRange":[[3,49],[4,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[4,0],[4,0]],"newRange":[[4,0],[4,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[4,6],[4,6]],"newRange":[[4,6],[5,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[5,0],[5,0]],"newRange":[[5,0],[5,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[4,0],[4,6]],"newRange":[[4,0],[4,0]],"oldText":"      ","newText":""}},{"type":"change","content":{"oldRange":[[4,0],[4,0]],"newRange":[[4,0],[4,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[4,6],[4,6]],"newRange":[[4,6],[4,7]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[4,7],[4,7]],"newRange":[[4,7],[4,8]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[4,8],[4,8]],"newRange":[[4,8],[4,9]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[4,9],[4,9]],"newRange":[[4,9],[4,10]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,10],[4,10]],"newRange":[[4,10],[4,11]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[4,11],[4,11]],"newRange":[[4,11],[4,12]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[4,12],[4,12]],"newRange":[[4,12],[4,13]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[4,13],[4,13]],"newRange":[[4,13],[4,14]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[4,14],[4,14]],"newRange":[[4,14],[4,15]],"oldText":"","newText":"x"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[4,15],[4,15]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":17,"snapshot":{"2":{"1":{"range":[[4,15],[4,15]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[4,15],[4,15]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[4,15],[4,15]],"newRange":[[4,15],[5,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[5,0],[5,0]],"newRange":[[5,0],[5,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[5,8],[5,8]],"newRange":[[5,8],[5,9]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[5,9],[5,9]],"newRange":[[5,9],[5,10]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[5,9],[5,10]],"newRange":[[5,9],[5,9]],"oldText":"d","newText":""}},{"type":"change","content":{"oldRange":[[5,9],[5,9]],"newRange":[[5,9],[5,10]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[5,10],[5,10]],"newRange":[[5,10],[5,11]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[5,0],[5,8]],"newRange":[[5,0],[5,6]],"oldText":"        ","newText":"      "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[5,9],[5,9]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":26,"snapshot":{"2":{"1":{"range":[[3,49],[3,49]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[3,49],[3,49]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[3,49],[3,49]],"newRange":[[3,49],[4,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[4,0],[4,0]],"newRange":[[4,0],[4,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[4,6],[4,6]],"newRange":[[4,6],[4,7]],"oldText":"","newText":"#"}},{"type":"change","content":{"oldRange":[[4,7],[4,7]],"newRange":[[4,7],[4,8]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,8],[4,8]],"newRange":[[4,8],[4,9]],"oldText":"","newText":"L"}},{"type":"change","content":{"oldRange":[[4,9],[4,9]],"newRange":[[4,9],[4,10]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[4,10],[4,10]],"newRange":[[4,10],[4,11]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[4,11],[4,11]],"newRange":[[4,11],[4,12]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[4,12],[4,12]],"newRange":[[4,12],[4,13]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,13],[4,13]],"newRange":[[4,13],[4,14]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[4,14],[4,14]],"newRange":[[4,14],[4,15]],"oldText":"","newText":"g"}},{"type":"change","content":{"oldRange":[[4,15],[4,15]],"newRange":[[4,15],[4,16]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[4,16],[4,16]],"newRange":[[4,16],[4,17]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,16],[4,17]],"newRange":[[4,16],[4,16]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[4,15],[4,16]],"newRange":[[4,15],[4,15]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[4,14],[4,15]],"newRange":[[4,14],[4,14]],"oldText":"g","newText":""}},{"type":"change","content":{"oldRange":[[4,14],[4,14]],"newRange":[[4,14],[4,15]],"oldText":"","newText":"h"}},{"type":"change","content":{"oldRange":[[4,15],[4,15]],"newRange":[[4,15],[4,16]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[4,16],[4,16]],"newRange":[[4,16],[4,17]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,17],[4,17]],"newRange":[[4,17],[4,18]],"oldText":"","newText":"u"}},{"type":"change","content":{"oldRange":[[4,18],[4,18]],"newRange":[[4,18],[4,19]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[4,18],[4,19]],"newRange":[[4,18],[4,18]],"oldText":"s","newText":""}},{"type":"change","content":{"oldRange":[[4,17],[4,18]],"newRange":[[4,17],[4,17]],"oldText":"u","newText":""}},{"type":"change","content":{"oldRange":[[4,17],[4,17]],"newRange":[[4,17],[4,18]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[4,18],[4,18]],"newRange":[[4,18],[4,19]],"oldText":"","newText":"u"}},{"type":"change","content":{"oldRange":[[4,19],[4,19]],"newRange":[[4,19],[4,20]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[4,20],[4,20]],"newRange":[[4,20],[4,21]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[4,17],[4,21]],"newRange":[[4,17],[4,29]],"oldText":"curr","newText":"current_user"}},{"type":"change","content":{"oldRange":[[4,29],[4,29]],"newRange":[[4,29],[4,30]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,30],[4,30]],"newRange":[[4,30],[4,31]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[4,31],[4,31]],"newRange":[[4,31],[4,32]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[4,32],[4,32]],"newRange":[[4,32],[4,33]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[4,33],[4,33]],"newRange":[[4,33],[4,34]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[4,34],[4,34]],"newRange":[[4,34],[4,35]],"oldText":"","newText":"s"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[4,35],[4,35]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[5,14],[5,14]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[7,0],[7,6]],"newRange":[[7,0],[7,0]],"oldText":"      ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[5,14],[5,14]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":68,"snapshot":{"2":{"1":{"range":[[5,15],[5,15]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[5,15],[5,15]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[5,15],[5,15]],"newRange":[[5,15],[6,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[6,0],[6,0]],"newRange":[[6,0],[6,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[6,8],[6,8]],"newRange":[[6,8],[7,24]],"oldText":"","newText":"  @messages = current_user.messages\n  render json: @messages"}},{"type":"change","content":{"oldRange":[[6,0],[6,10]],"newRange":[[6,0],[6,8]],"oldText":"          ","newText":"        "}},{"type":"change","content":{"oldRange":[[7,2],[7,2]],"newRange":[[7,2],[7,8]],"oldText":"","newText":"      "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[6,8],[6,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":75,"snapshot":{"2":{"1":{"range":[[6,9],[6,17]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[6,9],[6,17]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[6,9],[6,17]],"newRange":[[6,9],[6,9]],"oldText":"messages","newText":""}},{"type":"change","content":{"oldRange":[[6,9],[6,9]],"newRange":[[6,9],[6,10]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[6,10],[6,10]],"newRange":[[6,10],[6,11]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[6,11],[6,11]],"newRange":[[6,11],[6,12]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[6,12],[6,12]],"newRange":[[6,12],[6,13]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[6,13],[6,13]],"newRange":[[6,13],[6,14]],"oldText":"","newText":"s"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[6,14],[6,14]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":84,"snapshot":{"2":{"1":{"range":[[7,22],[7,30]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[7,22],[7,30]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[7,22],[7,30]],"newRange":[[7,22],[7,22]],"oldText":"messages","newText":""}},{"type":"change","content":{"oldRange":[[7,22],[7,22]],"newRange":[[7,22],[7,23]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[7,23],[7,23]],"newRange":[[7,23],[7,24]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[7,24],[7,24]],"newRange":[[7,24],[7,25]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[7,25],[7,25]],"newRange":[[7,25],[7,26]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[7,26],[7,26]],"newRange":[[7,26],[7,27]],"oldText":"","newText":"s"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[7,27],[7,27]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/api/v1/posts_controller.rb","digestWhenLastPersisted":"75f4838cb02cc8aa213cb9db9f9a2dbdf8a6f448","preferredLineEnding":null,"nextMarkerId":48,"deserializer":"TextBuffer","version":5}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"PaneAxis","children":[{"deserializer":"Pane","id":84,"items":[{"deserializer":"TextEditor","id":1401,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1402,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/posts/list_posts_spec.rb","bufferId":"b092b15cfb06f1600560fcc814800a4d","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":1405,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1406,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/app/serializers/post_serializer.rb","bufferId":"a9ec505b893d2fc02f47722f0c50b37e","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":1413,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1414,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/api/v1/posts_controller.rb","bufferId":"cc3d4e9ba3cf17f67aaa01cc1a0e5c75","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":1409,"softTabs":true,"firstVisibleScreenRow":4,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1410,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/posts/create_posts_spec.rb","bufferId":"3bda4d2970a7d096cce870619cd45c08","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":1245,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1246,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/api/v1/users_controller.rb","bufferId":"a7c2d8c15503249037b12c28bf69af65","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"}],"activeItemURI":"/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/api/v1/posts_controller.rb","focused":false,"flexScale":0.9188811188811189},{"deserializer":"Pane","id":1168,"items":[{"deserializer":"TextEditor","id":1165,"softTabs":true,"firstVisibleScreenRow":104,"firstVisibleScreenColumn":14,"displayBuffer":{"deserializer":"DisplayBuffer","id":1164,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/.Trash/users_spec.rb","bufferId":"517197ff710db9b1aa0d279588c59b89","tabLength":2,"largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"6"},"selectionsMarkerLayerId":"7"},{"deserializer":"TextEditor","id":1297,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1298,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/admin/users_spec.rb","bufferId":"08247b6e5e2ba05e6d311c71bf8f373b","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":1373,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1374,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/models/api_key_spec.rb","bufferId":"4a3ecbecec9a5402ac69a3a2467d4168","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":1381,"softTabs":true,"firstVisibleScreenRow":20,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1382,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/models/user_spec.rb","bufferId":"7e9feaa597faaa25072448b70021ac20","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":1393,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1394,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/routing/api/v1/users_routing_spec.rb","bufferId":"ddae4bbe40b5c03887913fa872888360","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":1217,"softTabs":true,"firstVisibleScreenRow":14,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1218,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/app/models/user.rb","bufferId":"c4992dfad04087ff58daddf09e17b852","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":1221,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":1222,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Google Drive/_Projects/gratus/config/application.rb","bufferId":"7c42dee88dc5fff99f7193462985620e","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"}],"activeItemURI":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/routing/api/v1/users_routing_spec.rb","focused":true,"flexScale":1.0811188811188812}],"orientation":"horizontal","flexScale":1},"activePaneId":1168},"packagesWithActiveGrammars":["language-ruby","language-hyperlink","language-todo"],"destroyedItemURIs":["/Users/victor.martins/Google Drive/_Projects/gratus/Gemfile.lock","/Users/victor.martins/Google Drive/_Projects/gratus/config/initializers/secret_token.rb","/Users/victor.martins/Google Drive/_Projects/gratus/Fudgefile","/Users/victor.martins/.Trash/nil}","/Users/victor.martins/Google Drive/_Projects/gratus/config/environments/development.rb","/Users/victor.martins/Google Drive/_Projects/gratus/config/environments/production.rb","/Users/victor.martins/Google Drive/_Projects/gratus/app/models/post.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/routing/api/v1/posts_routing_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/support/authentication_helpers.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/support/authentication_helpers.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/mailers/user_mailer_spec.rb","atom://config/updates","/Users/victor.martins/Google Drive/_Projects/gratus/spec/rails_helper.rb","/Users/victor.martins/Google Drive/_Projects/gratus/.gitignore","/Users/victor.martins/Google Drive/_Projects/gratus/config/initializers/warden.rb","/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/api/v1/admin_application_controller.rb","/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/unauthenticated_controller.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/lib/security/access_token_generator_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/lib/security/authentication_token_strategy_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/app/mailers/user_mailer.rb","/Users/victor.martins/Google Drive/_Projects/gratus/app/mailers/application_mailer.rb","/Users/victor.martins/.Trash/.yardopts","/Users/victor.martins/Google Drive/_Projects/gratus/lib/users.rb","/Users/victor.martins/Google Drive/_Projects/gratus/lib/support.rb","/Users/victor.martins/Google Drive/_Projects/gratus/lib/security.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/lib/users/email/welcome_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/lib/users/email/welcome.rb","/Users/victor.martins/Google Drive/_Projects/gratus/lib/users/email.rb","/Users/victor.martins/Google Drive/_Projects/gratus/lib/users/mail/welcome.rb","/Users/victor.martins/Google Drive/_Projects/gratus/lib/support/string_inquirer.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/users_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/.rubocop.yml","/Users/victor.martins/Google Drive/_Projects/gratus/app/models/api_key.rb","/Users/victor.martins/Google Drive/_Projects/gratus/lib/security/access_token_generator.rb","/Users/victor.martins/Google Drive/_Projects/gratus/.rspec","/Users/victor.martins/Google Drive/_Projects/gratus/spec/support/matchers/api_schema_matcher.rb","/Users/victor.martins/Google Drive/_Projects/gratus/Gemfile","/Users/victor.martins/Google Drive/_Projects/gratus/spec/support/matchers/api_schema_matcher.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/support/api/schemas/user.json","/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/application_controller.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/spec_helper.rb","/Users/victor.martins/Google Drive/_Projects/gratus/lib/security/authorization.rb","/Users/victor.martins/Google Drive/_Projects/gratus/lib/security/authentication.rb","/Users/victor.martins/Google Drive/_Projects/gratus/lib/security/authentication_token_strategy.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/users/create_user_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/users/edit_user_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/config/routes.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/users/edit_user_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/factories/user.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/factories/post.rb","/Users/victor.martins/Google Drive/_Projects/gratus/app/serializers/user_serializer.rb","/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/api/v1/admin/posts_controller.rb","/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/api/v1/admin/users_controller.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/models/post_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/routing/api/v1/admin/admin_posts_routing_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/routing/api/v1/admin/admin_users_routing_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/users/create_user_spec.rb","/Users/victor.martins/Google Drive/_Projects/gratus/spec/support/api/schemas/post.json"]},"packageStates":{"fuzzy-finder":{"/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/posts/list_posts_spec.rb":1459228849315,"/Users/victor.martins/Google Drive/_Projects/gratus/app/serializers/post_serializer.rb":1459229006769,"/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/api/v1/posts_controller.rb":1459229328893,"/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/posts/create_posts_spec.rb":1459228850223,"/Users/victor.martins/Google Drive/_Projects/gratus/app/controllers/api/v1/users_controller.rb":1459229321589,"/Users/victor.martins/.Trash/users_spec.rb":1459183070586,"/Users/victor.martins/Google Drive/_Projects/gratus/spec/requests/admin/users_spec.rb":1459227530610,"/Users/victor.martins/Google Drive/_Projects/gratus/spec/models/api_key_spec.rb":1459227536370,"/Users/victor.martins/Google Drive/_Projects/gratus/spec/models/user_spec.rb":1459227702240,"/Users/victor.martins/Google Drive/_Projects/gratus/spec/routing/api/v1/users_routing_spec.rb":1459229475751,"/Users/victor.martins/Google Drive/_Projects/gratus/app/models/user.rb":1459183047964,"/Users/victor.martins/Google Drive/_Projects/gratus/config/application.rb":1459178201410},"keybinding-resolver":{},"metrics":{"sessionLength":156150535},"tree-view":{"directoryExpansionStates":{"/Users/victor.martins/Google Drive/_Projects/gratus":{"isExpanded":true,"entries":{".git":{"isExpanded":false,"entries":{}},"app":{"isExpanded":true,"entries":{"assets":{"isExpanded":false,"entries":{}},"controllers":{"isExpanded":true,"entries":{"api":{"isExpanded":true,"entries":{"v1":{"isExpanded":true,"entries":{"admin":{"isExpanded":true,"entries":{}}}}}},"concerns":{"isExpanded":false,"entries":{}}}},"mailers":{"isExpanded":true,"entries":{}},"models":{"isExpanded":true,"entries":{"concerns":{"isExpanded":false,"entries":{}}}},"views":{"isExpanded":false,"entries":{}},"services":{"isExpanded":true,"entries":{"users":{"isExpanded":true,"entries":{}}}},"serializers":{"isExpanded":true,"entries":{}}}},"bin":{"isExpanded":false,"entries":{}},"config":{"isExpanded":false,"entries":{}},"db":{"isExpanded":false,"entries":{}},"lib":{"isExpanded":true,"entries":{"assets":{"isExpanded":true,"entries":{}},"security":{"isExpanded":true,"entries":{}},"support":{"isExpanded":true,"entries":{}},"tasks":{"isExpanded":true,"entries":{}},"users":{"isExpanded":true,"entries":{"email":{"isExpanded":true,"entries":{}},"mail":{"isExpanded":false,"entries":{}}}}}},"log":{"isExpanded":false,"entries":{}},"public":{"isExpanded":false,"entries":{}},"spec":{"isExpanded":true,"entries":{"controllers":{"isExpanded":false,"entries":{}},"factories":{"isExpanded":true,"entries":{}},"lib":{"isExpanded":true,"entries":{"security":{"isExpanded":false,"entries":{}},"users":{"isExpanded":true,"entries":{"email":{"isExpanded":true,"entries":{}}}}}},"mailers":{"isExpanded":false,"entries":{}},"models":{"isExpanded":true,"entries":{}},"requests":{"isExpanded":true,"entries":{"admin":{"isExpanded":true,"entries":{}},"posts":{"isExpanded":true,"entries":{}},"users":{"isExpanded":false,"entries":{}}}},"routing":{"isExpanded":false,"entries":{}},"support":{"isExpanded":true,"entries":{"api":{"isExpanded":false,"entries":{}},"matchers":{"isExpanded":false,"entries":{}}}}}},"tmp":{"isExpanded":false,"entries":{}},"coverage":{"isExpanded":false,"entries":{}},"doc":{"isExpanded":false,"entries":{}},".yardoc":{"isExpanded":false,"entries":{}}}}},"selectedPath":"/Users/victor.martins/Google Drive/_Projects/gratus/spec/routing","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":380},"find-and-replace":{"findOptions":{"findPattern":"json_response","replacePattern":"\"","pathsPattern":"","useRegex":false,"wholeWord":false,"caseSensitive":false,"inCurrentSelection":true},"findHistory":["offences","\"","self","env","'","json_response"],"replaceHistory":["offenses","'","\""],"pathsHistory":[]},"linter":{"scope":"Project"}},"fullScreen":false}