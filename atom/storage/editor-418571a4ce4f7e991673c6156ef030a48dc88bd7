{"mode":"editor","version":1,"grammars":{"grammarOverridesByPath":{}},"project":{"deserializer":"Project","paths":["/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_ca"],"buffers":[{"id":"70f0e1e36d1dfbad06aa7bff112e793a","text":"# encoding: utf-8\n\nmodule GlobalAccountingBase\n  # Seeds module\n  module Seeds\n    # CoreAccounting seeds\n    class CoreAccounting < Base\n\n      # Calls the seed method for each type\n      def self.sow\n        self.print_seeding  'Core Accounting', title: true\n\n        seed_tax_schemes\n        seed_tax_submission_frequency_types\n        seed_tax_rates(nil, cache_static_data: true)\n        seed_tax_rate_associations(nil, cache_static_data: true)\n        seed_tax_rate_percentages(nil, cache_static_data: true)\n        seed_tax_return_statuses\n        seed_tax_types(nil, cache_static_data: true)\n        seed_tax_rates_tax_types(nil)\n        seed_states_tax_types(nil, cache_static_data: true)\n        seed_tax_return_types(nil, cache_static_data: true)\n        seed_tax_return_types_tax_types(nil, cache_static_data: true)\n        seed_tax_return_box_types\n        seed_pearls_types(nil, cache_static_data: true)\n        seed_coa_group_types(nil, cache_static_data: true)\n        seed_ledger_account_types(nil, cache_static_data: true)\n        seed_coa_templates(nil, cache_static_data: true)\n        seed_coa_accounts(nil, cache_static_data: true)\n        seed_transaction_types\n        seed_payment_types\n        seed_tax_relations\n        seed_coa_account_tax_rate_associations(nil, cache_static_data: true)\n        seed_annotation_element_tax_rate_associations(nil, cache_static_data: true)\n        seed_tax_types_tax_sub_freq_types(nil, cache_static_data: true)\n      end\n\n      # Seed the tax types\n      def self.seed_tax_types(country=nil, options={})\n        self.print_seeding 'Tax Types'\n\n        seed_data = get_data(:tax_types, country, :id, :name, :tax_return_type)\n\n        seed_data.each_with_index do |data, index|\n          create_tax_type!(data)\n        end\n      end\n\n      # Seed the relation between a tax rate and a tax type\n      def self.seed_tax_rates_tax_types(country=nil, options={})\n        self.print_seeding 'Tax Rates to Tax Types Association'\n        seed_data = get_data(:tax_rates_tax_types, country, :tax_rate, :tax_type)\n\n        seed_data.each do |data|\n          create_tax_rate_tax_type!(data)\n        end\n\n      end\n\n      # Seed the States Tax Types\n      def self.seed_states_tax_types(country=nil, options={})\n        self.print_seeding 'States Tax Types'\n\n        seed_data = get_data(:states_tax_types, country, :id, :state_code, :tax_type)\n\n        seed_data.each_with_index do |data, index|\n          create_states_tax_type!(data)\n        end\n      end\n\n      # Creates a tax return type from seed data\n      def self.seed_tax_return_types(country=nil, options = {})\n        self.print_seeding 'Tax Return Types'\n\n        seed_data = get_data(:tax_return_types, country, :name)\n\n        seed_data.each do |data|\n          tax_return_type = AdvancedUk::TaxReturnType.new\n          tax_return_type.name = data[:name]\n          tax_return_type.save!\n        end\n\n        AdvancedUk::TaxReturnType.cache_static_data if options[:cache_static_data]\n      end\n\n      # Creates an annotation return report from seed data\n      def self.seed_tax_return_types_tax_types(country=nil, options = {})\n        self.print_seeding 'Tax Return Types - Tax Types associations'\n\n        seed_data = get_data(:tax_return_types_tax_types, country, :tax_return_type, :tax_type)\n\n        seed_data.each do |data|\n          tax_return_type_tax_type = AdvancedUk::TaxReturnTypesTaxType.new\n          tax_return_type_tax_type.tax_return_type = get_type(AdvancedUk::TaxReturnType, data[:tax_return_type])\n          tax_return_type_tax_type.tax_type = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type])\n          tax_return_type_tax_type.save!\n        end\n\n        AdvancedUk::TaxReturnTypesTaxType.cache_static_data if options[:cache_static_data]\n      end\n\n      # Seed the tax schemes\n      def self.seed_tax_schemes(country=nil)\n        self.print_seeding 'Tax Schemes'\n\n        seed_data = get_data(:tax_schemes, country, :id, :name, :scopes)\n\n        seed_data.each_with_index do |data, index|\n          scheme = Config.config.tax_scheme_model.new(:name => data[:name], :id => data[:id])\n          scheme.scopes = parse_scope(data[:scopes])\n          scheme.identifier = data[:identifier]\n          scheme.save!\n        end\n\n        Config.config.tax_scheme_model.cache_static_data\n      end\n\n      # Seed the tax submission freqency types\n      def self.seed_tax_submission_frequency_types(country=nil)\n        self.print_seeding 'Tax Submission Frequency Types'\n\n        seed_data = get_data(:tax_submission_frequency_types, country, :id, :name, :scopes)\n\n        seed_data.each_with_index do |data, index|\n          type = Config.config.tax_submission_frequency_type_model.new(:name => data[:name], :id => data[:id])\n          type.scopes = parse_scope(data[:scopes])\n          type.save!\n        end\n\n        Config.config.tax_submission_frequency_type_model.cache_static_data\n      end\n\n      # Seed the tax rates\n      def self.seed_tax_rates(country=nil, options={})\n        self.print_seeding 'Tax Rates'\n\n        seed_data = get_data( :tax_rates, country, :id, :name, :country, :ec_sales_description_name, :taxable, :type,\n                              :is_system)\n\n        seed_data.each_with_index do |data, index|\n          create_tax_rate!(data)\n        end\n\n        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n      end\n\n      # Returns scope_id for a country\n      def self.scope_id(country)\n        \"#{country.code}#{GlobalAccountingBase::Handlers::TaxSystems::Base::TAX_SCOPE_SEPARATOR}#{country.id}\"\n      end\n\n      # Create tax rate based on type\n      def self.tax_rate_for_type(type, name)\n        type.constantize.new(name: name)\n      end\n\n      # Seed the tax rate associations\n      def self.seed_tax_rate_associations(country=nil, options={})\n        self.print_seeding 'Tax Rate Associations'\n\n        seed_data = get_data(:tax_rate_associations, country, :id, :combined_tax_rate, :sub_tax_rate)\n\n        seed_data.each_with_index do |data, index|\n          ctr = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:combined_tax_rate])\n          str_id = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:sub_tax_rate]).id\n\n          tra = ::CoreAccounting::Taxes::Models::TaxRateAssociation.new\n          tra.combined_tax_rate_id = ctr.id\n          tra.sub_tax_rate_id = str_id\n          tra.save!\n          ctr.save!\n        end\n\n        ::CoreAccounting::Taxes::Models::TaxRateAssociation.cache_static_data if options[:cache_static_data]\n      end\n\n      # Seed the COA Account tax rate associations\n      def self.seed_coa_account_tax_rate_associations(country=nil, options={})\n        self.print_seeding 'Coa Account Tax Rate Associations'\n\n        seed_data = get_data(:coa_account_tax_rate_associations, country,\n                                                                :tax_rate,\n                                                                :sales_control_name,\n                                                                :purchase_control_name)\n\n        seed_data.each_with_index do |data, index|\n          tra = ::CoreAccounting::Taxes::Models::CoaAccountTaxRateAssociation.new\n          tra.tax_rate_id = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate]).id\n          tra.sales_control_name = data[:sales_control_name]\n          tra.purchase_control_name = data[:purchase_control_name]\n\n          tra.save!\n        end\n\n        ::CoreAccounting::Taxes::Models::CoaAccountTaxRateAssociation.cache_static_data if options[:cache_static_data]\n      end\n\n      # Seed the annotation_element_tax_rate_associations table.\n      def self.seed_annotation_element_tax_rate_associations(country=nil, options={})\n        self.print_seeding 'Annotation Element Tax Rate Associations'\n\n        seed_data = get_data(:annotation_element_tax_rate_associations, country,\n                             :annotation_report, :name, :box_name, :tax_rate)\n\n        seed_data.each_with_index do |data, index|\n          annotation_report = get_type(::CoreAccounting::Annotations::Models::AnnotationReport,\n                                                          data[:annotation_report],\n                                                          :name)\n\n          annotation_element_tax_rate_association =\n              ::CoreAccounting::Annotations::Models::AnnotationElementTaxRateAssociation.new\n          annotation_element_tax_rate_association.annotation_element =\n              annotation_report.annotation_elements.where(name: data[:box_name])\n                .first\n          annotation_element_tax_rate_association.tax_rate =\n              get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate])\n          annotation_element_tax_rate_association.save!\n        end\n\n        ::CoreAccounting::Annotations::Models::AnnotationElementTaxRateAssociation\n              .cache_static_data if options[:cache_static_data]\n      end\n\n      # Seed the tax rate percentages\n      def self.seed_tax_rate_percentages(country=nil, options={})\n        self.print_seeding 'Tax Rate Percentages'\n\n        seed_data = get_data(:tax_rate_percentages, country, :tax_rate, :percentage, :start_date, :end_date)\n\n        seed_data.each do |data|\n          create_tax_rate_percentage!(data)\n        end\n\n        ::CoreAccounting::Taxes::Models::TaxRatePercentage.cache_static_data if options[:cache_static_data]\n      end\n\n      # Seed tax return types\n      def self.seed_tax_return_statuses(country=nil, options={})\n        self.print_seeding 'Tax Return Statuses'\n\n        seed_data = get_data(:tax_return_statuses, country, :id, :name, :scope)\n\n        seed_data.each_with_index do |data, index|\n          status = ::AdvancedUk::TaxReturnStatus.new\n          status.name = data[:name]\n          status.id = data[:id]\n          status.scope = data[:scope]\n          status.save!\n        end\n\n        ::AdvancedUk::TaxReturnStatus.cache_static_data\n      end\n\n      # Seed tax return box types\n      def self.seed_tax_return_box_types(country=nil)\n        self.print_seeding 'Tax Return Box Types'\n\n        seed_data = get_data(:tax_return_box_types, country, :id, :name, :tax_scheme_id, :tax_return_type)\n\n        seed_data.each do |data|\n          box_type = AdvancedUk::TaxReturnBoxType.new\n          box_type.name = data[:name]\n          box_type.id = data[:id]\n          box_type.tax_scheme_id = data[:tax_scheme_id]\n          box_type.tax_return_type = get_type(AdvancedUk::TaxReturnType, data[:tax_return_type])\n          box_type.save!\n        end\n      end\n\n      # Seed the PEARLS types\n      def self.seed_pearls_types(country=nil, options={})\n        self.print_seeding 'Pearls Types'\n\n        seed_data = [\n          { name: 'PEA', identifier: 'PEA', decrease: 'cr', increase: 'dr' },\n          { name: 'RLS', identifier: 'RLS', decrease: 'dr', increase: 'cr' }\n        ]\n\n        seed_data.each do |data|\n          type = FujiCoreAccounting::PearlsType.new\n          type.name = data[:name]\n          type.increase = data[:increase]\n          type.decrease = data[:decrease]\n          type.identifier = data[:identifier]\n          type.save!\n        end\n        FujiCoreAccounting::PearlsType.cache_static_data if options[:cache_static_data]\n      end\n\n      # Seed the COA group types\n      def self.seed_coa_group_types(country=nil, options={})\n        self.print_seeding 'Coa Group Types'\n\n        seed_data = get_data(:coa_group_types, country, :id, :name, :pearls_type)\n\n        seed_data.each do |data|\n          coa_group_type = FujiCoreAccounting::CoaGroupType.new\n          coa_group_type.id = data[:id]\n          coa_group_type.name = data[:name]\n          coa_group_type.identifier = data[:identifier]\n          coa_group_type.pearls_type_id = get_type(FujiCoreAccounting::PearlsType, data[:pearls_type]).id\n          coa_group_type.save!\n        end\n\n        FujiCoreAccounting::CoaGroupType.cache_static_data if options[:cache_static_data]\n      end\n\n      # Seed the ledger account types\n      def self.seed_ledger_account_types(country=nil, options={})\n        self.print_seeding 'Ledger Account Types'\n\n        seed_data = get_data(:ledger_account_types, country, :id, :name, :scopes, :coa_group_type)\n\n        seed_data.each_with_index do |data, index|\n          create_ledger_account_types!(data)\n        end\n\n        FujiCoreAccounting::LedgerAccountType.cache_static_data if options[:cache_static_data]\n      end\n\n      # Seed the COA accounts\n      def self.seed_coa_accounts(country=nil, options={})\n        self.print_seeding 'Coa Accounts'\n        @ledger_account_types_id = {}\n        @countries_id = {}\n        @tax_rates_id = {}\n        @coa_templates_id = {}\n        seed_data = get_data(:coa_accounts, country, :id, :nominal_code, :name, :display_name, :control_name,\n            :ledger_account_type, :ui_visible, :tax_rate, :scopes, :country, :coa_template_name, :tax_changeable)\n\n        seed_data.each { |data| seed_coa_account_from(data) }\n\n        FujiCoreAccounting::CoaAccount.cache_static_data if options[:cache_static_data]\n        set_tax_rate_on_structures\n      end\n\n      # Seed the COA templates\n      def self.seed_coa_templates(country=nil, options={})\n        self.print_seeding 'Coa Templates'\n\n        seed_data = get_data(:coa_templates, country, :name, :id, :country, :locale)\n\n        seed_data.each do |data|\n          coa_template = FujiCoreAccounting::CoaTemplate.create!(name: data[:name], id: data[:id])\n          country = get_type(::Country, data[:country])\n          coa_template.country = country\n          coa_template.locale = coa_template_locale(data[:locale], country.locale)\n          coa_template.save!\n        end\n\n        Config.config.coa_template_model.cache_static_data if options[:cache_static_data]\n      end\n\n      private\n\n      # Seed the COA structures\n      def self.seed_coa_structures(coa_account, coa_template_id)\n        structure = FujiCoreAccounting::CoaStructure.new(:name => coa_account.name,\n                                                         :display_name => coa_account.display_name,\n                                                         :ui_visible => coa_account.ui_visible,\n                                                         :nominal_code => coa_account.nominal_code,\n                                                         :coa_account => coa_account,\n                                                         :coa_template_id => coa_template_id,\n                                                         :ledger_account_type_id => coa_account.ledger_account_type_id,\n                                                         :tax_rate_id => coa_account.tax_rate_id,\n                                                         :scopes => coa_account.scopes,\n                                                         :is_purchase_for_resale => coa_account.is_purchase_for_resale\n                                                        )\n        structure.id = coa_account.id\n        structure.save!\n      end\n\n      # Update tax rate id on structures\n      def self.set_tax_rate_on_structures\n        FujiCoreAccounting::CoaStructure.all.each do |cs|\n          cs.tax_rate_id = FujiCoreAccounting::CoaAccount.find(cs.coa_account_id).tax_rate_id\n        end\n      end\n\n      # Seed the transaction types\n      def self.seed_transaction_types(country=nil)\n        self.print_seeding 'Transaction Types'\n\n        seed_data = get_data(:transaction_types, country, :id, :name, :scopes)\n\n        seed_data.each_with_index do |data, index|\n          type = Config.config.transaction_type_model.new\n          type.id = data[:id]\n          type.name = data[:name]\n          type.scopes = parse_scope(data[:scopes])\n          type.identifier = data[:identifier]\n          type.save!\n        end\n\n        Config.config.transaction_type_model.cache_static_data\n      end\n\n      # Seed the payment types\n      def self.seed_payment_types(country=nil)\n        self.print_seeding 'Payment Types'\n\n        seed_data = get_data(:payment_types, country, :id, :name)\n\n        seed_data.each_with_index do |data, index|\n          payment_type = FujiCoreAccounting::PaymentType.new(name: data[:name], id: data[:id])\n          payment_type.identifier = data[:identifier]\n          payment_type.save!\n        end\n\n        FujiCoreAccounting::PaymentType.cache_static_data\n      end\n\n      # Get ledger account type id from name\n      def self.get_ledger_account_type_id(ledger_account_type)\n        return @ledger_account_types_id[ledger_account_type] if @ledger_account_types_id.include? ledger_account_type\n        ledger_account_type_id = get_type(FujiCoreAccounting::LedgerAccountType, ledger_account_type).id\n        @ledger_account_types_id[ledger_account_type] = ledger_account_type_id\n      end\n\n      # Get country id from name\n      def self.get_country_id(country_name)\n        return @countries_id[country_name] if @countries_id.include? country_name\n        country_id = get_type(::Country, country_name).id\n        @countries_id[country_name] = country_id\n      end\n\n      # Get tax rate id from name\n      def self.get_tax_rate_id(tax_rate)\n        return @tax_rates_id[tax_rate] if @tax_rates_id.include? tax_rate\n        tax_rate_id = get_type(::CoreAccounting::Taxes::Models::TaxRate, tax_rate).id\n        @tax_rates_id[tax_rate] = tax_rate_id\n      end\n\n      # Get coa template id from name\n      def self.get_coa_template_id(coa_template_name)\n        return @coa_templates_id[coa_template_name] if @coa_templates_id.include? coa_template_name\n        coa_template_id = FujiCoreAccounting::CoaTemplate.find_by_name(coa_template_name).id\n        @coa_templates_id[coa_template_name] = coa_template_id\n      end\n\n      # Get coa template id from country name\n      def self.get_coa_template_id_by_country(country_name)\n        return @coa_templates_id[country_name] if @coa_templates_id.include? country_name\n        coa_template_id = FujiCoreAccounting::CoaTemplate.find_by_country_id(get_country_id(country_name)).id\n        @coa_templates_id[country_name] = coa_template_id\n      end\n\n      # Seed the vat relations\n      def self.seed_tax_relations(country=nil)\n        self.print_seeding 'Tax Relations'\n        ActiveRecord::Base.transaction do\n          FujiCoreAccounting::CoaTemplate.all.each do |coa_template|\n            seed_data = get_data(:\"tax_relations_#{coa_template.name.tr(\" \", \"_\")}\", country,\n                                 :nominal_code, :vat_rate, :tax_account, :account_type)\n\n            seed_data.each { |data| create_tax_relation!(coa_template, data) }\n          end\n        end\n      end\n\n      @@coa_account_cache = {}\n\n      def self.seed_coa_account_from(data)\n        coa = FujiCoreAccounting::CoaAccount.new(\n            {nominal_code:           data[:nominal_code],\n             name:                   data[:name],\n             display_name:           data[:display_name],\n             control_name:           data[:control_name].try(:upcase),\n             ledger_account_type_id: get_ledger_account_type_id(data[:ledger_account_type]),\n             ui_visible:             data[:ui_visible],\n             country_id:             get_country_id(data[:country]),\n             coa_template_name:      data[:coa_template_name]},\n            as: :full_access)\n\n        coa.scopes = parse_scope(data[:scopes])\n        coa.tax_rate_id = get_tax_rate_id(data[:tax_rate]) if data[:tax_rate]\n        coa.tax_changeable = (data[:tax_changeable] == '0' ? false : true)\n        coa.id = data[:id]\n        coa.save!\n\n        if data[:coa_template_name]\n          coa_template_id = get_coa_template_id(data[:coa_template_name])\n        else\n          coa_template_id = get_coa_template_id_by_country(data[:country])\n        end\n\n        seed_coa_structures(coa, coa_template_id)\n      end\n\n      def self.coa_account_id_for(coa_template, control_name)\n        return unless control_name\n\n        @@coa_account_cache[coa_template.name] ||= {}\n        coa_account = @@coa_account_cache[coa_template.name][control_name] ||= coa_template.coa_accounts.\n          where(:control_name => control_name.upcase).pluck(\"coa_accounts.id\").first\n\n        if coa_account.blank?\n          STDERR.puts \"\\e[0;31mError for #{coa_template.name}:\\e[0m \" +\n                        \"COA account for #{control_name} does not exist!\"\n        end\n\n        coa_account\n      end\n\n      def self.tax_rates_percentages_cache\n        @@tax_rates_percentages_relation_hash ||= begin\n          ::CoreAccounting::Taxes::Models::TaxRate.all.map do |tax_rate|\n            tax_rate_percentage = ::CoreAccounting::Taxes::Models::TaxRatePercentage.\n              where(:tax_rate_id => tax_rate.id, :tax_rate_type => ::CoreAccounting::Taxes::Models::TaxRate.name).first\n\n            {tax_rate.name.downcase => tax_rate_percentage.id }\n          end.reduce(&:merge)\n        end\n      end\n\n      def self.create_tax_relation!(coa_template, data)\n        coa_account = coa_template.coa_accounts.where(:nominal_code => data[:nominal_code]).first\n        tax_account_id = coa_account_id_for(coa_template, data[:tax_account].try(:upcase))\n\n        coa_account.tax_relations.new.tap do |tax_relation|\n          tax_relation.tax_rate_percentage_id = tax_rates_percentages_cache[data[:vat_rate]]\n          tax_relation.tax_account_id = tax_account_id\n          tax_relation.account_type = data[:account_type].upcase\n          tax_relation.save!\n        end\n      end\n\n      # Creates a tax rate from seed data\n      def self.create_tax_rate!(data)\n        type = data[:type]\n        name = data[:name]\n        country = get_type(::Country, data[:country])\n\n        tr = tax_rate_for_type(type, name)\n        tr.id = data[:id]\n        tr.ec_sales_description_name = data[:ec_sales_description_name]\n        tr.scope_id = scope_id(country)\n        tr.taxable = data[:taxable]\n        tr.combined = data[:combined]\n        tr.is_system = data[:is_system]\n        tr.save!\n      end\n\n      # Creates a tax rate percentage from seed data\n      def self.create_tax_rate_percentage!(data)\n        trp = ::CoreAccounting::Taxes::Models::TaxRatePercentage.new\n        tr = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate])\n        trp.tax_rate_id = tr.id\n        trp.tax_rate = tr\n        trp.percentage = BigDecimal.new(data[:percentage])\n        trp.start_date = parse_date(data[:start_date])\n        trp.end_date = parse_date(data[:end_date])\n\n        trp.save!\n      end\n\n      # Creates ledger account types from seed data\n      def self.create_ledger_account_types!(data)\n        la_type = FujiCoreAccounting::LedgerAccountType.new\n        la_type.id = data[:id]\n        la_type.name = data[:name]\n        la_type.identifier = data[:identifier]\n        la_type.coa_group_type_id = get_type(FujiCoreAccounting::CoaGroupType, data[:coa_group_type]).id\n        la_type.scopes = parse_scope(data[:scopes])\n        la_type.save!\n      end\n\n      def self.coa_template_locale(data_locale, country_locale)\n        data_locale ? data_locale : country_locale\n      end\n\n      # Creates a tax type from seed data\n      def self.create_tax_type!(data)\n        name = data[:name]\n        country = get_type(::Country, data[:country])\n        is_federal = data[:is_federal]\n        tax_type = ::CoreAccounting::Taxes::Models::TaxType.new\n        tax_type.name = name\n        tax_type.country = country\n        tax_type.is_federal = is_federal\n        tax_type.annotation_report =\n          get_type(::CoreAccounting::Annotations::Models::AnnotationReport, data[:annotation_report])\n        tax_type.save!\n      end\n\n      # Creates a states tax type from seed data\n      def self.create_states_tax_type!(data)\n        state_id = get_type(AdvancedUk::State, data[:state_code], :state_code).id\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n        states_tax_type = ::CoreAccounting::Taxes::Models::StatesTaxType.new\n        states_tax_type.state_id = state_id\n        states_tax_type.tax_type_id = tax_type_id\n        states_tax_type.save!\n      end\n\n      # Seed the tax types tax submission frequency types (tax_types_tax_sub_freq_types) table\n      def self.seed_tax_types_tax_sub_freq_types(country=nil, options={})\n        self.print_seeding 'Tax Types Tax Submission Frequency Types'\n\n        seed_data = get_data(:tax_types_tax_sub_freq_types, country, :tax_type, :tax_submission_frequency_type)\n\n        seed_data.each do |data|\n          create_tax_types_tax_sub_freq_types!(data)\n        end\n      end\n\n      def self.create_tax_types_tax_sub_freq_types!(data)\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n        tax_submission_frequency_type_id = get_type(::CoreAccounting::Taxes::Models::TaxSubmissionFrequencyType,\n                                                    data[:tax_submission_frequency_type]).id\n\n        record = ::CoreAccounting::Taxes::Models::TaxTypesTaxSubFreqTypes.new\n        record.tax_type_id = tax_type_id\n        record.tax_submission_frequency_type_id = tax_submission_frequency_type_id\n        record.save!\n      end\n\n      # Creates a tax rate to tax type association\n      def self.create_tax_rate_tax_type!(data)\n        tax_rate_id = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate]).id\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n\n        association = ::CoreAccounting::Taxes::Models::TaxRateTaxType.new\n        association.tax_rate_id = tax_rate_id\n        association.tax_type_id = tax_type_id\n        association.save!\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"321":{"range":{"start":{"row":19,"column":0},"end":{"row":20,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap"},"1476":{"range":{"start":{"row":57,"column":0},"end":{"row":57,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap"},"1648":{"range":{"start":{"row":57,"column":0},"end":{"row":57,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap"},"3855":{"range":{"start":{"row":594,"column":0},"end":{"row":627,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap"},"5441":{"range":{"start":{"row":7,"column":0},"end":{"row":7,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"5941":{"range":{"start":{"row":10,"column":8},"end":{"row":10,"column":58}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"5942":{"range":{"start":{"row":10,"column":26},"end":{"row":10,"column":27}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"5943":{"range":{"start":{"row":10,"column":26},"end":{"row":10,"column":28}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6452":{"range":{"start":{"row":6,"column":4},"end":{"row":6,"column":31}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6453":{"range":{"start":{"row":9,"column":6},"end":{"row":9,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6454":{"range":{"start":{"row":9,"column":6},"end":{"row":9,"column":18}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6455":{"range":{"start":{"row":38,"column":37},"end":{"row":38,"column":38}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6456":{"range":{"start":{"row":38,"column":43},"end":{"row":38,"column":50}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6457":{"range":{"start":{"row":38,"column":50},"end":{"row":38,"column":51}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6458":{"range":{"start":{"row":39,"column":8},"end":{"row":39,"column":38}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6459":{"range":{"start":{"row":43,"column":44},"end":{"row":43,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6460":{"range":{"start":{"row":57,"column":0},"end":{"row":57,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"inside"},"6461":{"range":{"start":{"row":57,"column":0},"end":{"row":57,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"inside"},"6462":{"range":{"start":{"row":57,"column":0},"end":{"row":57,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"inside"},"6463":{"range":{"start":{"row":57,"column":0},"end":{"row":57,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"inside"},"6464":{"range":{"start":{"row":57,"column":0},"end":{"row":57,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"inside"},"6465":{"range":{"start":{"row":60,"column":44},"end":{"row":60,"column":45}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6466":{"range":{"start":{"row":60,"column":50},"end":{"row":60,"column":57}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6467":{"range":{"start":{"row":60,"column":57},"end":{"row":60,"column":58}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6468":{"range":{"start":{"row":61,"column":8},"end":{"row":61,"column":45}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6469":{"range":{"start":{"row":65,"column":44},"end":{"row":65,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6470":{"range":{"start":{"row":71,"column":44},"end":{"row":71,"column":45}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6471":{"range":{"start":{"row":72,"column":8},"end":{"row":72,"column":45}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6472":{"range":{"start":{"row":86,"column":54},"end":{"row":86,"column":55}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6473":{"range":{"start":{"row":87,"column":8},"end":{"row":87,"column":70}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6474":{"range":{"start":{"row":102,"column":6},"end":{"row":102,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6475":{"range":{"start":{"row":102,"column":39},"end":{"row":102,"column":40}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6476":{"range":{"start":{"row":103,"column":8},"end":{"row":103,"column":40}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6477":{"range":{"start":{"row":107,"column":44},"end":{"row":107,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6478":{"range":{"start":{"row":108,"column":54},"end":{"row":108,"column":62}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6479":{"range":{"start":{"row":108,"column":76},"end":{"row":108,"column":82}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6480":{"range":{"start":{"row":118,"column":58},"end":{"row":118,"column":59}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6481":{"range":{"start":{"row":119,"column":8},"end":{"row":119,"column":59}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6482":{"range":{"start":{"row":123,"column":44},"end":{"row":123,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6483":{"range":{"start":{"row":124,"column":71},"end":{"row":124,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6484":{"range":{"start":{"row":124,"column":93},"end":{"row":124,"column":99}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6485":{"range":{"start":{"row":133,"column":37},"end":{"row":133,"column":38}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6486":{"range":{"start":{"row":133,"column":50},"end":{"row":133,"column":51}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6487":{"range":{"start":{"row":134,"column":8},"end":{"row":134,"column":38}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6488":{"range":{"start":{"row":136,"column":29},"end":{"row":136,"column":30}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6489":{"range":{"start":{"row":139,"column":44},"end":{"row":139,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6490":{"range":{"start":{"row":157,"column":6},"end":{"row":157,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6491":{"range":{"start":{"row":157,"column":6},"end":{"row":157,"column":66}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6492":{"range":{"start":{"row":157,"column":49},"end":{"row":157,"column":50}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6493":{"range":{"start":{"row":157,"column":62},"end":{"row":157,"column":63}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6494":{"range":{"start":{"row":158,"column":8},"end":{"row":158,"column":50}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6495":{"range":{"start":{"row":162,"column":44},"end":{"row":162,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6496":{"range":{"start":{"row":177,"column":6},"end":{"row":177,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6497":{"range":{"start":{"row":177,"column":61},"end":{"row":177,"column":62}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6498":{"range":{"start":{"row":177,"column":74},"end":{"row":177,"column":75}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6499":{"range":{"start":{"row":178,"column":8},"end":{"row":178,"column":62}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6500":{"range":{"start":{"row":181,"column":64},"end":{"row":181,"column":73}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6501":{"range":{"start":{"row":182,"column":64},"end":{"row":182,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6502":{"range":{"start":{"row":183,"column":64},"end":{"row":183,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6503":{"range":{"start":{"row":185,"column":44},"end":{"row":185,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6504":{"range":{"start":{"row":198,"column":6},"end":{"row":198,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6505":{"range":{"start":{"row":198,"column":6},"end":{"row":198,"column":85}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6506":{"range":{"start":{"row":198,"column":68},"end":{"row":198,"column":69}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6507":{"range":{"start":{"row":198,"column":81},"end":{"row":198,"column":82}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6508":{"range":{"start":{"row":199,"column":8},"end":{"row":199,"column":69}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6509":{"range":{"start":{"row":204,"column":44},"end":{"row":204,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6510":{"range":{"start":{"row":206,"column":58},"end":{"row":206,"column":82}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6511":{"range":{"start":{"row":207,"column":58},"end":{"row":207,"column":63}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6512":{"range":{"start":{"row":210,"column":14},"end":{"row":210,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6513":{"range":{"start":{"row":212,"column":14},"end":{"row":212,"column":80}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6514":{"range":{"start":{"row":212,"column":14},"end":{"row":212,"column":80}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6515":{"range":{"start":{"row":213,"column":16},"end":{"row":213,"column":22}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6516":{"range":{"start":{"row":215,"column":14},"end":{"row":215,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6517":{"range":{"start":{"row":215,"column":14},"end":{"row":215,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6518":{"range":{"start":{"row":220,"column":14},"end":{"row":220,"column":32}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6519":{"range":{"start":{"row":224,"column":48},"end":{"row":224,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6520":{"range":{"start":{"row":224,"column":61},"end":{"row":224,"column":62}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6521":{"range":{"start":{"row":225,"column":8},"end":{"row":225,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6522":{"range":{"start":{"row":237,"column":47},"end":{"row":237,"column":48}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6523":{"range":{"start":{"row":237,"column":53},"end":{"row":237,"column":60}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6524":{"range":{"start":{"row":237,"column":60},"end":{"row":237,"column":61}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6525":{"range":{"start":{"row":238,"column":8},"end":{"row":238,"column":48}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6526":{"range":{"start":{"row":242,"column":44},"end":{"row":242,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6527":{"range":{"start":{"row":254,"column":48},"end":{"row":254,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6528":{"range":{"start":{"row":255,"column":8},"end":{"row":255,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6529":{"range":{"start":{"row":270,"column":6},"end":{"row":270,"column":57}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6530":{"range":{"start":{"row":270,"column":33},"end":{"row":270,"column":40}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6531":{"range":{"start":{"row":270,"column":40},"end":{"row":270,"column":41}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6532":{"range":{"start":{"row":270,"column":53},"end":{"row":270,"column":54}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6533":{"range":{"start":{"row":271,"column":8},"end":{"row":271,"column":41}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6534":{"range":{"start":{"row":290,"column":6},"end":{"row":290,"column":60}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6535":{"range":{"start":{"row":290,"column":43},"end":{"row":290,"column":44}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6536":{"range":{"start":{"row":290,"column":56},"end":{"row":290,"column":57}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6537":{"range":{"start":{"row":291,"column":8},"end":{"row":291,"column":44}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6538":{"range":{"start":{"row":308,"column":48},"end":{"row":308,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6539":{"range":{"start":{"row":308,"column":61},"end":{"row":308,"column":62}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6540":{"range":{"start":{"row":309,"column":8},"end":{"row":309,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6541":{"range":{"start":{"row":313,"column":44},"end":{"row":313,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6542":{"range":{"start":{"row":321,"column":40},"end":{"row":321,"column":41}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6543":{"range":{"start":{"row":321,"column":53},"end":{"row":321,"column":54}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6544":{"range":{"start":{"row":322,"column":8},"end":{"row":322,"column":41}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6545":{"range":{"start":{"row":328,"column":12},"end":{"row":328,"column":32}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6546":{"range":{"start":{"row":337,"column":6},"end":{"row":337,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6547":{"range":{"start":{"row":337,"column":41},"end":{"row":337,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6548":{"range":{"start":{"row":337,"column":54},"end":{"row":337,"column":55}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6549":{"range":{"start":{"row":338,"column":8},"end":{"row":338,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6550":{"range":{"start":{"row":353,"column":6},"end":{"row":353,"column":13}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6551":{"range":{"start":{"row":356,"column":6},"end":{"row":356,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6552":{"range":{"start":{"row":356,"column":6},"end":{"row":356,"column":64}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6553":{"range":{"start":{"row":357,"column":57},"end":{"row":357,"column":65}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6554":{"range":{"start":{"row":358,"column":57},"end":{"row":358,"column":73}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6555":{"range":{"start":{"row":359,"column":57},"end":{"row":359,"column":71}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6556":{"range":{"start":{"row":360,"column":57},"end":{"row":360,"column":73}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6557":{"range":{"start":{"row":361,"column":57},"end":{"row":361,"column":72}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6558":{"range":{"start":{"row":362,"column":57},"end":{"row":362,"column":76}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6559":{"range":{"start":{"row":363,"column":57},"end":{"row":363,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6560":{"range":{"start":{"row":364,"column":57},"end":{"row":364,"column":72}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6561":{"range":{"start":{"row":365,"column":57},"end":{"row":365,"column":67}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6562":{"range":{"start":{"row":366,"column":57},"end":{"row":366,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6563":{"range":{"start":{"row":373,"column":6},"end":{"row":373,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6564":{"range":{"start":{"row":380,"column":6},"end":{"row":380,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6565":{"range":{"start":{"row":380,"column":6},"end":{"row":380,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6566":{"range":{"start":{"row":380,"column":6},"end":{"row":380,"column":50}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6567":{"range":{"start":{"row":380,"column":45},"end":{"row":380,"column":46}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6568":{"range":{"start":{"row":381,"column":8},"end":{"row":381,"column":46}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6569":{"range":{"start":{"row":385,"column":44},"end":{"row":385,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6570":{"range":{"start":{"row":398,"column":6},"end":{"row":398,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6571":{"range":{"start":{"row":398,"column":41},"end":{"row":398,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6572":{"range":{"start":{"row":399,"column":8},"end":{"row":399,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6573":{"range":{"start":{"row":403,"column":44},"end":{"row":403,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6574":{"range":{"start":{"row":413,"column":6},"end":{"row":413,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6575":{"range":{"start":{"row":420,"column":6},"end":{"row":420,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6576":{"range":{"start":{"row":427,"column":6},"end":{"row":427,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6577":{"range":{"start":{"row":434,"column":6},"end":{"row":434,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6578":{"range":{"start":{"row":441,"column":6},"end":{"row":441,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6579":{"range":{"start":{"row":448,"column":6},"end":{"row":448,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6580":{"range":{"start":{"row":448,"column":41},"end":{"row":448,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6581":{"range":{"start":{"row":449,"column":8},"end":{"row":449,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6582":{"range":{"start":{"row":452,"column":72},"end":{"row":452,"column":75}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6583":{"range":{"start":{"row":452,"column":77},"end":{"row":452,"column":80}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6584":{"range":{"start":{"row":460,"column":6},"end":{"row":460,"column":25}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6585":{"range":{"start":{"row":462,"column":6},"end":{"row":462,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6586":{"range":{"start":{"row":462,"column":6},"end":{"row":462,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6587":{"range":{"start":{"row":462,"column":6},"end":{"row":462,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6588":{"range":{"start":{"row":464,"column":12},"end":{"row":464,"column":57}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6589":{"range":{"start":{"row":464,"column":12},"end":{"row":464,"column":13}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6590":{"range":{"start":{"row":471,"column":61},"end":{"row":471,"column":62}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6591":{"range":{"start":{"row":480,"column":8},"end":{"row":480,"column":35}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6592":{"range":{"start":{"row":489,"column":6},"end":{"row":489,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6593":{"range":{"start":{"row":493,"column":104},"end":{"row":493,"column":105}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6594":{"range":{"start":{"row":494,"column":10},"end":{"row":494,"column":15}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6595":{"range":{"start":{"row":494,"column":16},"end":{"row":494,"column":32}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6596":{"range":{"start":{"row":494,"column":60},"end":{"row":494,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6597":{"range":{"start":{"row":497,"column":70},"end":{"row":497,"column":71}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6598":{"range":{"start":{"row":498,"column":24},"end":{"row":498,"column":73}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6599":{"range":{"start":{"row":504,"column":6},"end":{"row":504,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6600":{"range":{"start":{"row":505,"column":8},"end":{"row":505,"column":45}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6601":{"range":{"start":{"row":507,"column":84},"end":{"row":507,"column":85}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6602":{"range":{"start":{"row":508,"column":14},"end":{"row":508,"column":19}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6603":{"range":{"start":{"row":508,"column":20},"end":{"row":508,"column":35}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6604":{"range":{"start":{"row":508,"column":49},"end":{"row":508,"column":66}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6605":{"range":{"start":{"row":510,"column":12},"end":{"row":510,"column":13}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6606":{"range":{"start":{"row":515,"column":6},"end":{"row":515,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6607":{"range":{"start":{"row":515,"column":6},"end":{"row":515,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6608":{"range":{"start":{"row":516,"column":54},"end":{"row":516,"column":70}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6609":{"range":{"start":{"row":528,"column":6},"end":{"row":528,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6610":{"range":{"start":{"row":528,"column":6},"end":{"row":528,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6611":{"range":{"start":{"row":528,"column":6},"end":{"row":528,"column":37}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6612":{"range":{"start":{"row":544,"column":6},"end":{"row":544,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6613":{"range":{"start":{"row":557,"column":6},"end":{"row":557,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6614":{"range":{"start":{"row":567,"column":6},"end":{"row":567,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6615":{"range":{"start":{"row":572,"column":6},"end":{"row":572,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6616":{"range":{"start":{"row":586,"column":6},"end":{"row":586,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6617":{"range":{"start":{"row":596,"column":6},"end":{"row":596,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6618":{"range":{"start":{"row":596,"column":56},"end":{"row":596,"column":57}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6619":{"range":{"start":{"row":596,"column":62},"end":{"row":596,"column":69}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6620":{"range":{"start":{"row":596,"column":69},"end":{"row":596,"column":70}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6621":{"range":{"start":{"row":597,"column":8},"end":{"row":597,"column":69}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6622":{"range":{"start":{"row":606,"column":6},"end":{"row":606,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6623":{"range":{"start":{"row":627,"column":0},"end":{"row":627,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"inside"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":322,"column":40},"end":{"row":322,"column":40}},"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":608,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[18,52],[18,52]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[18,52],[18,52]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[18,52],[18,52]],"newRange":[[18,52],[19,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[19,0],[19,0]],"newRange":[[19,0],[19,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[19,8],[19,8]],"newRange":[[19,8],[19,9]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[19,9],[19,9]],"newRange":[[19,9],[19,10]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[19,10],[19,10]],"newRange":[[19,10],[19,11]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[19,11],[19,11]],"newRange":[[19,11],[19,12]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[19,12],[19,12]],"newRange":[[19,12],[19,13]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[19,13],[19,13]],"newRange":[[19,13],[19,14]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[19,14],[19,14]],"newRange":[[19,14],[19,15]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[19,15],[19,15]],"newRange":[[19,15],[19,16]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[19,16],[19,16]],"newRange":[[19,16],[19,17]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[19,17],[19,17]],"newRange":[[19,17],[19,18]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[19,18],[19,18]],"newRange":[[19,18],[19,19]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[19,19],[19,19]],"newRange":[[19,19],[19,20]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[19,20],[19,20]],"newRange":[[19,20],[19,21]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[19,21],[19,21]],"newRange":[[19,21],[19,22]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[19,22],[19,22]],"newRange":[[19,22],[19,23]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[19,23],[19,23]],"newRange":[[19,23],[19,24]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[19,24],[19,24]],"newRange":[[19,24],[19,25]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[19,25],[19,25]],"newRange":[[19,25],[19,26]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[19,26],[19,26]],"newRange":[[19,26],[19,27]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[19,27],[19,27]],"newRange":[[19,27],[19,28]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[19,28],[19,28]],"newRange":[[19,28],[19,29]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[19,29],[19,29]],"newRange":[[19,29],[19,30]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[19,30],[19,30]],"newRange":[[19,30],[19,31]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[19,31],[19,31]],"newRange":[[19,31],[19,32]],"oldText":"","newText":"s"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[19,32],[19,32]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":29,"snapshot":{"2":{"1":{"range":[[19,32],[19,32]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[19,32],[19,32]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,32],[19,32]],"newRange":[[19,32],[19,34]],"oldText":"","newText":"()"}},{"type":"change","content":{"oldRange":[[19,33],[19,33]],"newRange":[[19,33],[19,34]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[19,34],[19,34]],"newRange":[[19,34],[19,35]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[19,35],[19,35]],"newRange":[[19,35],[19,36]],"oldText":"","newText":"l"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[19,36],[19,36]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[47,8],[47,8]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,0],[20,0]],"newRange":[[19,0],[19,0]],"oldText":"        seed_tax_rates_tax_types(nil)\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[46,8],[46,8]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[47,0],[47,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[10,0],[10,0]],"newRange":[[10,0],[11,0]],"oldText":"","newText":"        self.print_seeding  'Core Accounting', title: true\n"}},{"type":"change","content":{"oldRange":[[11,0],[12,0]],"newRange":[[11,0],[11,0]],"oldText":"        puts '#Seeding Core Accounting....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[33,0],[33,0]],"newRange":[[33,0],[34,0]],"oldText":"","newText":"        seed_tax_types_tax_sub_freq_types(nil, cache_static_data: true)\n"}},{"type":"change","content":{"oldRange":[[38,0],[38,0]],"newRange":[[38,0],[39,0]],"oldText":"","newText":"        self.print_seeding 'Tax Types'\n"}},{"type":"change","content":{"oldRange":[[39,0],[40,0]],"newRange":[[39,0],[39,0]],"oldText":"        puts '##Seeding Tax Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[51,0],[51,0]],"newRange":[[51,0],[52,0]],"oldText":"","newText":"        self.print_seeding 'States Tax Types'\n"}},{"type":"change","content":{"oldRange":[[52,0],[53,0]],"newRange":[[52,0],[52,0]],"oldText":"        puts '##Seeding States Tax Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[64,0],[64,0]],"newRange":[[64,0],[65,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Types'\n"}},{"type":"change","content":{"oldRange":[[65,0],[66,0]],"newRange":[[65,0],[65,0]],"oldText":"        puts '##Seeding Tax Return Types.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[79,0],[79,0]],"newRange":[[79,0],[80,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Types - Tax Types associations'\n"}},{"type":"change","content":{"oldRange":[[80,0],[81,0]],"newRange":[[80,0],[80,0]],"oldText":"        puts '##Seeding Tax Return Types - Tax Types associations.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[95,0],[95,0]],"newRange":[[95,0],[96,0]],"oldText":"","newText":"        self.print_seeding 'Tax Schemes'\n"}},{"type":"change","content":{"oldRange":[[96,0],[97,0]],"newRange":[[96,0],[96,0]],"oldText":"        puts '##Seeding Tax Schemes.......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[111,0],[111,0]],"newRange":[[111,0],[112,0]],"oldText":"","newText":"        self.print_seeding 'Tax Submission Frequency Types'\n"}},{"type":"change","content":{"oldRange":[[112,0],[113,0]],"newRange":[[112,0],[112,0]],"oldText":"        puts '##Seeding Tax Submission Frequency Types....'\n","newText":""}},{"type":"change","content":{"oldRange":[[126,0],[126,0]],"newRange":[[126,0],[127,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rates'\n"}},{"type":"change","content":{"oldRange":[[127,0],[128,0]],"newRange":[[127,0],[127,0]],"oldText":"        puts '##Seeding Tax Rates.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[150,0],[150,0]],"newRange":[[150,0],[151,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[151,0],[152,0]],"newRange":[[151,0],[151,0]],"oldText":"        puts '##Seeding Tax Rate Associations.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[170,0],[170,0]],"newRange":[[170,0],[171,0]],"oldText":"","newText":"        self.print_seeding 'Coa Account Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[171,0],[172,0]],"newRange":[[171,0],[171,0]],"oldText":"        puts '##Seeding Coa Account Tax Rate Associations.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[191,0],[191,0]],"newRange":[[191,0],[192,0]],"oldText":"","newText":"        self.print_seeding 'Annotation Element Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[192,0],[193,0]],"newRange":[[192,0],[192,0]],"oldText":"        puts '##Seeding Annotation Element Tax Rate Associations.........'\n","newText":""}},{"type":"change","content":{"oldRange":[[217,0],[217,0]],"newRange":[[217,0],[218,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rate Percentages'\n"}},{"type":"change","content":{"oldRange":[[218,0],[219,0]],"newRange":[[218,0],[218,0]],"oldText":"        puts '##Seeding Tax Rate Percentages..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[230,0],[230,0]],"newRange":[[230,0],[231,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Statuses'\n"}},{"type":"change","content":{"oldRange":[[231,0],[232,0]],"newRange":[[231,0],[231,0]],"oldText":"        puts '##Seeding Tax Return Statuses..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[247,0],[247,0]],"newRange":[[247,0],[248,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Box Types'\n"}},{"type":"change","content":{"oldRange":[[248,0],[249,0]],"newRange":[[248,0],[248,0]],"oldText":"        puts '##Seeding Tax Return Box Types.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[263,0],[263,0]],"newRange":[[263,0],[264,0]],"oldText":"","newText":"        self.print_seeding 'Pearls Types'\n"}},{"type":"change","content":{"oldRange":[[264,0],[265,0]],"newRange":[[264,0],[264,0]],"oldText":"        puts '##Seeding Pearls Types......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[283,0],[283,0]],"newRange":[[283,0],[284,0]],"oldText":"","newText":"        self.print_seeding 'Coa Group Types'\n"}},{"type":"change","content":{"oldRange":[[284,0],[285,0]],"newRange":[[284,0],[284,0]],"oldText":"        puts '##Seeding Coa Group Types...................'\n","newText":""}},{"type":"change","content":{"oldRange":[[301,0],[301,0]],"newRange":[[301,0],[302,0]],"oldText":"","newText":"        self.print_seeding 'Ledger Account Types'\n"}},{"type":"change","content":{"oldRange":[[302,0],[303,0]],"newRange":[[302,0],[302,0]],"oldText":"        puts '##Seeding Ledger Account Types..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[314,0],[314,0]],"newRange":[[314,0],[315,0]],"oldText":"","newText":"        self.print_seeding 'Coa Accounts'\n"}},{"type":"change","content":{"oldRange":[[315,0],[316,0]],"newRange":[[315,0],[315,0]],"oldText":"        puts '##Seeding Coa Accounts......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[330,0],[330,0]],"newRange":[[330,0],[331,0]],"oldText":"","newText":"        self.print_seeding 'Coa Templates'\n"}},{"type":"change","content":{"oldRange":[[331,0],[332,0]],"newRange":[[331,0],[331,0]],"oldText":"        puts '##Seeding Coa Templates.....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[373,0],[373,0]],"newRange":[[373,0],[374,0]],"oldText":"","newText":"        self.print_seeding 'Transaction Types'\n"}},{"type":"change","content":{"oldRange":[[374,0],[375,0]],"newRange":[[374,0],[374,0]],"oldText":"        puts '##Seeding Transaction Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[391,0],[391,0]],"newRange":[[391,0],[392,0]],"oldText":"","newText":"        self.print_seeding 'Payment Types'\n"}},{"type":"change","content":{"oldRange":[[392,0],[393,0]],"newRange":[[392,0],[392,0]],"oldText":"        puts '##Seeding Payment Types.....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[441,0],[441,0]],"newRange":[[441,0],[442,0]],"oldText":"","newText":"        self.print_seeding 'Tax Relations'\n"}},{"type":"change","content":{"oldRange":[[442,0],[443,0]],"newRange":[[442,0],[442,0]],"oldText":"        puts '##Seeding Tax Relations.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[586,0],[586,0]],"newRange":[[586,0],[608,0]],"oldText":"","newText":"\n      # Seed the tax types tax submission frequency types (tax_types_tax_sub_freq_types) table\n      def self.seed_tax_types_tax_sub_freq_types(country=nil, options={})\n        self.print_seeding 'Tax Types Tax Submission Frequency Types'\n\n        seed_data = get_data(:tax_types_tax_sub_freq_types, country, :tax_type, :tax_submission_frequency_type)\n\n        seed_data.each do |data|\n          create_tax_types_tax_sub_freq_types!(data)\n        end\n      end\n\n      def self.create_tax_types_tax_sub_freq_types!(data)\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n        tax_submission_frequency_type_id = get_type(::CoreAccounting::Taxes::Models::TaxSubmissionFrequencyType,\n                                                    data[:tax_submission_frequency_type]).id\n\n        record = ::CoreAccounting::Taxes::Models::TaxTypesTaxSubFreqTypes.new\n        record.tax_type_id = tax_type_id\n        record.tax_submission_frequency_type_id = tax_submission_frequency_type_id\n        record.save!\n      end\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[48,0],[48,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[47,0],[47,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[10,0],[10,0]],"newRange":[[10,0],[11,0]],"oldText":"","newText":"        puts '#Seeding Core Accounting....................'\n"}},{"type":"change","content":{"oldRange":[[11,0],[12,0]],"newRange":[[11,0],[11,0]],"oldText":"        self.print_seeding  'Core Accounting', title: true\n","newText":""}},{"type":"change","content":{"oldRange":[[33,0],[34,0]],"newRange":[[33,0],[33,0]],"oldText":"        seed_tax_types_tax_sub_freq_types(nil, cache_static_data: true)\n","newText":""}},{"type":"change","content":{"oldRange":[[37,0],[37,0]],"newRange":[[37,0],[38,0]],"oldText":"","newText":"        puts '##Seeding Tax Types.................'\n"}},{"type":"change","content":{"oldRange":[[38,0],[39,0]],"newRange":[[38,0],[38,0]],"oldText":"        self.print_seeding 'Tax Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[50,0],[50,0]],"newRange":[[50,0],[51,0]],"oldText":"","newText":"        puts '##Seeding States Tax Types.................'\n"}},{"type":"change","content":{"oldRange":[[51,0],[52,0]],"newRange":[[51,0],[51,0]],"oldText":"        self.print_seeding 'States Tax Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[63,0],[63,0]],"newRange":[[63,0],[64,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Types.............'\n"}},{"type":"change","content":{"oldRange":[[64,0],[65,0]],"newRange":[[64,0],[64,0]],"oldText":"        self.print_seeding 'Tax Return Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[78,0],[78,0]],"newRange":[[78,0],[79,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Types - Tax Types associations.............'\n"}},{"type":"change","content":{"oldRange":[[79,0],[80,0]],"newRange":[[79,0],[79,0]],"oldText":"        self.print_seeding 'Tax Return Types - Tax Types associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[94,0],[94,0]],"newRange":[[94,0],[95,0]],"oldText":"","newText":"        puts '##Seeding Tax Schemes.......................'\n"}},{"type":"change","content":{"oldRange":[[95,0],[96,0]],"newRange":[[95,0],[95,0]],"oldText":"        self.print_seeding 'Tax Schemes'\n","newText":""}},{"type":"change","content":{"oldRange":[[110,0],[110,0]],"newRange":[[110,0],[111,0]],"oldText":"","newText":"        puts '##Seeding Tax Submission Frequency Types....'\n"}},{"type":"change","content":{"oldRange":[[111,0],[112,0]],"newRange":[[111,0],[111,0]],"oldText":"        self.print_seeding 'Tax Submission Frequency Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[125,0],[125,0]],"newRange":[[125,0],[126,0]],"oldText":"","newText":"        puts '##Seeding Tax Rates.........................'\n"}},{"type":"change","content":{"oldRange":[[126,0],[127,0]],"newRange":[[126,0],[126,0]],"oldText":"        self.print_seeding 'Tax Rates'\n","newText":""}},{"type":"change","content":{"oldRange":[[149,0],[149,0]],"newRange":[[149,0],[150,0]],"oldText":"","newText":"        puts '##Seeding Tax Rate Associations.........................'\n"}},{"type":"change","content":{"oldRange":[[150,0],[151,0]],"newRange":[[150,0],[150,0]],"oldText":"        self.print_seeding 'Tax Rate Associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[169,0],[169,0]],"newRange":[[169,0],[170,0]],"oldText":"","newText":"        puts '##Seeding Coa Account Tax Rate Associations.........................'\n"}},{"type":"change","content":{"oldRange":[[170,0],[171,0]],"newRange":[[170,0],[170,0]],"oldText":"        self.print_seeding 'Coa Account Tax Rate Associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[190,0],[190,0]],"newRange":[[190,0],[191,0]],"oldText":"","newText":"        puts '##Seeding Annotation Element Tax Rate Associations.........'\n"}},{"type":"change","content":{"oldRange":[[191,0],[192,0]],"newRange":[[191,0],[191,0]],"oldText":"        self.print_seeding 'Annotation Element Tax Rate Associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[216,0],[216,0]],"newRange":[[216,0],[217,0]],"oldText":"","newText":"        puts '##Seeding Tax Rate Percentages..............'\n"}},{"type":"change","content":{"oldRange":[[217,0],[218,0]],"newRange":[[217,0],[217,0]],"oldText":"        self.print_seeding 'Tax Rate Percentages'\n","newText":""}},{"type":"change","content":{"oldRange":[[229,0],[229,0]],"newRange":[[229,0],[230,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Statuses..............'\n"}},{"type":"change","content":{"oldRange":[[230,0],[231,0]],"newRange":[[230,0],[230,0]],"oldText":"        self.print_seeding 'Tax Return Statuses'\n","newText":""}},{"type":"change","content":{"oldRange":[[246,0],[246,0]],"newRange":[[246,0],[247,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Box Types.............'\n"}},{"type":"change","content":{"oldRange":[[247,0],[248,0]],"newRange":[[247,0],[247,0]],"oldText":"        self.print_seeding 'Tax Return Box Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[262,0],[262,0]],"newRange":[[262,0],[263,0]],"oldText":"","newText":"        puts '##Seeding Pearls Types......................'\n"}},{"type":"change","content":{"oldRange":[[263,0],[264,0]],"newRange":[[263,0],[263,0]],"oldText":"        self.print_seeding 'Pearls Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[282,0],[282,0]],"newRange":[[282,0],[283,0]],"oldText":"","newText":"        puts '##Seeding Coa Group Types...................'\n"}},{"type":"change","content":{"oldRange":[[283,0],[284,0]],"newRange":[[283,0],[283,0]],"oldText":"        self.print_seeding 'Coa Group Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[300,0],[300,0]],"newRange":[[300,0],[301,0]],"oldText":"","newText":"        puts '##Seeding Ledger Account Types..............'\n"}},{"type":"change","content":{"oldRange":[[301,0],[302,0]],"newRange":[[301,0],[301,0]],"oldText":"        self.print_seeding 'Ledger Account Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[313,0],[313,0]],"newRange":[[313,0],[314,0]],"oldText":"","newText":"        puts '##Seeding Coa Accounts......................'\n"}},{"type":"change","content":{"oldRange":[[314,0],[315,0]],"newRange":[[314,0],[314,0]],"oldText":"        self.print_seeding 'Coa Accounts'\n","newText":""}},{"type":"change","content":{"oldRange":[[329,0],[329,0]],"newRange":[[329,0],[330,0]],"oldText":"","newText":"        puts '##Seeding Coa Templates.....................'\n"}},{"type":"change","content":{"oldRange":[[330,0],[331,0]],"newRange":[[330,0],[330,0]],"oldText":"        self.print_seeding 'Coa Templates'\n","newText":""}},{"type":"change","content":{"oldRange":[[372,0],[372,0]],"newRange":[[372,0],[373,0]],"oldText":"","newText":"        puts '##Seeding Transaction Types.................'\n"}},{"type":"change","content":{"oldRange":[[373,0],[374,0]],"newRange":[[373,0],[373,0]],"oldText":"        self.print_seeding 'Transaction Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[390,0],[390,0]],"newRange":[[390,0],[391,0]],"oldText":"","newText":"        puts '##Seeding Payment Types.....................'\n"}},{"type":"change","content":{"oldRange":[[391,0],[392,0]],"newRange":[[391,0],[391,0]],"oldText":"        self.print_seeding 'Payment Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[440,0],[440,0]],"newRange":[[440,0],[441,0]],"oldText":"","newText":"        puts '##Seeding Tax Relations.................'\n"}},{"type":"change","content":{"oldRange":[[441,0],[442,0]],"newRange":[[441,0],[441,0]],"oldText":"        self.print_seeding 'Tax Relations'\n","newText":""}},{"type":"change","content":{"oldRange":[[585,0],[607,0]],"newRange":[[585,0],[585,0]],"oldText":"\n      # Seed the tax types tax submission frequency types (tax_types_tax_sub_freq_types) table\n      def self.seed_tax_types_tax_sub_freq_types(country=nil, options={})\n        self.print_seeding 'Tax Types Tax Submission Frequency Types'\n\n        seed_data = get_data(:tax_types_tax_sub_freq_types, country, :tax_type, :tax_submission_frequency_type)\n\n        seed_data.each do |data|\n          create_tax_types_tax_sub_freq_types!(data)\n        end\n      end\n\n      def self.create_tax_types_tax_sub_freq_types!(data)\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n        tax_submission_frequency_type_id = get_type(::CoreAccounting::Taxes::Models::TaxSubmissionFrequencyType,\n                                                    data[:tax_submission_frequency_type]).id\n\n        record = ::CoreAccounting::Taxes::Models::TaxTypesTaxSubFreqTypes.new\n        record.tax_type_id = tax_type_id\n        record.tax_submission_frequency_type_id = tax_submission_frequency_type_id\n        record.save!\n      end\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[46,0],[46,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[47,0],[47,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[10,0],[10,0]],"newRange":[[10,0],[11,0]],"oldText":"","newText":"        self.print_seeding  'Core Accounting', title: true\n"}},{"type":"change","content":{"oldRange":[[11,0],[12,0]],"newRange":[[11,0],[11,0]],"oldText":"        puts '#Seeding Core Accounting....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[33,0],[33,0]],"newRange":[[33,0],[34,0]],"oldText":"","newText":"        seed_tax_types_tax_sub_freq_types(nil, cache_static_data: true)\n"}},{"type":"change","content":{"oldRange":[[38,0],[38,0]],"newRange":[[38,0],[39,0]],"oldText":"","newText":"        self.print_seeding 'Tax Types'\n"}},{"type":"change","content":{"oldRange":[[39,0],[40,0]],"newRange":[[39,0],[39,0]],"oldText":"        puts '##Seeding Tax Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[51,0],[51,0]],"newRange":[[51,0],[52,0]],"oldText":"","newText":"        self.print_seeding 'States Tax Types'\n"}},{"type":"change","content":{"oldRange":[[52,0],[53,0]],"newRange":[[52,0],[52,0]],"oldText":"        puts '##Seeding States Tax Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[64,0],[64,0]],"newRange":[[64,0],[65,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Types'\n"}},{"type":"change","content":{"oldRange":[[65,0],[66,0]],"newRange":[[65,0],[65,0]],"oldText":"        puts '##Seeding Tax Return Types.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[79,0],[79,0]],"newRange":[[79,0],[80,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Types - Tax Types associations'\n"}},{"type":"change","content":{"oldRange":[[80,0],[81,0]],"newRange":[[80,0],[80,0]],"oldText":"        puts '##Seeding Tax Return Types - Tax Types associations.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[95,0],[95,0]],"newRange":[[95,0],[96,0]],"oldText":"","newText":"        self.print_seeding 'Tax Schemes'\n"}},{"type":"change","content":{"oldRange":[[96,0],[97,0]],"newRange":[[96,0],[96,0]],"oldText":"        puts '##Seeding Tax Schemes.......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[111,0],[111,0]],"newRange":[[111,0],[112,0]],"oldText":"","newText":"        self.print_seeding 'Tax Submission Frequency Types'\n"}},{"type":"change","content":{"oldRange":[[112,0],[113,0]],"newRange":[[112,0],[112,0]],"oldText":"        puts '##Seeding Tax Submission Frequency Types....'\n","newText":""}},{"type":"change","content":{"oldRange":[[126,0],[126,0]],"newRange":[[126,0],[127,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rates'\n"}},{"type":"change","content":{"oldRange":[[127,0],[128,0]],"newRange":[[127,0],[127,0]],"oldText":"        puts '##Seeding Tax Rates.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[150,0],[150,0]],"newRange":[[150,0],[151,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[151,0],[152,0]],"newRange":[[151,0],[151,0]],"oldText":"        puts '##Seeding Tax Rate Associations.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[170,0],[170,0]],"newRange":[[170,0],[171,0]],"oldText":"","newText":"        self.print_seeding 'Coa Account Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[171,0],[172,0]],"newRange":[[171,0],[171,0]],"oldText":"        puts '##Seeding Coa Account Tax Rate Associations.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[191,0],[191,0]],"newRange":[[191,0],[192,0]],"oldText":"","newText":"        self.print_seeding 'Annotation Element Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[192,0],[193,0]],"newRange":[[192,0],[192,0]],"oldText":"        puts '##Seeding Annotation Element Tax Rate Associations.........'\n","newText":""}},{"type":"change","content":{"oldRange":[[217,0],[217,0]],"newRange":[[217,0],[218,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rate Percentages'\n"}},{"type":"change","content":{"oldRange":[[218,0],[219,0]],"newRange":[[218,0],[218,0]],"oldText":"        puts '##Seeding Tax Rate Percentages..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[230,0],[230,0]],"newRange":[[230,0],[231,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Statuses'\n"}},{"type":"change","content":{"oldRange":[[231,0],[232,0]],"newRange":[[231,0],[231,0]],"oldText":"        puts '##Seeding Tax Return Statuses..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[247,0],[247,0]],"newRange":[[247,0],[248,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Box Types'\n"}},{"type":"change","content":{"oldRange":[[248,0],[249,0]],"newRange":[[248,0],[248,0]],"oldText":"        puts '##Seeding Tax Return Box Types.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[263,0],[263,0]],"newRange":[[263,0],[264,0]],"oldText":"","newText":"        self.print_seeding 'Pearls Types'\n"}},{"type":"change","content":{"oldRange":[[264,0],[265,0]],"newRange":[[264,0],[264,0]],"oldText":"        puts '##Seeding Pearls Types......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[283,0],[283,0]],"newRange":[[283,0],[284,0]],"oldText":"","newText":"        self.print_seeding 'Coa Group Types'\n"}},{"type":"change","content":{"oldRange":[[284,0],[285,0]],"newRange":[[284,0],[284,0]],"oldText":"        puts '##Seeding Coa Group Types...................'\n","newText":""}},{"type":"change","content":{"oldRange":[[301,0],[301,0]],"newRange":[[301,0],[302,0]],"oldText":"","newText":"        self.print_seeding 'Ledger Account Types'\n"}},{"type":"change","content":{"oldRange":[[302,0],[303,0]],"newRange":[[302,0],[302,0]],"oldText":"        puts '##Seeding Ledger Account Types..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[314,0],[314,0]],"newRange":[[314,0],[315,0]],"oldText":"","newText":"        self.print_seeding 'Coa Accounts'\n"}},{"type":"change","content":{"oldRange":[[315,0],[316,0]],"newRange":[[315,0],[315,0]],"oldText":"        puts '##Seeding Coa Accounts......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[330,0],[330,0]],"newRange":[[330,0],[331,0]],"oldText":"","newText":"        self.print_seeding 'Coa Templates'\n"}},{"type":"change","content":{"oldRange":[[331,0],[332,0]],"newRange":[[331,0],[331,0]],"oldText":"        puts '##Seeding Coa Templates.....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[373,0],[373,0]],"newRange":[[373,0],[374,0]],"oldText":"","newText":"        self.print_seeding 'Transaction Types'\n"}},{"type":"change","content":{"oldRange":[[374,0],[375,0]],"newRange":[[374,0],[374,0]],"oldText":"        puts '##Seeding Transaction Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[391,0],[391,0]],"newRange":[[391,0],[392,0]],"oldText":"","newText":"        self.print_seeding 'Payment Types'\n"}},{"type":"change","content":{"oldRange":[[392,0],[393,0]],"newRange":[[392,0],[392,0]],"oldText":"        puts '##Seeding Payment Types.....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[441,0],[441,0]],"newRange":[[441,0],[442,0]],"oldText":"","newText":"        self.print_seeding 'Tax Relations'\n"}},{"type":"change","content":{"oldRange":[[442,0],[443,0]],"newRange":[[442,0],[442,0]],"oldText":"        puts '##Seeding Tax Relations.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[586,0],[586,0]],"newRange":[[586,0],[608,0]],"oldText":"","newText":"\n      # Seed the tax types tax submission frequency types (tax_types_tax_sub_freq_types) table\n      def self.seed_tax_types_tax_sub_freq_types(country=nil, options={})\n        self.print_seeding 'Tax Types Tax Submission Frequency Types'\n\n        seed_data = get_data(:tax_types_tax_sub_freq_types, country, :tax_type, :tax_submission_frequency_type)\n\n        seed_data.each do |data|\n          create_tax_types_tax_sub_freq_types!(data)\n        end\n      end\n\n      def self.create_tax_types_tax_sub_freq_types!(data)\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n        tax_submission_frequency_type_id = get_type(::CoreAccounting::Taxes::Models::TaxSubmissionFrequencyType,\n                                                    data[:tax_submission_frequency_type]).id\n\n        record = ::CoreAccounting::Taxes::Models::TaxTypesTaxSubFreqTypes.new\n        record.tax_type_id = tax_type_id\n        record.tax_submission_frequency_type_id = tax_submission_frequency_type_id\n        record.save!\n      end\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[48,0],[48,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[47,0],[47,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[10,0],[10,0]],"newRange":[[10,0],[11,0]],"oldText":"","newText":"        puts '#Seeding Core Accounting....................'\n"}},{"type":"change","content":{"oldRange":[[11,0],[12,0]],"newRange":[[11,0],[11,0]],"oldText":"        self.print_seeding  'Core Accounting', title: true\n","newText":""}},{"type":"change","content":{"oldRange":[[33,0],[34,0]],"newRange":[[33,0],[33,0]],"oldText":"        seed_tax_types_tax_sub_freq_types(nil, cache_static_data: true)\n","newText":""}},{"type":"change","content":{"oldRange":[[37,0],[37,0]],"newRange":[[37,0],[38,0]],"oldText":"","newText":"        puts '##Seeding Tax Types.................'\n"}},{"type":"change","content":{"oldRange":[[38,0],[39,0]],"newRange":[[38,0],[38,0]],"oldText":"        self.print_seeding 'Tax Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[50,0],[50,0]],"newRange":[[50,0],[51,0]],"oldText":"","newText":"        puts '##Seeding States Tax Types.................'\n"}},{"type":"change","content":{"oldRange":[[51,0],[52,0]],"newRange":[[51,0],[51,0]],"oldText":"        self.print_seeding 'States Tax Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[63,0],[63,0]],"newRange":[[63,0],[64,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Types.............'\n"}},{"type":"change","content":{"oldRange":[[64,0],[65,0]],"newRange":[[64,0],[64,0]],"oldText":"        self.print_seeding 'Tax Return Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[78,0],[78,0]],"newRange":[[78,0],[79,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Types - Tax Types associations.............'\n"}},{"type":"change","content":{"oldRange":[[79,0],[80,0]],"newRange":[[79,0],[79,0]],"oldText":"        self.print_seeding 'Tax Return Types - Tax Types associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[94,0],[94,0]],"newRange":[[94,0],[95,0]],"oldText":"","newText":"        puts '##Seeding Tax Schemes.......................'\n"}},{"type":"change","content":{"oldRange":[[95,0],[96,0]],"newRange":[[95,0],[95,0]],"oldText":"        self.print_seeding 'Tax Schemes'\n","newText":""}},{"type":"change","content":{"oldRange":[[110,0],[110,0]],"newRange":[[110,0],[111,0]],"oldText":"","newText":"        puts '##Seeding Tax Submission Frequency Types....'\n"}},{"type":"change","content":{"oldRange":[[111,0],[112,0]],"newRange":[[111,0],[111,0]],"oldText":"        self.print_seeding 'Tax Submission Frequency Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[125,0],[125,0]],"newRange":[[125,0],[126,0]],"oldText":"","newText":"        puts '##Seeding Tax Rates.........................'\n"}},{"type":"change","content":{"oldRange":[[126,0],[127,0]],"newRange":[[126,0],[126,0]],"oldText":"        self.print_seeding 'Tax Rates'\n","newText":""}},{"type":"change","content":{"oldRange":[[149,0],[149,0]],"newRange":[[149,0],[150,0]],"oldText":"","newText":"        puts '##Seeding Tax Rate Associations.........................'\n"}},{"type":"change","content":{"oldRange":[[150,0],[151,0]],"newRange":[[150,0],[150,0]],"oldText":"        self.print_seeding 'Tax Rate Associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[169,0],[169,0]],"newRange":[[169,0],[170,0]],"oldText":"","newText":"        puts '##Seeding Coa Account Tax Rate Associations.........................'\n"}},{"type":"change","content":{"oldRange":[[170,0],[171,0]],"newRange":[[170,0],[170,0]],"oldText":"        self.print_seeding 'Coa Account Tax Rate Associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[190,0],[190,0]],"newRange":[[190,0],[191,0]],"oldText":"","newText":"        puts '##Seeding Annotation Element Tax Rate Associations.........'\n"}},{"type":"change","content":{"oldRange":[[191,0],[192,0]],"newRange":[[191,0],[191,0]],"oldText":"        self.print_seeding 'Annotation Element Tax Rate Associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[216,0],[216,0]],"newRange":[[216,0],[217,0]],"oldText":"","newText":"        puts '##Seeding Tax Rate Percentages..............'\n"}},{"type":"change","content":{"oldRange":[[217,0],[218,0]],"newRange":[[217,0],[217,0]],"oldText":"        self.print_seeding 'Tax Rate Percentages'\n","newText":""}},{"type":"change","content":{"oldRange":[[229,0],[229,0]],"newRange":[[229,0],[230,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Statuses..............'\n"}},{"type":"change","content":{"oldRange":[[230,0],[231,0]],"newRange":[[230,0],[230,0]],"oldText":"        self.print_seeding 'Tax Return Statuses'\n","newText":""}},{"type":"change","content":{"oldRange":[[246,0],[246,0]],"newRange":[[246,0],[247,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Box Types.............'\n"}},{"type":"change","content":{"oldRange":[[247,0],[248,0]],"newRange":[[247,0],[247,0]],"oldText":"        self.print_seeding 'Tax Return Box Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[262,0],[262,0]],"newRange":[[262,0],[263,0]],"oldText":"","newText":"        puts '##Seeding Pearls Types......................'\n"}},{"type":"change","content":{"oldRange":[[263,0],[264,0]],"newRange":[[263,0],[263,0]],"oldText":"        self.print_seeding 'Pearls Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[282,0],[282,0]],"newRange":[[282,0],[283,0]],"oldText":"","newText":"        puts '##Seeding Coa Group Types...................'\n"}},{"type":"change","content":{"oldRange":[[283,0],[284,0]],"newRange":[[283,0],[283,0]],"oldText":"        self.print_seeding 'Coa Group Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[300,0],[300,0]],"newRange":[[300,0],[301,0]],"oldText":"","newText":"        puts '##Seeding Ledger Account Types..............'\n"}},{"type":"change","content":{"oldRange":[[301,0],[302,0]],"newRange":[[301,0],[301,0]],"oldText":"        self.print_seeding 'Ledger Account Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[313,0],[313,0]],"newRange":[[313,0],[314,0]],"oldText":"","newText":"        puts '##Seeding Coa Accounts......................'\n"}},{"type":"change","content":{"oldRange":[[314,0],[315,0]],"newRange":[[314,0],[314,0]],"oldText":"        self.print_seeding 'Coa Accounts'\n","newText":""}},{"type":"change","content":{"oldRange":[[329,0],[329,0]],"newRange":[[329,0],[330,0]],"oldText":"","newText":"        puts '##Seeding Coa Templates.....................'\n"}},{"type":"change","content":{"oldRange":[[330,0],[331,0]],"newRange":[[330,0],[330,0]],"oldText":"        self.print_seeding 'Coa Templates'\n","newText":""}},{"type":"change","content":{"oldRange":[[372,0],[372,0]],"newRange":[[372,0],[373,0]],"oldText":"","newText":"        puts '##Seeding Transaction Types.................'\n"}},{"type":"change","content":{"oldRange":[[373,0],[374,0]],"newRange":[[373,0],[373,0]],"oldText":"        self.print_seeding 'Transaction Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[390,0],[390,0]],"newRange":[[390,0],[391,0]],"oldText":"","newText":"        puts '##Seeding Payment Types.....................'\n"}},{"type":"change","content":{"oldRange":[[391,0],[392,0]],"newRange":[[391,0],[391,0]],"oldText":"        self.print_seeding 'Payment Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[440,0],[440,0]],"newRange":[[440,0],[441,0]],"oldText":"","newText":"        puts '##Seeding Tax Relations.................'\n"}},{"type":"change","content":{"oldRange":[[441,0],[442,0]],"newRange":[[441,0],[441,0]],"oldText":"        self.print_seeding 'Tax Relations'\n","newText":""}},{"type":"change","content":{"oldRange":[[585,0],[607,0]],"newRange":[[585,0],[585,0]],"oldText":"\n      # Seed the tax types tax submission frequency types (tax_types_tax_sub_freq_types) table\n      def self.seed_tax_types_tax_sub_freq_types(country=nil, options={})\n        self.print_seeding 'Tax Types Tax Submission Frequency Types'\n\n        seed_data = get_data(:tax_types_tax_sub_freq_types, country, :tax_type, :tax_submission_frequency_type)\n\n        seed_data.each do |data|\n          create_tax_types_tax_sub_freq_types!(data)\n        end\n      end\n\n      def self.create_tax_types_tax_sub_freq_types!(data)\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n        tax_submission_frequency_type_id = get_type(::CoreAccounting::Taxes::Models::TaxSubmissionFrequencyType,\n                                                    data[:tax_submission_frequency_type]).id\n\n        record = ::CoreAccounting::Taxes::Models::TaxTypesTaxSubFreqTypes.new\n        record.tax_type_id = tax_type_id\n        record.tax_submission_frequency_type_id = tax_submission_frequency_type_id\n        record.save!\n      end\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[46,0],[46,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[47,0],[47,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[10,0],[10,0]],"newRange":[[10,0],[11,0]],"oldText":"","newText":"        self.print_seeding  'Core Accounting', title: true\n"}},{"type":"change","content":{"oldRange":[[11,0],[12,0]],"newRange":[[11,0],[11,0]],"oldText":"        puts '#Seeding Core Accounting....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[33,0],[33,0]],"newRange":[[33,0],[34,0]],"oldText":"","newText":"        seed_tax_types_tax_sub_freq_types(nil, cache_static_data: true)\n"}},{"type":"change","content":{"oldRange":[[38,0],[38,0]],"newRange":[[38,0],[39,0]],"oldText":"","newText":"        self.print_seeding 'Tax Types'\n"}},{"type":"change","content":{"oldRange":[[39,0],[40,0]],"newRange":[[39,0],[39,0]],"oldText":"        puts '##Seeding Tax Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[51,0],[51,0]],"newRange":[[51,0],[52,0]],"oldText":"","newText":"        self.print_seeding 'States Tax Types'\n"}},{"type":"change","content":{"oldRange":[[52,0],[53,0]],"newRange":[[52,0],[52,0]],"oldText":"        puts '##Seeding States Tax Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[64,0],[64,0]],"newRange":[[64,0],[65,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Types'\n"}},{"type":"change","content":{"oldRange":[[65,0],[66,0]],"newRange":[[65,0],[65,0]],"oldText":"        puts '##Seeding Tax Return Types.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[79,0],[79,0]],"newRange":[[79,0],[80,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Types - Tax Types associations'\n"}},{"type":"change","content":{"oldRange":[[80,0],[81,0]],"newRange":[[80,0],[80,0]],"oldText":"        puts '##Seeding Tax Return Types - Tax Types associations.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[95,0],[95,0]],"newRange":[[95,0],[96,0]],"oldText":"","newText":"        self.print_seeding 'Tax Schemes'\n"}},{"type":"change","content":{"oldRange":[[96,0],[97,0]],"newRange":[[96,0],[96,0]],"oldText":"        puts '##Seeding Tax Schemes.......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[111,0],[111,0]],"newRange":[[111,0],[112,0]],"oldText":"","newText":"        self.print_seeding 'Tax Submission Frequency Types'\n"}},{"type":"change","content":{"oldRange":[[112,0],[113,0]],"newRange":[[112,0],[112,0]],"oldText":"        puts '##Seeding Tax Submission Frequency Types....'\n","newText":""}},{"type":"change","content":{"oldRange":[[126,0],[126,0]],"newRange":[[126,0],[127,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rates'\n"}},{"type":"change","content":{"oldRange":[[127,0],[128,0]],"newRange":[[127,0],[127,0]],"oldText":"        puts '##Seeding Tax Rates.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[150,0],[150,0]],"newRange":[[150,0],[151,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[151,0],[152,0]],"newRange":[[151,0],[151,0]],"oldText":"        puts '##Seeding Tax Rate Associations.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[170,0],[170,0]],"newRange":[[170,0],[171,0]],"oldText":"","newText":"        self.print_seeding 'Coa Account Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[171,0],[172,0]],"newRange":[[171,0],[171,0]],"oldText":"        puts '##Seeding Coa Account Tax Rate Associations.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[191,0],[191,0]],"newRange":[[191,0],[192,0]],"oldText":"","newText":"        self.print_seeding 'Annotation Element Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[192,0],[193,0]],"newRange":[[192,0],[192,0]],"oldText":"        puts '##Seeding Annotation Element Tax Rate Associations.........'\n","newText":""}},{"type":"change","content":{"oldRange":[[217,0],[217,0]],"newRange":[[217,0],[218,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rate Percentages'\n"}},{"type":"change","content":{"oldRange":[[218,0],[219,0]],"newRange":[[218,0],[218,0]],"oldText":"        puts '##Seeding Tax Rate Percentages..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[230,0],[230,0]],"newRange":[[230,0],[231,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Statuses'\n"}},{"type":"change","content":{"oldRange":[[231,0],[232,0]],"newRange":[[231,0],[231,0]],"oldText":"        puts '##Seeding Tax Return Statuses..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[247,0],[247,0]],"newRange":[[247,0],[248,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Box Types'\n"}},{"type":"change","content":{"oldRange":[[248,0],[249,0]],"newRange":[[248,0],[248,0]],"oldText":"        puts '##Seeding Tax Return Box Types.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[263,0],[263,0]],"newRange":[[263,0],[264,0]],"oldText":"","newText":"        self.print_seeding 'Pearls Types'\n"}},{"type":"change","content":{"oldRange":[[264,0],[265,0]],"newRange":[[264,0],[264,0]],"oldText":"        puts '##Seeding Pearls Types......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[283,0],[283,0]],"newRange":[[283,0],[284,0]],"oldText":"","newText":"        self.print_seeding 'Coa Group Types'\n"}},{"type":"change","content":{"oldRange":[[284,0],[285,0]],"newRange":[[284,0],[284,0]],"oldText":"        puts '##Seeding Coa Group Types...................'\n","newText":""}},{"type":"change","content":{"oldRange":[[301,0],[301,0]],"newRange":[[301,0],[302,0]],"oldText":"","newText":"        self.print_seeding 'Ledger Account Types'\n"}},{"type":"change","content":{"oldRange":[[302,0],[303,0]],"newRange":[[302,0],[302,0]],"oldText":"        puts '##Seeding Ledger Account Types..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[314,0],[314,0]],"newRange":[[314,0],[315,0]],"oldText":"","newText":"        self.print_seeding 'Coa Accounts'\n"}},{"type":"change","content":{"oldRange":[[315,0],[316,0]],"newRange":[[315,0],[315,0]],"oldText":"        puts '##Seeding Coa Accounts......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[330,0],[330,0]],"newRange":[[330,0],[331,0]],"oldText":"","newText":"        self.print_seeding 'Coa Templates'\n"}},{"type":"change","content":{"oldRange":[[331,0],[332,0]],"newRange":[[331,0],[331,0]],"oldText":"        puts '##Seeding Coa Templates.....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[373,0],[373,0]],"newRange":[[373,0],[374,0]],"oldText":"","newText":"        self.print_seeding 'Transaction Types'\n"}},{"type":"change","content":{"oldRange":[[374,0],[375,0]],"newRange":[[374,0],[374,0]],"oldText":"        puts '##Seeding Transaction Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[391,0],[391,0]],"newRange":[[391,0],[392,0]],"oldText":"","newText":"        self.print_seeding 'Payment Types'\n"}},{"type":"change","content":{"oldRange":[[392,0],[393,0]],"newRange":[[392,0],[392,0]],"oldText":"        puts '##Seeding Payment Types.....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[441,0],[441,0]],"newRange":[[441,0],[442,0]],"oldText":"","newText":"        self.print_seeding 'Tax Relations'\n"}},{"type":"change","content":{"oldRange":[[442,0],[443,0]],"newRange":[[442,0],[442,0]],"oldText":"        puts '##Seeding Tax Relations.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[586,0],[586,0]],"newRange":[[586,0],[608,0]],"oldText":"","newText":"\n      # Seed the tax types tax submission frequency types (tax_types_tax_sub_freq_types) table\n      def self.seed_tax_types_tax_sub_freq_types(country=nil, options={})\n        self.print_seeding 'Tax Types Tax Submission Frequency Types'\n\n        seed_data = get_data(:tax_types_tax_sub_freq_types, country, :tax_type, :tax_submission_frequency_type)\n\n        seed_data.each do |data|\n          create_tax_types_tax_sub_freq_types!(data)\n        end\n      end\n\n      def self.create_tax_types_tax_sub_freq_types!(data)\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n        tax_submission_frequency_type_id = get_type(::CoreAccounting::Taxes::Models::TaxSubmissionFrequencyType,\n                                                    data[:tax_submission_frequency_type]).id\n\n        record = ::CoreAccounting::Taxes::Models::TaxTypesTaxSubFreqTypes.new\n        record.tax_type_id = tax_type_id\n        record.tax_submission_frequency_type_id = tax_submission_frequency_type_id\n        record.save!\n      end\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[48,0],[48,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[47,0],[47,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,0],[19,0]],"newRange":[[19,0],[20,0]],"oldText":"","newText":"        seed_tax_rates_tax_types(nil)\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[48,0],[48,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":46,"snapshot":{"2":{"1":{"range":[[48,9],[48,9]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[48,9],[48,9]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[48,9],[48,9]],"newRange":[[48,9],[49,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[49,0],[49,0]],"newRange":[[49,0],[49,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[49,6],[49,6]],"newRange":[[49,6],[50,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[50,0],[50,0]],"newRange":[[50,0],[50,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[49,0],[49,6]],"newRange":[[49,0],[49,0]],"oldText":"      ","newText":""}},{"type":"change","content":{"oldRange":[[50,6],[50,6]],"newRange":[[50,6],[50,7]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[50,7],[50,7]],"newRange":[[50,7],[50,8]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[50,8],[50,8]],"newRange":[[50,8],[50,9]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[50,9],[50,9]],"newRange":[[50,9],[50,10]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,10],[50,10]],"newRange":[[50,10],[50,34]],"oldText":"","newText":"seed_tax_rates_tax_types"}},{"type":"change","content":{"oldRange":[[50,10],[50,10]],"newRange":[[50,10],[50,11]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[50,11],[50,11]],"newRange":[[50,11],[50,12]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[50,12],[50,12]],"newRange":[[50,12],[50,13]],"oldText":"","newText":"l"}},{"type":"change","content":{"oldRange":[[50,13],[50,13]],"newRange":[[50,13],[50,14]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[50,14],[50,14]],"newRange":[[50,14],[50,15]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[50,39],[50,39]],"newRange":[[50,39],[50,41]],"oldText":"","newText":"()"}},{"type":"change","content":{"oldRange":[[50,40],[50,40]],"newRange":[[50,40],[50,41]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[50,41],[50,41]],"newRange":[[50,41],[50,42]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[50,42],[50,42]],"newRange":[[50,42],[50,43]],"oldText":"","newText":"u"}},{"type":"change","content":{"oldRange":[[50,43],[50,43]],"newRange":[[50,43],[50,44]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[50,40],[50,44]],"newRange":[[50,40],[50,47]],"oldText":"coun","newText":"country"}},{"type":"change","content":{"oldRange":[[50,47],[50,47]],"newRange":[[50,47],[50,48]],"oldText":"","newText":"-"}},{"type":"change","content":{"oldRange":[[50,48],[50,48]],"newRange":[[50,48],[50,49]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[50,49],[50,49]],"newRange":[[50,49],[50,50]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[50,50],[50,50]],"newRange":[[50,50],[50,51]],"oldText":"","newText":"l"}},{"type":"change","content":{"oldRange":[[50,50],[50,51]],"newRange":[[50,50],[50,50]],"oldText":"l","newText":""}},{"type":"change","content":{"oldRange":[[50,49],[50,50]],"newRange":[[50,49],[50,49]],"oldText":"i","newText":""}},{"type":"change","content":{"oldRange":[[50,48],[50,49]],"newRange":[[50,48],[50,48]],"oldText":"n","newText":""}},{"type":"change","content":{"oldRange":[[50,47],[50,48]],"newRange":[[50,47],[50,47]],"oldText":"-","newText":""}},{"type":"change","content":{"oldRange":[[50,47],[50,47]],"newRange":[[50,47],[50,48]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[50,48],[50,48]],"newRange":[[50,48],[50,49]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[50,49],[50,49]],"newRange":[[50,49],[50,50]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[50,50],[50,50]],"newRange":[[50,50],[50,51]],"oldText":"","newText":"l"}},{"type":"change","content":{"oldRange":[[50,51],[50,51]],"newRange":[[50,51],[50,52]],"oldText":"","newText":","}},{"type":"change","content":{"oldRange":[[50,52],[50,52]],"newRange":[[50,52],[50,53]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,53],[50,53]],"newRange":[[50,53],[50,54]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[50,54],[50,54]],"newRange":[[50,54],[50,55]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[50,55],[50,55]],"newRange":[[50,55],[50,56]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[50,56],[50,56]],"newRange":[[50,56],[50,57]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[50,53],[50,57]],"newRange":[[50,53],[50,60]],"oldText":"opti","newText":"options"}},{"type":"change","content":{"oldRange":[[50,60],[50,60]],"newRange":[[50,60],[50,61]],"oldText":"","newText":"-"}},{"type":"change","content":{"oldRange":[[50,60],[50,61]],"newRange":[[50,60],[50,60]],"oldText":"-","newText":""}},{"type":"change","content":{"oldRange":[[50,60],[50,60]],"newRange":[[50,60],[50,61]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[50,61],[50,61]],"newRange":[[50,61],[50,63]],"oldText":"","newText":"{}"}},{"type":"change","content":{"oldRange":[[50,64],[50,64]],"newRange":[[50,64],[51,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[51,0],[51,0]],"newRange":[[51,0],[51,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[51,8],[51,8]],"newRange":[[51,8],[51,9]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[51,9],[51,9]],"newRange":[[51,9],[51,10]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[51,10],[51,10]],"newRange":[[51,10],[51,11]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[51,0],[51,8]],"newRange":[[51,0],[51,6]],"oldText":"        ","newText":"      "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,9],[51,9]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":104,"snapshot":{"2":{"1":{"range":[[50,64],[50,64]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[50,64],[50,64]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[50,64],[50,64]],"newRange":[[50,64],[51,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[51,0],[51,0]],"newRange":[[51,0],[51,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[49,0],[49,0]],"newRange":[[49,0],[50,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[50,0],[50,0]],"newRange":[[50,0],[50,0]],"oldText":"","newText":""}},{"type":"change","content":{"oldRange":[[49,0],[49,0]],"newRange":[[49,0],[49,0]],"oldText":"","newText":""}},{"type":"change","content":{"oldRange":[[50,0],[50,0]],"newRange":[[50,0],[50,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[50,6],[50,6]],"newRange":[[50,6],[50,7]],"oldText":"","newText":"#"}},{"type":"change","content":{"oldRange":[[50,7],[50,7]],"newRange":[[50,7],[50,8]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,8],[50,8]],"newRange":[[50,8],[50,9]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[50,8],[50,9]],"newRange":[[50,8],[50,8]],"oldText":"s","newText":""}},{"type":"change","content":{"oldRange":[[50,8],[50,8]],"newRange":[[50,8],[50,9]],"oldText":"","newText":"S"}},{"type":"change","content":{"oldRange":[[50,9],[50,9]],"newRange":[[50,9],[50,10]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[50,10],[50,10]],"newRange":[[50,10],[50,11]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[50,11],[50,11]],"newRange":[[50,11],[50,12]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[50,12],[50,12]],"newRange":[[50,12],[50,13]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,13],[50,13]],"newRange":[[50,13],[50,14]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[50,14],[50,14]],"newRange":[[50,14],[50,15]],"oldText":"","newText":"h"}},{"type":"change","content":{"oldRange":[[50,15],[50,15]],"newRange":[[50,15],[50,16]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[50,16],[50,16]],"newRange":[[50,16],[50,17]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,17],[50,17]],"newRange":[[50,17],[50,18]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[50,18],[50,18]],"newRange":[[50,18],[50,19]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[50,19],[50,19]],"newRange":[[50,19],[50,20]],"oldText":"","newText":"l"}},{"type":"change","content":{"oldRange":[[50,20],[50,20]],"newRange":[[50,20],[50,21]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[50,21],[50,21]],"newRange":[[50,21],[50,22]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[50,22],[50,22]],"newRange":[[50,22],[50,23]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[50,23],[50,23]],"newRange":[[50,23],[50,24]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[50,24],[50,24]],"newRange":[[50,24],[50,25]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[50,25],[50,25]],"newRange":[[50,25],[50,26]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,26],[50,26]],"newRange":[[50,26],[50,27]],"oldText":"","newText":"b"}},{"type":"change","content":{"oldRange":[[50,27],[50,27]],"newRange":[[50,27],[50,28]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[50,28],[50,28]],"newRange":[[50,28],[50,29]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[50,29],[50,29]],"newRange":[[50,29],[50,30]],"oldText":"","newText":"w"}},{"type":"change","content":{"oldRange":[[50,30],[50,30]],"newRange":[[50,30],[50,31]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[50,31],[50,31]],"newRange":[[50,31],[50,32]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[50,32],[50,32]],"newRange":[[50,32],[50,33]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[50,33],[50,33]],"newRange":[[50,33],[50,34]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,34],[50,34]],"newRange":[[50,34],[50,35]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[50,35],[50,35]],"newRange":[[50,35],[50,36]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,36],[50,36]],"newRange":[[50,36],[50,37]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[50,37],[50,37]],"newRange":[[50,37],[50,38]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[50,38],[50,38]],"newRange":[[50,38],[50,39]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[50,39],[50,39]],"newRange":[[50,39],[50,40]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,40],[50,40]],"newRange":[[50,40],[50,41]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[50,41],[50,41]],"newRange":[[50,41],[50,42]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[50,42],[50,42]],"newRange":[[50,42],[50,43]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[50,43],[50,43]],"newRange":[[50,43],[50,44]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[50,44],[50,44]],"newRange":[[50,44],[50,45]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,45],[50,45]],"newRange":[[50,45],[50,46]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[50,46],[50,46]],"newRange":[[50,46],[50,47]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[50,47],[50,47]],"newRange":[[50,47],[50,48]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[50,48],[50,48]],"newRange":[[50,48],[50,49]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,49],[50,49]],"newRange":[[50,49],[50,50]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[50,50],[50,50]],"newRange":[[50,50],[50,51]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,51],[50,51]],"newRange":[[50,51],[50,52]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[50,52],[50,52]],"newRange":[[50,52],[50,53]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[50,53],[50,53]],"newRange":[[50,53],[50,54]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[50,54],[50,54]],"newRange":[[50,54],[50,55]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[50,55],[50,55]],"newRange":[[50,55],[50,56]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[50,56],[50,56]],"newRange":[[50,56],[50,57]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[50,57],[50,57]],"newRange":[[50,57],[50,58]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[50,58],[50,58]],"newRange":[[50,58],[50,59]],"oldText":"","newText":"e"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[50,59],[50,59]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[50,57],[50,57]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[52,0],[52,8]],"newRange":[[52,0],[52,0]],"oldText":"        ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[50,57],[50,57]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":168,"snapshot":{"2":{"1":{"range":[[39,8],[39,8]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[39,8],[39,8]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[52,0],[52,0]],"newRange":[[52,0],[52,30]],"oldText":"","newText":"self.print_seeding 'Tax Types'"}},{"type":"change","content":{"oldRange":[[52,0],[52,0]],"newRange":[[52,0],[52,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[52,28],[52,28]],"newRange":[[52,28],[52,29]],"oldText":"","newText":"T"}},{"type":"change","content":{"oldRange":[[52,29],[52,29]],"newRange":[[52,29],[52,30]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[52,29],[52,30]],"newRange":[[52,29],[52,29]],"oldText":"x","newText":""}},{"type":"change","content":{"oldRange":[[52,29],[52,29]],"newRange":[[52,29],[52,30]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[52,30],[52,30]],"newRange":[[52,30],[52,31]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[52,31],[52,31]],"newRange":[[52,31],[52,32]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[52,32],[52,32]],"newRange":[[52,32],[52,33]],"oldText":"","newText":"R"}},{"type":"change","content":{"oldRange":[[52,33],[52,33]],"newRange":[[52,33],[52,34]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[52,34],[52,34]],"newRange":[[52,34],[52,35]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[52,35],[52,35]],"newRange":[[52,35],[52,36]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[52,36],[52,36]],"newRange":[[52,36],[52,37]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[52,37],[52,37]],"newRange":[[52,37],[52,38]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[52,38],[52,38]],"newRange":[[52,38],[52,39]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[52,39],[52,39]],"newRange":[[52,39],[52,40]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[52,40],[52,40]],"newRange":[[52,40],[52,41]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[52,50],[52,50]],"newRange":[[52,50],[52,51]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[52,51],[52,51]],"newRange":[[52,51],[52,52]],"oldText":"","newText":"A"}},{"type":"change","content":{"oldRange":[[52,52],[52,52]],"newRange":[[52,52],[52,53]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[52,53],[52,53]],"newRange":[[52,53],[52,54]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[52,54],[52,54]],"newRange":[[52,54],[52,55]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[52,55],[52,55]],"newRange":[[52,55],[52,56]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[52,56],[52,56]],"newRange":[[52,56],[52,57]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[52,57],[52,57]],"newRange":[[52,57],[52,58]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[52,58],[52,58]],"newRange":[[52,58],[52,59]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[52,59],[52,59]],"newRange":[[52,59],[52,60]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[52,60],[52,60]],"newRange":[[52,60],[52,61]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[52,61],[52,61]],"newRange":[[52,61],[52,62]],"oldText":"","newText":"n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[52,62],[52,62]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":203,"snapshot":{"2":{"1":{"range":[[41,56],[41,56]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"checkpoint","id":205,"snapshot":{"2":{"1":{"range":[[52,63],[52,63]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[52,63],[52,63]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[52,63],[52,63]],"newRange":[[52,63],[53,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[53,0],[53,0]],"newRange":[[53,0],[53,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[53,8],[53,8]],"newRange":[[53,8],[53,79]],"oldText":"","newText":"seed_data = get_data(:tax_types, country, :id, :name, :tax_return_type)"}},{"type":"change","content":{"oldRange":[[53,30],[53,30]],"newRange":[[53,30],[53,31]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[53,31],[53,31]],"newRange":[[53,31],[53,32]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[53,32],[53,32]],"newRange":[[53,32],[53,33]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[53,33],[53,33]],"newRange":[[53,33],[53,34]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[53,34],[53,34]],"newRange":[[53,34],[53,35]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[53,35],[53,35]],"newRange":[[53,35],[53,36]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[53,36],[53,36]],"newRange":[[53,36],[53,37]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[53,37],[53,37]],"newRange":[[53,37],[53,38]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[53,38],[53,38]],"newRange":[[53,38],[53,39]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[53,39],[53,39]],"newRange":[[53,39],[53,40]],"oldText":"","newText":"_"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,40],[53,40]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":221,"snapshot":{"2":{"1":{"range":[[53,66],[53,70]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,66],[53,70]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,66],[53,70]],"newRange":[[53,66],[53,66]],"oldText":"name","newText":""}},{"type":"change","content":{"oldRange":[[53,66],[53,66]],"newRange":[[53,66],[53,67]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[53,67],[53,67]],"newRange":[[53,67],[53,68]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[53,68],[53,68]],"newRange":[[53,68],[53,69]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[53,69],[53,69]],"newRange":[[53,69],[53,70]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[53,70],[53,70]],"newRange":[[53,70],[53,71]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[53,70],[53,71]],"newRange":[[53,70],[53,70]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[53,69],[53,70]],"newRange":[[53,69],[53,69]],"oldText":"t","newText":""}},{"type":"change","content":{"oldRange":[[53,68],[53,69]],"newRange":[[53,68],[53,68]],"oldText":"a","newText":""}},{"type":"change","content":{"oldRange":[[53,67],[53,68]],"newRange":[[53,67],[53,67]],"oldText":"t","newText":""}},{"type":"change","content":{"oldRange":[[53,66],[53,67]],"newRange":[[53,66],[53,66]],"oldText":"s","newText":""}},{"type":"change","content":{"oldRange":[[53,66],[53,66]],"newRange":[[53,66],[53,67]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[53,67],[53,67]],"newRange":[[53,67],[53,68]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[53,68],[53,68]],"newRange":[[53,68],[53,69]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[53,69],[53,69]],"newRange":[[53,69],[53,70]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[53,70],[53,70]],"newRange":[[53,70],[53,71]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[53,71],[53,71]],"newRange":[[53,71],[53,72]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[53,72],[53,72]],"newRange":[[53,72],[53,73]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[53,73],[53,73]],"newRange":[[53,73],[53,74]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[53,74],[53,74]],"newRange":[[53,74],[53,75]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[53,75],[53,75]],"newRange":[[53,75],[53,76]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[53,76],[53,76]],"newRange":[[53,76],[53,77]],"oldText":"","newText":"d"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,77],[53,77]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":250,"snapshot":{"2":{"1":{"range":[[53,80],[53,95]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,80],[53,95]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,80],[53,95]],"newRange":[[53,80],[53,80]],"oldText":"tax_return_type","newText":""}},{"type":"change","content":{"oldRange":[[53,80],[53,80]],"newRange":[[53,80],[53,81]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[53,81],[53,81]],"newRange":[[53,81],[53,82]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[53,82],[53,82]],"newRange":[[53,82],[53,83]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[53,83],[53,83]],"newRange":[[53,83],[53,84]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[53,84],[53,84]],"newRange":[[53,84],[53,85]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[53,85],[53,85]],"newRange":[[53,85],[53,86]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[53,86],[53,86]],"newRange":[[53,86],[53,87]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[53,87],[53,87]],"newRange":[[53,87],[53,88]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[53,88],[53,88]],"newRange":[[53,88],[53,89]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[53,89],[53,89]],"newRange":[[53,89],[53,90]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[53,90],[53,90]],"newRange":[[53,90],[53,91]],"oldText":"","newText":"d"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,91],[53,91]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,74],[53,75]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,74],[53,75]],"newRange":[[53,74],[53,74]],"oldText":"_","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,74],[53,74]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,74],[53,75]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,74],[53,75]],"newRange":[[53,74],[53,74]],"oldText":"i","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,74],[53,74]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,74],[53,75]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,74],[53,75]],"newRange":[[53,74],[53,74]],"oldText":"d","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,74],[53,74]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,85],[53,86]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,85],[53,86]],"newRange":[[53,85],[53,85]],"oldText":"_","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,85],[53,85]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,85],[53,86]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,85],[53,86]],"newRange":[[53,85],[53,85]],"oldText":"i","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,85],[53,85]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,85],[53,86]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,85],[53,86]],"newRange":[[53,85],[53,85]],"oldText":"d","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,85],[53,85]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[65,0],[67,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":true,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[65,0],[67,0]],"newRange":[[65,0],[65,0]],"oldText":"\n        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[65,0],[65,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[46,0],[48,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":true,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[46,0],[48,0]],"newRange":[[46,0],[46,0]],"oldText":"\n        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[46,0],[46,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":278,"snapshot":{"2":{"1":{"range":[[51,86],[51,86]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[51,86],[51,86]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[51,86],[51,86]],"newRange":[[51,86],[52,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[52,0],[52,0]],"newRange":[[52,0],[52,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[52,0],[52,0]],"newRange":[[52,0],[55,0]],"oldText":"","newText":"        seed_data.each_with_index do |data, index|\n          create_tax_type!(data)\n        end\n"}},{"type":"change","content":{"oldRange":[[52,0],[52,8]],"newRange":[[52,0],[52,8]],"oldText":"        ","newText":"        "}},{"type":"change","content":{"oldRange":[[51,86],[51,86]],"newRange":[[51,86],[52,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[52,0],[52,0]],"newRange":[[52,0],[52,8]],"oldText":"","newText":"        "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,8],[54,8]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,6],[53,6]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[56,0],[56,8]],"newRange":[[56,0],[56,0]],"oldText":"        ","newText":""}},{"type":"change","content":{"oldRange":[[52,0],[52,8]],"newRange":[[52,0],[52,0]],"oldText":"        ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,6],[53,6]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"_","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"w","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"i","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"t","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"h","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"_","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"i","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"d","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"e","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,22],[53,23]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,22],[53,23]],"newRange":[[53,22],[53,22]],"oldText":"x","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,22],[53,22]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":298,"snapshot":{"2":{"1":{"range":[[53,39],[53,39]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[53,39],[53,39]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[53,37],[53,38]],"newRange":[[53,37],[53,37]],"oldText":"x","newText":""}},{"type":"change","content":{"oldRange":[[53,36],[53,37]],"newRange":[[53,36],[53,36]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[53,35],[53,36]],"newRange":[[53,35],[53,35]],"oldText":"d","newText":""}},{"type":"change","content":{"oldRange":[[53,34],[53,35]],"newRange":[[53,34],[53,34]],"oldText":"n","newText":""}},{"type":"change","content":{"oldRange":[[53,33],[53,34]],"newRange":[[53,33],[53,33]],"oldText":"i","newText":""}},{"type":"change","content":{"oldRange":[[53,32],[53,33]],"newRange":[[53,32],[53,32]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[53,31],[53,32]],"newRange":[[53,31],[53,31]],"oldText":",","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[53,31],[53,31]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,17],[54,18]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,17],[54,18]],"newRange":[[54,17],[54,17]],"oldText":"t","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,17],[54,18]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,17],[54,18]],"newRange":[[54,17],[54,17]],"oldText":"a","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,17],[54,18]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,17],[54,18]],"newRange":[[54,17],[54,17]],"oldText":"x","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,17],[54,18]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,17],[54,18]],"newRange":[[54,17],[54,17]],"oldText":"_","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,17],[54,18]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,17],[54,18]],"newRange":[[54,17],[54,17]],"oldText":"t","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,17],[54,18]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,17],[54,18]],"newRange":[[54,17],[54,17]],"oldText":"y","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,17],[54,18]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,17],[54,18]],"newRange":[[54,17],[54,17]],"oldText":"p","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,17],[54,18]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,17],[54,18]],"newRange":[[54,17],[54,17]],"oldText":"e","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,17],[54,18]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,17],[54,18]],"newRange":[[54,17],[54,17]],"oldText":"!","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":323,"snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,17],[54,17]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,17],[54,17]],"newRange":[[54,17],[54,18]],"oldText":"","newText":"!"}},{"type":"change","content":{"oldRange":[[54,17],[54,17]],"newRange":[[54,17],[54,18]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[54,18],[54,18]],"newRange":[[54,18],[54,19]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[54,19],[54,19]],"newRange":[[54,19],[54,20]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[54,20],[54,20]],"newRange":[[54,20],[54,21]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[54,21],[54,21]],"newRange":[[54,21],[54,22]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[54,22],[54,22]],"newRange":[[54,22],[54,23]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[54,23],[54,23]],"newRange":[[54,23],[54,24]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[54,24],[54,24]],"newRange":[[54,24],[54,25]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[54,25],[54,25]],"newRange":[[54,25],[54,26]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[54,26],[54,26]],"newRange":[[54,26],[54,27]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[54,27],[54,27]],"newRange":[[54,27],[54,28]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[54,28],[54,28]],"newRange":[[54,28],[54,29]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[54,29],[54,29]],"newRange":[[54,29],[54,30]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[54,30],[54,30]],"newRange":[[54,30],[54,31]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[54,31],[54,31]],"newRange":[[54,31],[54,32]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[54,32],[54,32]],"newRange":[[54,32],[54,33]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[54,33],[54,33]],"newRange":[[54,33],[54,34]],"oldText":"","newText":"e"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,34],[54,34]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":343,"snapshot":{"2":{"1":{"range":[[54,35],[54,35]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"checkpoint","id":347,"snapshot":{"2":{"1":{"range":[[546,8],[546,8]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[546,8],[546,8]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[615,9],[615,9]],"newRange":[[615,9],[616,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[616,0],[616,0]],"newRange":[[616,0],[616,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[616,6],[616,6]],"newRange":[[616,6],[617,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[617,0],[617,0]],"newRange":[[617,0],[617,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[616,0],[616,6]],"newRange":[[616,0],[616,0]],"oldText":"      ","newText":""}},{"type":"change","content":{"oldRange":[[617,6],[617,6]],"newRange":[[617,6],[617,7]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[617,7],[617,7]],"newRange":[[617,7],[617,8]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[617,8],[617,8]],"newRange":[[617,8],[617,9]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[617,9],[617,9]],"newRange":[[617,9],[617,10]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[617,10],[617,10]],"newRange":[[617,10],[617,11]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[617,11],[617,11]],"newRange":[[617,11],[617,12]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[617,12],[617,12]],"newRange":[[617,12],[617,13]],"oldText":"","newText":"l"}},{"type":"change","content":{"oldRange":[[617,13],[617,13]],"newRange":[[617,13],[617,14]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[617,14],[617,14]],"newRange":[[617,14],[617,15]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[617,15],[617,15]],"newRange":[[617,15],[617,16]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[617,15],[617,16]],"newRange":[[617,15],[617,15]],"oldText":"t","newText":""}},{"type":"change","content":{"oldRange":[[617,15],[617,15]],"newRange":[[617,15],[617,16]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[617,16],[617,16]],"newRange":[[617,16],[617,17]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[617,17],[617,17]],"newRange":[[617,17],[617,18]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[617,18],[617,18]],"newRange":[[617,18],[617,19]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[617,19],[617,19]],"newRange":[[617,19],[617,20]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[617,20],[617,20]],"newRange":[[617,20],[617,21]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[617,21],[617,21]],"newRange":[[617,21],[617,22]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[617,22],[617,22]],"newRange":[[617,22],[617,23]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[617,23],[617,23]],"newRange":[[617,23],[617,24]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[617,24],[617,24]],"newRange":[[617,24],[617,25]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[617,25],[617,25]],"newRange":[[617,25],[617,26]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[617,26],[617,26]],"newRange":[[617,26],[617,27]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[617,27],[617,27]],"newRange":[[617,27],[617,28]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[617,15],[617,28]],"newRange":[[617,15],[617,39]],"oldText":"create_tax_ra","newText":"create_tax_rate_tax_type"}},{"type":"change","content":{"oldRange":[[617,39],[617,39]],"newRange":[[617,39],[617,40]],"oldText":"","newText":"!"}},{"type":"change","content":{"oldRange":[[617,40],[617,40]],"newRange":[[617,40],[617,42]],"oldText":"","newText":"()"}},{"type":"change","content":{"oldRange":[[617,41],[617,41]],"newRange":[[617,41],[617,42]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[617,42],[617,42]],"newRange":[[617,42],[617,43]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[617,43],[617,43]],"newRange":[[617,43],[617,44]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[617,44],[617,44]],"newRange":[[617,44],[617,45]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[617,46],[617,46]],"newRange":[[617,46],[618,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[618,0],[618,0]],"newRange":[[618,0],[618,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[618,8],[618,8]],"newRange":[[618,8],[618,9]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[618,9],[618,9]],"newRange":[[618,9],[618,10]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[618,10],[618,10]],"newRange":[[618,10],[618,11]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[618,0],[618,8]],"newRange":[[618,0],[618,6]],"oldText":"        ","newText":"      "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[618,9],[618,9]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":392,"snapshot":{"2":{"1":{"range":[[617,46],[617,46]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"checkpoint","id":397,"snapshot":{"2":{"1":{"range":[[617,46],[617,46]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[617,46],[617,46]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[617,46],[617,46]],"newRange":[[617,46],[618,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[618,0],[618,0]],"newRange":[[618,0],[618,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[618,0],[618,0]],"newRange":[[618,0],[629,11]],"oldText":"","newText":"      # Creates a tax rate percentage from seed data\n        def self.create_tax_rate_percentage!(data)\n          trp = ::CoreAccounting::Taxes::Models::TaxRatePercentage.new\n          tr = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate])\n          trp.tax_rate_id = tr.id\n          trp.tax_rate = tr\n          trp.percentage = BigDecimal.new(data[:percentage])\n          trp.start_date = parse_date(data[:start_date])\n          trp.end_date = parse_date(data[:end_date])\n\n          trp.save!\n        end"}},{"type":"change","content":{"oldRange":[[618,0],[618,6]],"newRange":[[618,0],[618,8]],"oldText":"      ","newText":"        "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[629,11],[629,11]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[629,0],[630,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[629,0],[630,0]],"newRange":[[629,0],[629,0]],"oldText":"        end        \n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[629,0],[629,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[619,0],[620,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[619,0],[620,0]],"newRange":[[619,0],[619,0]],"oldText":"        def self.create_tax_rate_percentage!(data)\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[619,0],[619,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[618,0],[619,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[618,0],[619,0]],"newRange":[[618,0],[618,0]],"oldText":"        # Creates a tax rate percentage from seed data\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[618,0],[618,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[617,0],[617,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[617,0],[617,0]],"newRange":[[617,0],[618,0]],"oldText":"","newText":"        # Creates a tax rate percentage from seed data\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[618,0],[618,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[617,6],[617,8]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[617,6],[617,8]],"newRange":[[617,6],[617,6]],"oldText":"  ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[617,6],[617,6]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[617,27],[617,52]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[617,27],[617,52]],"newRange":[[617,27],[617,27]],"oldText":"percentage from seed data","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[617,27],[617,27]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":408,"snapshot":{"2":{"1":{"range":[[617,27],[617,27]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[617,27],[617,27]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[617,27],[617,27]],"newRange":[[617,27],[617,28]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[617,28],[617,28]],"newRange":[[617,28],[617,29]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[617,29],[617,29]],"newRange":[[617,29],[617,30]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[617,30],[617,30]],"newRange":[[617,30],[617,31]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[617,31],[617,31]],"newRange":[[617,31],[617,32]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[617,32],[617,32]],"newRange":[[617,32],[617,33]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[617,33],[617,33]],"newRange":[[617,33],[617,34]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[617,34],[617,34]],"newRange":[[617,34],[617,35]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[617,35],[617,35]],"newRange":[[617,35],[617,36]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[617,36],[617,36]],"newRange":[[617,36],[617,37]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[617,37],[617,37]],"newRange":[[617,37],[617,38]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[617,38],[617,38]],"newRange":[[617,38],[617,39]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[617,39],[617,39]],"newRange":[[617,39],[617,40]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[617,40],[617,40]],"newRange":[[617,40],[617,41]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[617,41],[617,41]],"newRange":[[617,41],[617,42]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[617,42],[617,42]],"newRange":[[617,42],[617,43]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[617,43],[617,43]],"newRange":[[617,43],[617,44]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[617,44],[617,44]],"newRange":[[617,44],[617,45]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[617,45],[617,45]],"newRange":[[617,45],[617,46]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[617,46],[617,46]],"newRange":[[617,46],[617,47]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[617,47],[617,47]],"newRange":[[617,47],[617,48]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[617,48],[617,48]],"newRange":[[617,48],[617,49]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[617,49],[617,49]],"newRange":[[617,49],[617,50]],"oldText":"","newText":"n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[617,50],[617,50]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[619,0],[628,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[619,0],[619,2]],"newRange":[[619,0],[619,0]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[620,0],[620,2]],"newRange":[[620,0],[620,0]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[621,0],[621,2]],"newRange":[[621,0],[621,0]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[622,0],[622,2]],"newRange":[[622,0],[622,0]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[623,0],[623,2]],"newRange":[[623,0],[623,0]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[624,0],[624,2]],"newRange":[[624,0],[624,0]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[625,0],[625,2]],"newRange":[[625,0],[625,0]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[627,0],[627,2]],"newRange":[[627,0],[627,0]],"oldText":"  ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[619,0],[628,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":437,"snapshot":{"2":{"1":{"range":[[619,54],[619,64]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[619,54],[619,64]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[619,54],[619,64]],"newRange":[[619,54],[619,54]],"oldText":"Percentage","newText":""}},{"type":"change","content":{"oldRange":[[619,54],[619,54]],"newRange":[[619,54],[619,55]],"oldText":"","newText":"T"}},{"type":"change","content":{"oldRange":[[619,55],[619,55]],"newRange":[[619,55],[619,56]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[619,56],[619,56]],"newRange":[[619,56],[619,57]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[619,57],[619,57]],"newRange":[[619,57],[619,58]],"oldText":"","newText":"T"}},{"type":"change","content":{"oldRange":[[619,58],[619,58]],"newRange":[[619,58],[619,59]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[619,59],[619,59]],"newRange":[[619,59],[619,60]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[619,60],[619,60]],"newRange":[[619,60],[619,61]],"oldText":"","newText":"e"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[619,61],[619,61]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[621,0],[626,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[621,0],[626,0]],"newRange":[[621,0],[621,0]],"oldText":"        trp.tax_rate_id = tr.id\n        trp.tax_rate = tr\n        trp.percentage = BigDecimal.new(data[:percentage])\n        trp.start_date = parse_date(data[:start_date])\n        trp.end_date = parse_date(data[:end_date])\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[621,0],[621,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":448,"snapshot":{"2":{"1":{"range":[[619,8],[619,11]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[619,8],[619,11]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[619,8],[619,11]],"newRange":[[619,8],[619,8]],"oldText":"trp","newText":""}},{"type":"change","content":{"oldRange":[[619,8],[619,8]],"newRange":[[619,8],[619,9]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[619,9],[619,9]],"newRange":[[619,9],[619,10]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[619,10],[619,10]],"newRange":[[619,10],[619,11]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[619,11],[619,11]],"newRange":[[619,11],[619,12]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[619,12],[619,12]],"newRange":[[619,12],[619,13]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[619,13],[619,13]],"newRange":[[619,13],[619,14]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[619,14],[619,14]],"newRange":[[619,14],[619,15]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[619,15],[619,15]],"newRange":[[619,15],[619,16]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[619,16],[619,16]],"newRange":[[619,16],[619,17]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[619,17],[619,17]],"newRange":[[619,17],[619,18]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[619,18],[619,18]],"newRange":[[619,18],[619,19]],"oldText":"","newText":"n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[619,19],[619,19]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":462,"snapshot":{"2":{"1":{"range":[[619,19],[619,19]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[619,19],[619,19]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[622,8],[622,11]],"newRange":[[622,8],[622,19]],"oldText":"trp","newText":"association"}},{"type":"change","content":{"oldRange":[[620,9],[620,9]],"newRange":[[620,9],[620,10]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[620,10],[620,10]],"newRange":[[620,10],[620,11]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[620,11],[620,11]],"newRange":[[620,11],[620,12]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[620,13],[620,13]],"newRange":[[620,13],[620,14]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[620,14],[620,14]],"newRange":[[620,14],[620,15]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[620,15],[620,15]],"newRange":[[620,15],[620,16]],"oldText":"","newText":"e"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[620,16],[620,16]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":473,"snapshot":{"2":{"1":{"range":[[607,13],[607,13]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[607,13],[607,13]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[620,86],[620,86]],"newRange":[[620,86],[621,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[621,0],[621,0]],"newRange":[[621,0],[621,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[621,8],[621,8]],"newRange":[[621,8],[621,92]],"oldText":"","newText":"tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id"}},{"type":"change","content":{"oldRange":[[620,86],[620,86]],"newRange":[[620,86],[620,87]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[620,87],[620,87]],"newRange":[[620,87],[620,88]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[620,88],[620,88]],"newRange":[[620,88],[620,89]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[620,16],[620,16]],"newRange":[[620,16],[620,17]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[620,17],[620,17]],"newRange":[[620,17],[620,18]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[620,18],[620,18]],"newRange":[[620,18],[620,19]],"oldText":"","newText":"d"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[620,19],[620,19]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[622,0],[622,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[622,0],[622,0]],"newRange":[[622,0],[622,8]],"oldText":"","newText":"        "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[622,8],[622,8]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":488,"snapshot":{"2":{"1":{"range":[[622,6],[622,6]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[622,6],[622,6]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[622,6],[622,6]],"newRange":[[622,6],[623,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[623,0],[623,0]],"newRange":[[623,0],[623,6]],"oldText":"","newText":"      "}},{"type":"change","content":{"oldRange":[[622,0],[622,6]],"newRange":[[622,0],[622,0]],"oldText":"      ","newText":""}},{"type":"change","content":{"oldRange":[[623,8],[623,8]],"newRange":[[623,8],[623,10]],"oldText":"","newText":"  "}},{"type":"change","content":{"oldRange":[[623,8],[623,10]],"newRange":[[623,8],[623,8]],"oldText":"  ","newText":""}},{"type":"change","content":{"oldRange":[[619,8],[619,73]],"newRange":[[619,8],[619,8]],"oldText":"association = ::CoreAccounting::Taxes::Models::TaxRateTaxType.new","newText":""}},{"type":"change","content":{"oldRange":[[618,46],[619,0]],"newRange":[[618,46],[618,46]],"oldText":"\n","newText":""}},{"type":"change","content":{"oldRange":[[622,8],[622,8]],"newRange":[[622,8],[622,73]],"oldText":"","newText":"association = ::CoreAccounting::Taxes::Models::TaxRateTaxType.new"}},{"type":"change","content":{"oldRange":[[622,73],[622,73]],"newRange":[[622,73],[623,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[623,0],[623,0]],"newRange":[[623,0],[623,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[623,8],[623,8]],"newRange":[[623,8],[623,9]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[623,9],[623,9]],"newRange":[[623,9],[623,10]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[623,10],[623,10]],"newRange":[[623,10],[623,11]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[623,11],[623,11]],"newRange":[[623,11],[623,12]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[623,8],[623,12]],"newRange":[[623,8],[623,19]],"oldText":"asso","newText":"association"}},{"type":"change","content":{"oldRange":[[623,19],[623,19]],"newRange":[[623,19],[623,20]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[623,20],[623,20]],"newRange":[[623,20],[623,21]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[623,21],[623,21]],"newRange":[[623,21],[623,22]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[623,22],[623,22]],"newRange":[[623,22],[623,23]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[623,23],[623,23]],"newRange":[[623,23],[623,24]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[623,24],[623,24]],"newRange":[[623,24],[623,25]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[623,25],[623,25]],"newRange":[[623,25],[623,26]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[623,26],[623,26]],"newRange":[[623,26],[623,27]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[623,27],[623,27]],"newRange":[[623,27],[623,28]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[623,20],[623,28]],"newRange":[[623,20],[623,31]],"oldText":"tax_rate","newText":"tax_rate_id"}},{"type":"change","content":{"oldRange":[[623,31],[623,31]],"newRange":[[623,31],[623,32]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[623,32],[623,32]],"newRange":[[623,32],[623,33]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[623,33],[623,33]],"newRange":[[623,33],[623,34]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[623,34],[623,34]],"newRange":[[623,34],[623,35]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[623,35],[623,35]],"newRange":[[623,35],[623,36]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[623,36],[623,36]],"newRange":[[623,36],[623,37]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[623,34],[623,37]],"newRange":[[623,34],[623,42]],"oldText":"tax","newText":"tax_rate"}},{"type":"change","content":{"oldRange":[[623,42],[623,42]],"newRange":[[623,42],[623,43]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[623,43],[623,43]],"newRange":[[623,43],[623,44]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[623,44],[623,44]],"newRange":[[623,44],[623,45]],"oldText":"","newText":"d"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[623,45],[623,45]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[623,44],[623,44]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[618,46],[618,54]],"newRange":[[618,46],[618,46]],"oldText":"        ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[623,44],[623,44]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[624,0],[624,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[624,0],[624,0]],"newRange":[[624,0],[625,0]],"oldText":"","newText":"        association.tax_rate_id = tax_rate_id\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[625,0],[625,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[624,24],[624,25]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[624,24],[624,25]],"newRange":[[624,24],[624,24]],"oldText":"r","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[624,24],[624,24]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[624,24],[624,25]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[624,24],[624,25]],"newRange":[[624,24],[624,24]],"oldText":"a","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[624,24],[624,24]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[624,24],[624,25]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[624,24],[624,25]],"newRange":[[624,24],[624,24]],"oldText":"t","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[624,24],[624,24]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[624,24],[624,25]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[624,24],[624,25]],"newRange":[[624,24],[624,24]],"oldText":"e","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[624,24],[624,24]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":534,"snapshot":{"2":{"1":{"range":[[624,24],[624,24]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[624,24],[624,24]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[624,24],[624,24]],"newRange":[[624,24],[624,25]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[624,25],[624,25]],"newRange":[[624,25],[624,26]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[624,26],[624,26]],"newRange":[[624,26],[624,27]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[624,27],[624,27]],"newRange":[[624,27],[624,28]],"oldText":"","newText":"e"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[624,28],[624,28]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":544,"snapshot":{"2":{"1":{"range":[[624,45],[624,45]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[624,45],[624,45]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[624,44],[624,45]],"newRange":[[624,44],[624,44]],"oldText":"d","newText":""}},{"type":"change","content":{"oldRange":[[624,43],[624,44]],"newRange":[[624,43],[624,43]],"oldText":"i","newText":""}},{"type":"change","content":{"oldRange":[[624,42],[624,43]],"newRange":[[624,42],[624,42]],"oldText":"_","newText":""}},{"type":"change","content":{"oldRange":[[624,41],[624,42]],"newRange":[[624,41],[624,41]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[624,40],[624,41]],"newRange":[[624,40],[624,40]],"oldText":"t","newText":""}},{"type":"change","content":{"oldRange":[[624,39],[624,40]],"newRange":[[624,39],[624,39]],"oldText":"a","newText":""}},{"type":"change","content":{"oldRange":[[624,38],[624,39]],"newRange":[[624,38],[624,38]],"oldText":"r","newText":""}},{"type":"change","content":{"oldRange":[[624,38],[624,38]],"newRange":[[624,38],[624,39]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[624,39],[624,39]],"newRange":[[624,39],[624,40]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[624,34],[624,40]],"newRange":[[624,34],[624,45]],"oldText":"tax_ty","newText":"tax_type_id"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[624,45],[624,45]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[51,60],[51,61]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[51,60],[51,61]],"newRange":[[51,60],[51,60]],"oldText":":","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,60],[51,60]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[51,60],[51,61]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[51,60],[51,61]],"newRange":[[51,60],[51,60]],"oldText":"i","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,60],[51,60]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[51,60],[51,61]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[51,60],[51,61]],"newRange":[[51,60],[51,60]],"oldText":"d","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,60],[51,60]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[51,60],[51,61]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[51,60],[51,61]],"newRange":[[51,60],[51,60]],"oldText":",","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,60],[51,60]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[51,59],[51,60]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[51,59],[51,60]],"newRange":[[51,59],[51,59]],"oldText":" ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,59],[51,59]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":574,"snapshot":{"2":{"1":{"range":[[50,63],[50,63]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[50,63],[50,63]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[50,63],[50,63]],"newRange":[[50,63],[51,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[51,0],[51,0]],"newRange":[[51,0],[51,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[51,8],[51,8]],"newRange":[[51,8],[51,9]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[51,9],[51,9]],"newRange":[[51,9],[51,10]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[51,10],[51,10]],"newRange":[[51,10],[51,11]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[51,8],[51,11]],"newRange":[[51,8],[51,11]],"oldText":"pry","newText":"pry"}},{"type":"change","content":{"oldRange":[[51,8],[51,11]],"newRange":[[51,8],[51,19]],"oldText":"pry","newText":"binding.pry"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,19],[51,19]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[51,0],[52,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[51,0],[52,0]],"newRange":[[51,0],[51,0]],"oldText":"        binding.pry\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,0],[51,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":587,"snapshot":{"2":{"1":{"range":[[50,63],[50,63]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[50,63],[50,63]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[50,63],[50,63]],"newRange":[[50,63],[51,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[51,0],[51,0]],"newRange":[[51,0],[51,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[51,8],[51,8]],"newRange":[[51,8],[51,9]],"oldText":"","newText":"$"}},{"type":"change","content":{"oldRange":[[51,9],[51,9]],"newRange":[[51,9],[51,10]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[51,10],[51,10]],"newRange":[[51,10],[51,11]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[51,11],[51,11]],"newRange":[[51,11],[51,12]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[51,12],[51,12]],"newRange":[[51,12],[51,13]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[51,13],[51,13]],"newRange":[[51,13],[51,14]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[51,14],[51,14]],"newRange":[[51,14],[51,15]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[51,15],[51,15]],"newRange":[[51,15],[51,16]],"oldText":"","newText":"1"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,16],[51,16]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[51,0],[52,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[51,0],[52,0]],"newRange":[[51,0],[51,0]],"oldText":"        $foo = 1\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[51,0],[51,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[50,43],[50,43]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[10,0],[10,0]],"newRange":[[10,0],[11,0]],"oldText":"","newText":"        puts '#Seeding Core Accounting....................'\n"}},{"type":"change","content":{"oldRange":[[11,0],[12,0]],"newRange":[[11,0],[11,0]],"oldText":"        self.print_seeding  'Core Accounting', title: true\n","newText":""}},{"type":"change","content":{"oldRange":[[19,0],[20,0]],"newRange":[[19,0],[19,0]],"oldText":"        seed_tax_rates_tax_types(nil)\n","newText":""}},{"type":"change","content":{"oldRange":[[33,0],[34,0]],"newRange":[[33,0],[33,0]],"oldText":"        seed_tax_types_tax_sub_freq_types(nil, cache_static_data: true)\n","newText":""}},{"type":"change","content":{"oldRange":[[37,0],[37,0]],"newRange":[[37,0],[38,0]],"oldText":"","newText":"        puts '##Seeding Tax Types.................'\n"}},{"type":"change","content":{"oldRange":[[38,0],[39,0]],"newRange":[[38,0],[38,0]],"oldText":"        self.print_seeding 'Tax Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[44,0],[45,0]],"newRange":[[44,0],[44,0]],"oldText":"      end\n","newText":""}},{"type":"change","content":{"oldRange":[[45,0],[45,0]],"newRange":[[45,0],[46,0]],"oldText":"","newText":"        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n"}},{"type":"change","content":{"oldRange":[[46,0],[55,0]],"newRange":[[46,0],[46,0]],"oldText":"      # Seed the relation between a tax rate and a tax type\n      def self.seed_tax_rates_tax_types(country=nil, options={})\n        self.print_seeding 'Tax Rates to Tax Types Association'\n        seed_data = get_data(:tax_rates_tax_types, country, :tax_rate, :tax_type)\n\n        seed_data.each do |data|\n          create_tax_rate_tax_type!(data)\n        end\n\n","newText":""}},{"type":"change","content":{"oldRange":[[50,0],[50,0]],"newRange":[[50,0],[51,0]],"oldText":"","newText":"        puts '##Seeding States Tax Types.................'\n"}},{"type":"change","content":{"oldRange":[[51,0],[52,0]],"newRange":[[51,0],[51,0]],"oldText":"        self.print_seeding 'States Tax Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[57,0],[57,0]],"newRange":[[57,0],[59,0]],"oldText":"","newText":"\n        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n"}},{"type":"change","content":{"oldRange":[[63,0],[63,0]],"newRange":[[63,0],[64,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Types.............'\n"}},{"type":"change","content":{"oldRange":[[64,0],[65,0]],"newRange":[[64,0],[64,0]],"oldText":"        self.print_seeding 'Tax Return Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[78,0],[78,0]],"newRange":[[78,0],[79,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Types - Tax Types associations.............'\n"}},{"type":"change","content":{"oldRange":[[79,0],[80,0]],"newRange":[[79,0],[79,0]],"oldText":"        self.print_seeding 'Tax Return Types - Tax Types associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[94,0],[94,0]],"newRange":[[94,0],[95,0]],"oldText":"","newText":"        puts '##Seeding Tax Schemes.......................'\n"}},{"type":"change","content":{"oldRange":[[95,0],[96,0]],"newRange":[[95,0],[95,0]],"oldText":"        self.print_seeding 'Tax Schemes'\n","newText":""}},{"type":"change","content":{"oldRange":[[110,0],[110,0]],"newRange":[[110,0],[111,0]],"oldText":"","newText":"        puts '##Seeding Tax Submission Frequency Types....'\n"}},{"type":"change","content":{"oldRange":[[111,0],[112,0]],"newRange":[[111,0],[111,0]],"oldText":"        self.print_seeding 'Tax Submission Frequency Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[125,0],[125,0]],"newRange":[[125,0],[126,0]],"oldText":"","newText":"        puts '##Seeding Tax Rates.........................'\n"}},{"type":"change","content":{"oldRange":[[126,0],[127,0]],"newRange":[[126,0],[126,0]],"oldText":"        self.print_seeding 'Tax Rates'\n","newText":""}},{"type":"change","content":{"oldRange":[[149,0],[149,0]],"newRange":[[149,0],[150,0]],"oldText":"","newText":"        puts '##Seeding Tax Rate Associations.........................'\n"}},{"type":"change","content":{"oldRange":[[150,0],[151,0]],"newRange":[[150,0],[150,0]],"oldText":"        self.print_seeding 'Tax Rate Associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[169,0],[169,0]],"newRange":[[169,0],[170,0]],"oldText":"","newText":"        puts '##Seeding Coa Account Tax Rate Associations.........................'\n"}},{"type":"change","content":{"oldRange":[[170,0],[171,0]],"newRange":[[170,0],[170,0]],"oldText":"        self.print_seeding 'Coa Account Tax Rate Associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[190,0],[190,0]],"newRange":[[190,0],[191,0]],"oldText":"","newText":"        puts '##Seeding Annotation Element Tax Rate Associations.........'\n"}},{"type":"change","content":{"oldRange":[[191,0],[192,0]],"newRange":[[191,0],[191,0]],"oldText":"        self.print_seeding 'Annotation Element Tax Rate Associations'\n","newText":""}},{"type":"change","content":{"oldRange":[[216,0],[216,0]],"newRange":[[216,0],[217,0]],"oldText":"","newText":"        puts '##Seeding Tax Rate Percentages..............'\n"}},{"type":"change","content":{"oldRange":[[217,0],[218,0]],"newRange":[[217,0],[217,0]],"oldText":"        self.print_seeding 'Tax Rate Percentages'\n","newText":""}},{"type":"change","content":{"oldRange":[[229,0],[229,0]],"newRange":[[229,0],[230,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Statuses..............'\n"}},{"type":"change","content":{"oldRange":[[230,0],[231,0]],"newRange":[[230,0],[230,0]],"oldText":"        self.print_seeding 'Tax Return Statuses'\n","newText":""}},{"type":"change","content":{"oldRange":[[246,0],[246,0]],"newRange":[[246,0],[247,0]],"oldText":"","newText":"        puts '##Seeding Tax Return Box Types.............'\n"}},{"type":"change","content":{"oldRange":[[247,0],[248,0]],"newRange":[[247,0],[247,0]],"oldText":"        self.print_seeding 'Tax Return Box Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[262,0],[262,0]],"newRange":[[262,0],[263,0]],"oldText":"","newText":"        puts '##Seeding Pearls Types......................'\n"}},{"type":"change","content":{"oldRange":[[263,0],[264,0]],"newRange":[[263,0],[263,0]],"oldText":"        self.print_seeding 'Pearls Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[282,0],[282,0]],"newRange":[[282,0],[283,0]],"oldText":"","newText":"        puts '##Seeding Coa Group Types...................'\n"}},{"type":"change","content":{"oldRange":[[283,0],[284,0]],"newRange":[[283,0],[283,0]],"oldText":"        self.print_seeding 'Coa Group Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[300,0],[300,0]],"newRange":[[300,0],[301,0]],"oldText":"","newText":"        puts '##Seeding Ledger Account Types..............'\n"}},{"type":"change","content":{"oldRange":[[301,0],[302,0]],"newRange":[[301,0],[301,0]],"oldText":"        self.print_seeding 'Ledger Account Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[313,0],[313,0]],"newRange":[[313,0],[314,0]],"oldText":"","newText":"        puts '##Seeding Coa Accounts......................'\n"}},{"type":"change","content":{"oldRange":[[314,0],[315,0]],"newRange":[[314,0],[314,0]],"oldText":"        self.print_seeding 'Coa Accounts'\n","newText":""}},{"type":"change","content":{"oldRange":[[329,0],[329,0]],"newRange":[[329,0],[330,0]],"oldText":"","newText":"        puts '##Seeding Coa Templates.....................'\n"}},{"type":"change","content":{"oldRange":[[330,0],[331,0]],"newRange":[[330,0],[330,0]],"oldText":"        self.print_seeding 'Coa Templates'\n","newText":""}},{"type":"change","content":{"oldRange":[[372,0],[372,0]],"newRange":[[372,0],[373,0]],"oldText":"","newText":"        puts '##Seeding Transaction Types.................'\n"}},{"type":"change","content":{"oldRange":[[373,0],[374,0]],"newRange":[[373,0],[373,0]],"oldText":"        self.print_seeding 'Transaction Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[390,0],[390,0]],"newRange":[[390,0],[391,0]],"oldText":"","newText":"        puts '##Seeding Payment Types.....................'\n"}},{"type":"change","content":{"oldRange":[[391,0],[392,0]],"newRange":[[391,0],[391,0]],"oldText":"        self.print_seeding 'Payment Types'\n","newText":""}},{"type":"change","content":{"oldRange":[[440,0],[440,0]],"newRange":[[440,0],[441,0]],"oldText":"","newText":"        puts '##Seeding Tax Relations.................'\n"}},{"type":"change","content":{"oldRange":[[441,0],[442,0]],"newRange":[[441,0],[441,0]],"oldText":"        self.print_seeding 'Tax Relations'\n","newText":""}},{"type":"change","content":{"oldRange":[[585,0],[618,0]],"newRange":[[585,0],[585,0]],"oldText":"\n      # Seed the tax types tax submission frequency types (tax_types_tax_sub_freq_types) table\n      def self.seed_tax_types_tax_sub_freq_types(country=nil, options={})\n        self.print_seeding 'Tax Types Tax Submission Frequency Types'\n\n        seed_data = get_data(:tax_types_tax_sub_freq_types, country, :tax_type, :tax_submission_frequency_type)\n\n        seed_data.each do |data|\n          create_tax_types_tax_sub_freq_types!(data)\n        end\n      end\n\n      def self.create_tax_types_tax_sub_freq_types!(data)\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n        tax_submission_frequency_type_id = get_type(::CoreAccounting::Taxes::Models::TaxSubmissionFrequencyType,\n                                                    data[:tax_submission_frequency_type]).id\n\n        record = ::CoreAccounting::Taxes::Models::TaxTypesTaxSubFreqTypes.new\n        record.tax_type_id = tax_type_id\n        record.tax_submission_frequency_type_id = tax_submission_frequency_type_id\n        record.save!\n      end\n\n      # Creates a tax rate to tax type association\n      def self.create_tax_rate_tax_type!(data)\n        tax_rate_id = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate]).id\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n\n        association = ::CoreAccounting::Taxes::Models::TaxRateTaxType.new\n        association.tax_rate_id = tax_rate_id\n        association.tax_type_id = tax_type_id\n        association.save!\n      end\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[46,0],[46,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[50,43],[50,43]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[10,0],[10,0]],"newRange":[[10,0],[11,0]],"oldText":"","newText":"        self.print_seeding  'Core Accounting', title: true\n"}},{"type":"change","content":{"oldRange":[[11,0],[12,0]],"newRange":[[11,0],[11,0]],"oldText":"        puts '#Seeding Core Accounting....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[33,0],[33,0]],"newRange":[[33,0],[34,0]],"oldText":"","newText":"        seed_tax_types_tax_sub_freq_types(nil, cache_static_data: true)\n"}},{"type":"change","content":{"oldRange":[[38,0],[38,0]],"newRange":[[38,0],[39,0]],"oldText":"","newText":"        self.print_seeding 'Tax Types'\n"}},{"type":"change","content":{"oldRange":[[39,0],[40,0]],"newRange":[[39,0],[39,0]],"oldText":"        puts '##Seeding Tax Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[51,0],[51,0]],"newRange":[[51,0],[52,0]],"oldText":"","newText":"        self.print_seeding 'States Tax Types'\n"}},{"type":"change","content":{"oldRange":[[52,0],[53,0]],"newRange":[[52,0],[52,0]],"oldText":"        puts '##Seeding States Tax Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[64,0],[64,0]],"newRange":[[64,0],[65,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Types'\n"}},{"type":"change","content":{"oldRange":[[65,0],[66,0]],"newRange":[[65,0],[65,0]],"oldText":"        puts '##Seeding Tax Return Types.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[79,0],[79,0]],"newRange":[[79,0],[80,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Types - Tax Types associations'\n"}},{"type":"change","content":{"oldRange":[[80,0],[81,0]],"newRange":[[80,0],[80,0]],"oldText":"        puts '##Seeding Tax Return Types - Tax Types associations.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[95,0],[95,0]],"newRange":[[95,0],[96,0]],"oldText":"","newText":"        self.print_seeding 'Tax Schemes'\n"}},{"type":"change","content":{"oldRange":[[96,0],[97,0]],"newRange":[[96,0],[96,0]],"oldText":"        puts '##Seeding Tax Schemes.......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[111,0],[111,0]],"newRange":[[111,0],[112,0]],"oldText":"","newText":"        self.print_seeding 'Tax Submission Frequency Types'\n"}},{"type":"change","content":{"oldRange":[[112,0],[113,0]],"newRange":[[112,0],[112,0]],"oldText":"        puts '##Seeding Tax Submission Frequency Types....'\n","newText":""}},{"type":"change","content":{"oldRange":[[126,0],[126,0]],"newRange":[[126,0],[127,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rates'\n"}},{"type":"change","content":{"oldRange":[[127,0],[128,0]],"newRange":[[127,0],[127,0]],"oldText":"        puts '##Seeding Tax Rates.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[150,0],[150,0]],"newRange":[[150,0],[151,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[151,0],[152,0]],"newRange":[[151,0],[151,0]],"oldText":"        puts '##Seeding Tax Rate Associations.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[170,0],[170,0]],"newRange":[[170,0],[171,0]],"oldText":"","newText":"        self.print_seeding 'Coa Account Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[171,0],[172,0]],"newRange":[[171,0],[171,0]],"oldText":"        puts '##Seeding Coa Account Tax Rate Associations.........................'\n","newText":""}},{"type":"change","content":{"oldRange":[[191,0],[191,0]],"newRange":[[191,0],[192,0]],"oldText":"","newText":"        self.print_seeding 'Annotation Element Tax Rate Associations'\n"}},{"type":"change","content":{"oldRange":[[192,0],[193,0]],"newRange":[[192,0],[192,0]],"oldText":"        puts '##Seeding Annotation Element Tax Rate Associations.........'\n","newText":""}},{"type":"change","content":{"oldRange":[[217,0],[217,0]],"newRange":[[217,0],[218,0]],"oldText":"","newText":"        self.print_seeding 'Tax Rate Percentages'\n"}},{"type":"change","content":{"oldRange":[[218,0],[219,0]],"newRange":[[218,0],[218,0]],"oldText":"        puts '##Seeding Tax Rate Percentages..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[230,0],[230,0]],"newRange":[[230,0],[231,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Statuses'\n"}},{"type":"change","content":{"oldRange":[[231,0],[232,0]],"newRange":[[231,0],[231,0]],"oldText":"        puts '##Seeding Tax Return Statuses..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[247,0],[247,0]],"newRange":[[247,0],[248,0]],"oldText":"","newText":"        self.print_seeding 'Tax Return Box Types'\n"}},{"type":"change","content":{"oldRange":[[248,0],[249,0]],"newRange":[[248,0],[248,0]],"oldText":"        puts '##Seeding Tax Return Box Types.............'\n","newText":""}},{"type":"change","content":{"oldRange":[[263,0],[263,0]],"newRange":[[263,0],[264,0]],"oldText":"","newText":"        self.print_seeding 'Pearls Types'\n"}},{"type":"change","content":{"oldRange":[[264,0],[265,0]],"newRange":[[264,0],[264,0]],"oldText":"        puts '##Seeding Pearls Types......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[283,0],[283,0]],"newRange":[[283,0],[284,0]],"oldText":"","newText":"        self.print_seeding 'Coa Group Types'\n"}},{"type":"change","content":{"oldRange":[[284,0],[285,0]],"newRange":[[284,0],[284,0]],"oldText":"        puts '##Seeding Coa Group Types...................'\n","newText":""}},{"type":"change","content":{"oldRange":[[301,0],[301,0]],"newRange":[[301,0],[302,0]],"oldText":"","newText":"        self.print_seeding 'Ledger Account Types'\n"}},{"type":"change","content":{"oldRange":[[302,0],[303,0]],"newRange":[[302,0],[302,0]],"oldText":"        puts '##Seeding Ledger Account Types..............'\n","newText":""}},{"type":"change","content":{"oldRange":[[314,0],[314,0]],"newRange":[[314,0],[315,0]],"oldText":"","newText":"        self.print_seeding 'Coa Accounts'\n"}},{"type":"change","content":{"oldRange":[[315,0],[316,0]],"newRange":[[315,0],[315,0]],"oldText":"        puts '##Seeding Coa Accounts......................'\n","newText":""}},{"type":"change","content":{"oldRange":[[330,0],[330,0]],"newRange":[[330,0],[331,0]],"oldText":"","newText":"        self.print_seeding 'Coa Templates'\n"}},{"type":"change","content":{"oldRange":[[331,0],[332,0]],"newRange":[[331,0],[331,0]],"oldText":"        puts '##Seeding Coa Templates.....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[373,0],[373,0]],"newRange":[[373,0],[374,0]],"oldText":"","newText":"        self.print_seeding 'Transaction Types'\n"}},{"type":"change","content":{"oldRange":[[374,0],[375,0]],"newRange":[[374,0],[374,0]],"oldText":"        puts '##Seeding Transaction Types.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[391,0],[391,0]],"newRange":[[391,0],[392,0]],"oldText":"","newText":"        self.print_seeding 'Payment Types'\n"}},{"type":"change","content":{"oldRange":[[392,0],[393,0]],"newRange":[[392,0],[392,0]],"oldText":"        puts '##Seeding Payment Types.....................'\n","newText":""}},{"type":"change","content":{"oldRange":[[441,0],[441,0]],"newRange":[[441,0],[442,0]],"oldText":"","newText":"        self.print_seeding 'Tax Relations'\n"}},{"type":"change","content":{"oldRange":[[442,0],[443,0]],"newRange":[[442,0],[442,0]],"oldText":"        puts '##Seeding Tax Relations.................'\n","newText":""}},{"type":"change","content":{"oldRange":[[586,0],[586,0]],"newRange":[[586,0],[608,0]],"oldText":"","newText":"\n      # Seed the tax types tax submission frequency types (tax_types_tax_sub_freq_types) table\n      def self.seed_tax_types_tax_sub_freq_types(country=nil, options={})\n        self.print_seeding 'Tax Types Tax Submission Frequency Types'\n\n        seed_data = get_data(:tax_types_tax_sub_freq_types, country, :tax_type, :tax_submission_frequency_type)\n\n        seed_data.each do |data|\n          create_tax_types_tax_sub_freq_types!(data)\n        end\n      end\n\n      def self.create_tax_types_tax_sub_freq_types!(data)\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n        tax_submission_frequency_type_id = get_type(::CoreAccounting::Taxes::Models::TaxSubmissionFrequencyType,\n                                                    data[:tax_submission_frequency_type]).id\n\n        record = ::CoreAccounting::Taxes::Models::TaxTypesTaxSubFreqTypes.new\n        record.tax_type_id = tax_type_id\n        record.tax_submission_frequency_type_id = tax_submission_frequency_type_id\n        record.save!\n      end\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[52,0],[52,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[50,43],[50,43]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,0],[19,0]],"newRange":[[19,0],[20,0]],"oldText":"","newText":"        seed_tax_rates_tax_types(nil)\n"}},{"type":"change","content":{"oldRange":[[46,0],[46,0]],"newRange":[[46,0],[47,0]],"oldText":"","newText":"      end\n"}},{"type":"change","content":{"oldRange":[[48,0],[48,0]],"newRange":[[48,0],[57,0]],"oldText":"","newText":"      # Seed the relation between a tax rate and a tax type\n      def self.seed_tax_rates_tax_types(country=nil, options={})\n        self.print_seeding 'Tax Rates to Tax Types Association'\n        seed_data = get_data(:tax_rates_tax_types, country, :tax_rate, :tax_type)\n\n        seed_data.each do |data|\n          create_tax_rate_tax_type!(data)\n        end\n\n"}},{"type":"change","content":{"oldRange":[[57,0],[58,0]],"newRange":[[57,0],[57,0]],"oldText":"        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n","newText":""}},{"type":"change","content":{"oldRange":[[68,0],[70,0]],"newRange":[[68,0],[68,0]],"oldText":"\n        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n","newText":""}},{"type":"change","content":{"oldRange":[[616,0],[616,0]],"newRange":[[616,0],[627,0]],"oldText":"","newText":"\n      # Creates a tax rate to tax type association\n      def self.create_tax_rate_tax_type!(data)\n        tax_rate_id = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate]).id\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n\n        association = ::CoreAccounting::Taxes::Models::TaxRateTaxType.new\n        association.tax_rate_id = tax_rate_id\n        association.tax_type_id = tax_type_id\n        association.save!\n      end\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[60,43],[60,43]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[50,43],[50,43]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,0],[20,0]],"newRange":[[19,0],[19,0]],"oldText":"        seed_tax_rates_tax_types(nil)\n","newText":""}},{"type":"change","content":{"oldRange":[[45,0],[46,0]],"newRange":[[45,0],[45,0]],"oldText":"      end\n","newText":""}},{"type":"change","content":{"oldRange":[[46,0],[46,0]],"newRange":[[46,0],[47,0]],"oldText":"","newText":"        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n"}},{"type":"change","content":{"oldRange":[[47,0],[56,0]],"newRange":[[47,0],[47,0]],"oldText":"      # Seed the relation between a tax rate and a tax type\n      def self.seed_tax_rates_tax_types(country=nil, options={})\n        self.print_seeding 'Tax Rates to Tax Types Association'\n        seed_data = get_data(:tax_rates_tax_types, country, :tax_rate, :tax_type)\n\n        seed_data.each do |data|\n          create_tax_rate_tax_type!(data)\n        end\n\n","newText":""}},{"type":"change","content":{"oldRange":[[58,0],[58,0]],"newRange":[[58,0],[60,0]],"oldText":"","newText":"\n        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n"}},{"type":"change","content":{"oldRange":[[608,0],[619,0]],"newRange":[[608,0],[608,0]],"oldText":"\n      # Creates a tax rate to tax type association\n      def self.create_tax_rate_tax_type!(data)\n        tax_rate_id = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate]).id\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n\n        association = ::CoreAccounting::Taxes::Models::TaxRateTaxType.new\n        association.tax_rate_id = tax_rate_id\n        association.tax_type_id = tax_type_id\n        association.save!\n      end\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[47,0],[47,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[50,43],[50,43]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,0],[19,0]],"newRange":[[19,0],[20,0]],"oldText":"","newText":"        seed_tax_rates_tax_types(nil)\n"}},{"type":"change","content":{"oldRange":[[46,0],[46,0]],"newRange":[[46,0],[47,0]],"oldText":"","newText":"      end\n"}},{"type":"change","content":{"oldRange":[[48,0],[48,0]],"newRange":[[48,0],[57,0]],"oldText":"","newText":"      # Seed the relation between a tax rate and a tax type\n      def self.seed_tax_rates_tax_types(country=nil, options={})\n        self.print_seeding 'Tax Rates to Tax Types Association'\n        seed_data = get_data(:tax_rates_tax_types, country, :tax_rate, :tax_type)\n\n        seed_data.each do |data|\n          create_tax_rate_tax_type!(data)\n        end\n\n"}},{"type":"change","content":{"oldRange":[[57,0],[58,0]],"newRange":[[57,0],[57,0]],"oldText":"        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n","newText":""}},{"type":"change","content":{"oldRange":[[68,0],[70,0]],"newRange":[[68,0],[68,0]],"oldText":"\n        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n","newText":""}},{"type":"change","content":{"oldRange":[[616,0],[616,0]],"newRange":[[616,0],[627,0]],"oldText":"","newText":"\n      # Creates a tax rate to tax type association\n      def self.create_tax_rate_tax_type!(data)\n        tax_rate_id = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate]).id\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n\n        association = ::CoreAccounting::Taxes::Models::TaxRateTaxType.new\n        association.tax_rate_id = tax_rate_id\n        association.tax_type_id = tax_type_id\n        association.save!\n      end\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[60,43],[60,43]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[48,43],[48,43]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,0],[20,0]],"newRange":[[19,0],[19,0]],"oldText":"        seed_tax_rates_tax_types(nil)\n","newText":""}},{"type":"change","content":{"oldRange":[[45,0],[46,0]],"newRange":[[45,0],[45,0]],"oldText":"      end\n","newText":""}},{"type":"change","content":{"oldRange":[[46,0],[46,0]],"newRange":[[46,0],[47,0]],"oldText":"","newText":"        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n"}},{"type":"change","content":{"oldRange":[[47,0],[56,0]],"newRange":[[47,0],[47,0]],"oldText":"      # Seed the relation between a tax rate and a tax type\n      def self.seed_tax_rates_tax_types(country=nil, options={})\n        self.print_seeding 'Tax Rates to Tax Types Association'\n        seed_data = get_data(:tax_rates_tax_types, country, :tax_rate, :tax_type)\n\n        seed_data.each do |data|\n          create_tax_rate_tax_type!(data)\n        end\n\n","newText":""}},{"type":"change","content":{"oldRange":[[58,0],[58,0]],"newRange":[[58,0],[60,0]],"oldText":"","newText":"\n        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n"}},{"type":"change","content":{"oldRange":[[608,0],[619,0]],"newRange":[[608,0],[608,0]],"oldText":"\n      # Creates a tax rate to tax type association\n      def self.create_tax_rate_tax_type!(data)\n        tax_rate_id = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate]).id\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n\n        association = ::CoreAccounting::Taxes::Models::TaxRateTaxType.new\n        association.tax_rate_id = tax_rate_id\n        association.tax_type_id = tax_type_id\n        association.save!\n      end\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[47,0],[47,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[48,0],[48,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[19,0],[19,0]],"newRange":[[19,0],[20,0]],"oldText":"","newText":"        seed_tax_rates_tax_types(nil)\n"}},{"type":"change","content":{"oldRange":[[46,0],[46,0]],"newRange":[[46,0],[47,0]],"oldText":"","newText":"      end\n"}},{"type":"change","content":{"oldRange":[[48,0],[48,0]],"newRange":[[48,0],[57,0]],"oldText":"","newText":"      # Seed the relation between a tax rate and a tax type\n      def self.seed_tax_rates_tax_types(country=nil, options={})\n        self.print_seeding 'Tax Rates to Tax Types Association'\n        seed_data = get_data(:tax_rates_tax_types, country, :tax_rate, :tax_type)\n\n        seed_data.each do |data|\n          create_tax_rate_tax_type!(data)\n        end\n\n"}},{"type":"change","content":{"oldRange":[[57,0],[58,0]],"newRange":[[57,0],[57,0]],"oldText":"        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n","newText":""}},{"type":"change","content":{"oldRange":[[68,0],[70,0]],"newRange":[[68,0],[68,0]],"oldText":"\n        ::CoreAccounting::Taxes::Models::TaxRate.cache_static_data if options[:cache_static_data]\n","newText":""}},{"type":"change","content":{"oldRange":[[616,0],[616,0]],"newRange":[[616,0],[627,0]],"oldText":"","newText":"\n      # Creates a tax rate to tax type association\n      def self.create_tax_rate_tax_type!(data)\n        tax_rate_id = get_type(::CoreAccounting::Taxes::Models::TaxRate, data[:tax_rate]).id\n        tax_type_id = get_type(::CoreAccounting::Taxes::Models::TaxType, data[:tax_type]).id\n\n        association = ::CoreAccounting::Taxes::Models::TaxRateTaxType.new\n        association.tax_rate_id = tax_rate_id\n        association.tax_type_id = tax_type_id\n        association.save!\n      end\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[58,0],[58,0]],"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/core_accounting.rb","digestWhenLastPersisted":"43ffa9211d73fd69cfb83aa1921421ae32a9e03c","preferredLineEnding":null,"nextMarkerId":6628,"deserializer":"TextBuffer","version":5},{"id":"f9871210fb33329145b62766f7b738a5","text":"# encoding: utf-8\n\nmodule GlobalAccountingBase\n  # Seeds module\n  module Seeds\n    # Base for all seed classes\n    class Base\n      require 'csv'\n\n      # Calls the seed method for each type\n      # Subclasses should implement this\n      #\n      def self.sow\n        raise NotImplementedError\n      end\n\n      private\n\n      # @param data_for [Symbol] the CSV filename\n      # @param args [Array] a list of column names as symbols\n      # @return [Array] an array of hashes with column names as keys\n      def self.get_data(data_for, country=nil, *args)\n        paths = GlobalAccountingBase::Config.config.seed_data_path\n\n        if country\n          paths = paths.select { |x| x[:country] == country }\n        end\n\n        result = []\n\n        paths.each do |path|\n          result += get_data_for_path(data_for, args, path)\n        end\n\n        puts \"Warning - no data found for #{data_for}\" if result.empty?\n\n        result\n      end\n\n      def self.get_data_for_path(data_for, args, path)\n        filename = \"#{path[:path]}/#{data_for.to_s}.csv\"\n\n        result = []\n        if File.exist?(filename)\n          result += CSV.read(filename, :headers => true, :header_converters => :symbol).collect do |row|\n            row.to_hash\n          end\n        end\n\n        result\n      end\n\n      # @param scope_string [String] either a single scope 'sales' or a space-separated list of scopes 'sales income'\n      # @return [Array] an array of scopes as symbols\n      def self.parse_scope(scope_string)\n        return [] unless scope_string\n        scope_string.split.map(&:to_sym)\n      end\n\n      # @param date_string [String] for example '1900-1-1'\n      # @return [Date] a new Date object\n      def self.parse_date(date_string)\n        Date.parse(date_string) if date_string\n      end\n\n      # Cache types by name to avoid constant lookups\n      def self.get_type(type, key, column = 'name')\n        # Set up a hash to store all types\n        @types ||= Hash.new\n        # Set up a store for this type, only the first time\n        @types[type] ||= Hash.new\n        # if value is already instantiated, return it\n        return @types[type][key] if @types[type][key].present?\n        # if not, instantiate, store, and return\n        @types[type][key] = type.where(column.to_sym => key).first\n      end\n\n      # prints the seed title in the console with a consistent look\n      def self.print_seeding(note, title: false)\n        indent = title ? '' : \"  - \"\n        puts \"#{indent}Seeding: #{note}\".ljust(60, '.')\n        # puts '_'*60 if title\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"2":{"range":{"start":{"row":16,"column":6},"end":{"row":16,"column":13}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"3":{"range":{"start":{"row":21,"column":6},"end":{"row":21,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"4":{"range":{"start":{"row":21,"column":41},"end":{"row":21,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"5":{"range":{"start":{"row":24,"column":8},"end":{"row":24,"column":10}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"114":{"range":{"start":{"row":39,"column":6},"end":{"row":39,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"115":{"range":{"start":{"row":39,"column":43},"end":{"row":39,"column":47}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"116":{"range":{"start":{"row":40,"column":46},"end":{"row":40,"column":50}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"117":{"range":{"start":{"row":44,"column":39},"end":{"row":44,"column":50}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"118":{"range":{"start":{"row":44,"column":57},"end":{"row":44,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"119":{"range":{"start":{"row":44,"column":96},"end":{"row":44,"column":104}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"120":{"range":{"start":{"row":54,"column":6},"end":{"row":54,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"121":{"range":{"start":{"row":61,"column":6},"end":{"row":61,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"122":{"range":{"start":{"row":66,"column":6},"end":{"row":66,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"123":{"range":{"start":{"row":68,"column":19},"end":{"row":68,"column":27}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"124":{"range":{"start":{"row":70,"column":25},"end":{"row":70,"column":33}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"125":{"range":{"start":{"row":83,"column":0},"end":{"row":83,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"inside"},"126":{"range":{"start":{"row":83,"column":0},"end":{"row":83,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"inside"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":79,"column":0},"end":{"row":79,"column":0}},"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":47,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[42,19],[42,19]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[42,19],[42,19]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[42,19],[42,19]],"newRange":[[42,19],[43,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[43,0],[43,0]],"newRange":[[43,0],[43,8]],"oldText":"","newText":"        "}},{"type":"change","content":{"oldRange":[[43,8],[43,8]],"newRange":[[43,8],[43,9]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[43,9],[43,9]],"newRange":[[43,9],[43,10]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[43,10],[43,10]],"newRange":[[43,10],[43,11]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[43,10],[43,11]],"newRange":[[43,10],[43,10]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[43,9],[43,10]],"newRange":[[43,9],[43,9]],"oldText":"f","newText":""}},{"type":"change","content":{"oldRange":[[43,8],[43,9]],"newRange":[[43,8],[43,8]],"oldText":"i","newText":""}},{"type":"change","content":{"oldRange":[[43,8],[43,8]],"newRange":[[43,8],[43,9]],"oldText":"","newText":"b"}},{"type":"change","content":{"oldRange":[[43,8],[43,9]],"newRange":[[43,8],[43,8]],"oldText":"b","newText":""}},{"type":"change","content":{"oldRange":[[43,8],[43,8]],"newRange":[[43,8],[43,9]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[43,9],[43,9]],"newRange":[[43,9],[43,10]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[43,10],[43,10]],"newRange":[[43,10],[43,11]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[43,8],[43,11]],"newRange":[[43,8],[43,11]],"oldText":"pry","newText":"pry"}},{"type":"change","content":{"oldRange":[[43,8],[43,11]],"newRange":[[43,8],[43,19]],"oldText":"pry","newText":"binding.pry"}},{"type":"change","content":{"oldRange":[[43,19],[43,19]],"newRange":[[43,19],[43,20]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[43,20],[43,20]],"newRange":[[43,20],[43,21]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[43,21],[43,21]],"newRange":[[43,21],[43,22]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[43,22],[43,22]],"newRange":[[43,22],[43,23]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[43,23],[43,23]],"newRange":[[43,23],[43,24]],"oldText":"","newText":"$"}},{"type":"change","content":{"oldRange":[[43,24],[43,24]],"newRange":[[43,24],[43,25]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[43,25],[43,25]],"newRange":[[43,25],[43,26]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[43,26],[43,26]],"newRange":[[43,26],[43,27]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[43,27],[43,27]],"newRange":[[43,27],[43,28]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[43,28],[43,28]],"newRange":[[43,28],[43,29]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[43,29],[43,29]],"newRange":[[43,29],[43,30]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[43,30],[43,30]],"newRange":[[43,30],[43,31]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[43,31],[43,31]],"newRange":[[43,31],[43,32]],"oldText":"","newText":"1"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[43,32],[43,32]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[43,0],[44,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[43,0],[44,0]],"newRange":[[43,0],[43,0]],"oldText":"        binding.pry if $foo == 1\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[43,0],[43,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[29,0],[29,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[29,0],[29,0]],"newRange":[[29,0],[30,0]],"oldText":"","newText":"        binding.pry if $foo == 1\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[30,0],[30,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":39,"snapshot":{"2":{"1":{"range":[[28,19],[28,19]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[28,19],[28,19]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[28,19],[28,19]],"newRange":[[28,19],[29,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[29,0],[29,0]],"newRange":[[29,0],[29,8]],"oldText":"","newText":"        "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[29,8],[29,8]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[30,6],[30,6]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[29,0],[29,8]],"newRange":[[29,0],[29,0]],"oldText":"        ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[30,6],[30,6]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[29,0],[31,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[29,0],[31,0]],"newRange":[[29,0],[29,0]],"oldText":"\n        binding.pry if $foo == 1\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[29,0],[29,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[86,0],[86,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[76,0],[83,0]],"newRange":[[76,0],[76,0]],"oldText":"\n      # prints the seed title in the console with a consistent look\n      def self.print_seeding(note, title: false)\n        indent = title ? '' : \"  - \"\n        puts \"#{indent}Seeding: #{note}\".ljust(60, '.')\n        # puts '_'*60 if title\n      end\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[79,0],[79,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[79,0],[79,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[76,0],[76,0]],"newRange":[[76,0],[83,0]],"oldText":"","newText":"\n      # prints the seed title in the console with a consistent look\n      def self.print_seeding(note, title: false)\n        indent = title ? '' : \"  - \"\n        puts \"#{indent}Seeding: #{note}\".ljust(60, '.')\n        # puts '_'*60 if title\n      end\n"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[86,0],[86,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward","autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/base.rb","digestWhenLastPersisted":"6e87c16313c57b594fd2d38623ce64266f03d9d8","preferredLineEnding":null,"nextMarkerId":127,"deserializer":"TextBuffer","version":5},{"id":"9074fb6a22ddd04d26490b65820cee6c","text":"module SageOneGacCa\n  module Handlers\n    module QuickStart\n      class Tax\n        # Helper class to gather the data and delegate it to the TaxProfilesProvisioner\n        class TaxProfilesUpdater\n\n          # extract data from the model object\n          def initialize(model, tax_profiles_provisioner_klass: CoreAccounting::Taxes::Support::TaxProfilesProvisioner)\n            @business = model.business\n            @state_id = state_id\n            @collect  = model.collect # boolean from the interface saying if the user collects tax\n\n            @federal_tax_number             = model.federal_tax_number\n            @tax_suffix_number              = model.tax_suffix_number\n            @provincial_tax_number          = model.provincial_tax_number\n            @provincial_tax_suffix_number   = model.provincial_tax_suffix_number\n\n            #dependency injection\n            @tax_profiles_provisioner_klass = tax_profiles_provisioner_klass\n          end\n\n          # Creates tax profiles for each tax type of the given state and saves the user tax numbers on them.\n          # will update tax profiles if they alrady exist.\n          def save_tax_profiles\n            tax_profiles_provisioner = tax_profiles_provisioner_klass.new(business, state_id)\n            tax_profiles_provisioner.provision{ |tax_type| tax_data(tax_type)}\n          end\n\n          private\n          attr_reader :business, :state_id, :federal_tax_number, :tax_suffix_number,\n                      :collect, :provincial_tax_number, :provincial_tax_suffix_number\n          attr_reader :tax_profiles_provisioner_klass\n\n          def state_id\n            business.county.to_i\n          end\n\n          def tax_data(tax_type)\n            tax_type.is_federal? ? federal_tax_data : non_federal_tax_data\n          end\n\n          def federal_tax_data\n            collect_tax = collect != Collect::NOT_COLLECTS_TAX_RATES\n            return federal_tax_number, tax_suffix_number, collect_tax\n          end\n\n          def non_federal_tax_data\n            collect_tax = collect == Collect::COLLECTS_TAX_RATES\n            return provincial_tax_number, provincial_tax_suffix_number, collect_tax\n          end\n        end\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"2":{"range":{"start":{"row":6,"column":0},"end":{"row":6,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"3":{"range":{"start":{"row":18,"column":12},"end":{"row":18,"column":33}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"4":{"range":{"start":{"row":26,"column":46},"end":{"row":26,"column":47}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"5":{"range":{"start":{"row":26,"column":77},"end":{"row":26,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"6":{"range":{"start":{"row":29,"column":10},"end":{"row":29,"column":17}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"7":{"range":{"start":{"row":44,"column":12},"end":{"row":44,"column":18}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"8":{"range":{"start":{"row":49,"column":12},"end":{"row":49,"column":18}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":33,"column":0},"end":{"row":33,"column":0}},"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":2,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_ca/lib/sage_one_gac_ca/handlers/quick_start/tax/tax_profiles_updater.rb","digestWhenLastPersisted":"152742707ba8d89bce461ff0640bdcbc9d24393a","preferredLineEnding":null,"nextMarkerId":15,"deserializer":"TextBuffer","version":5},{"id":"e89a550709e8425cd8b96dd0dcf20236","text":"module GlobalAccountingBase\n  module Handlers\n    module InvoiceTemplates\n      # Template helper object\n      class TemplateHelper\n        attr_reader :business, :user, :artefact, :context, :include_outstanding, :show_base_currency_symbols,\n          :online_payment_options\n\n        def initialize(options={})\n          @business = options[:business]\n          @user = options[:user]\n          @artefact = options[:artefact]\n          @context = options[:context]\n          @include_outstanding = options[:include_outstanding]\n          @show_base_currency_symbols = options[:show_base_currency_symbols]\n          @online_payment_options = options[:online_payment_options]\n        end\n\n        # Renders the header section with given company_partials\n        #\n        # @param company_partials [Array] string array of company partials to render.\n        def header(company_partials)\n          @context.ui :row, html: { id: 'InvoiceHead' } do\n            company_partials.each do |p|\n              @context.ui :partial, \"advanced_uk/partials/pdfs/company_#{p}\", locals: {\n                business: @business,\n                contact_address: @artefact.contact.main_address\n              }\n            end\n          end\n        end\n\n        # Includes stylesheets in the layout\n        #\n        # @param  [Array<String>] handler_styles  Additional stylesheets required by the handler\n        def stylesheets(*handler_styles)\n          target = @context.lookup_context.rendered_format == :pdf ? :pdf_html_head : :head\n          stylesheet_paths(handler_styles).each do |path|\n            @context.content_for(target, \"<style>#{@context.render(file: path)}</style>\".html_safe)\n          end\n        end\n\n        # Renders online payment buttons if options provided\n        def online_payment_buttons\n          @context.ui :online_payment_buttons, @online_payment_options if @online_payment_options\n        end\n\n        # @param tag_type [Symbol] type of tag to render.\n        # @param tag_text [String] text for the tag, defaults to nil.\n        # @param currency [String] currency code, renders additional tag, defaults to nil.\n        # @param css_class [String] additional css classes to apply to the tag, defaults to nil.\n        #\n        # @return [Hash] content for given tag.\n        def tag(tag_type, tag_text=nil, currency=nil, css_class=nil)\n          opts = {widget: :tag, tag_type: tag_type }\n          opts[:tag_text] = { text: tag_text } if tag_text\n          opts[:currency] = { :\"data-currency\" => currency } if currency\n          opts[:css_class] = { class: css_class } if css_class\n          opts\n        end\n\n        # Renders the company registration info: Company Registration number,\n        # Registration location and Registered Office address\n        def company_registration\n          if business.limited_company?\n            @context.ui :partial, 'advanced_uk/partials/pdfs/company_registration_foot',\n              locals: { business: business }\n          end\n        end\n\n        # Renders the artefact contact_name\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        def contact_name(container_type=:pod)\n          render_field('InvoiceName', :contact_name, :contact, container_type, true)\n        end\n\n        # Renders the reference\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        def reference(container_type=:pod)\n          render_field('InvoiceReference', :reference, :reference, container_type)\n        end\n\n        # Renders the invoice number\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        def number(container_type=:pod)\n          render_field('InvoiceNumber', :artefact_number, :artefact_number_formatted, container_type)\n        end\n\n        # Renders the document date\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        def doc_date(container_type=:pod)\n          render_field('InvoiceDate', :date, :date, container_type, true)\n        end\n\n        # Renders due date part of the invoice pdf.\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        def due_date(container_type=:pod)\n          render_field('InvoiceDue', :due_date, :due_date, container_type, true)\n        end\n\n        # Renders contact tax number part of the invoice pdf.\n        def contact_tax_number\n          @context.ui :container, html: { id: 'ContactVatNumber' } do\n            @context.ui :tag, :span, text: I18n.t('invoices_general.pdf.vat_number')\n            @context.ui :tag, :span, text: @artefact.contact.tax_number_formatted\n          end\n        end\n\n        # Renders invoice line_items\n        def line_items\n          row_with 'InvoiceLineItems', 'fuji_invoicing/sales_invoices/line_items'\n        end\n\n        # Renders the EC sales legend\n        def ec_sales_legend(container_type=:row)\n          @context.ui :partial,\n                      'fuji_invoicing/sales_invoices/invoice_templates/ec_sales_legend',\n                      locals: { widget: container_type}\n        end\n\n        # Renders the association logo partial\n        def assoc_logos\n          @context.ui :partial, 'advanced_uk/partials/pdfs/assoc_logo_foot', locals: { business: business }\n        end\n\n        # Renders pod with given html_id and for specified attribute split by whitespace.\n        #\n        # @param html_id [String] html id to apply used in css.\n        # @param attribute [Symbol] attribute of artefact to call e.g. :main_address or :delivery_address.\n        # @param container_type [Symbol] type of container to render, defaults to pod.\n        # @param options [Hash] allows you to change:\n        #   container_options to apply css\n        #   label_position :in/:out of sub container\n        #   join_with - split seperator specify one render on single line\n        #   i18n_attribute - attribute to use for i18n label\n        def multi_line(html_id, attribute, container_type=:pod, options={})\n          options[:container_options] ||= {}\n          options[:label_position] ||= :in\n\n          if options[:i18n_attribute]\n            tag_label = tag(:strong, @artefact.class.human_attribute_name(options[:i18n_attribute]))\n          else\n            tag_label = tag(:strong, @artefact.class.human_attribute_name(attribute))\n          end\n          tag_lines = split_attribute(attribute, options[:join_with])\n\n          @context.ui container_type, html: { id: html_id } do\n            multi_line_section(tag_label, tag_lines, options[:label_position], options[:container_options])\n          end\n        end\n\n        # Renders the discount pod.\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        # @param css_class [String] additional css classes to be applied.\n        def discount(container_type=:pod, css_class=nil)\n          total_section('Discount', :currency_total_discount, :currency_total_discount, nil, container_type, css_class)\n        end\n\n        # Renders the total_net_amount pod.\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        # @param css_class [String] additional css classes to be applied.\n        def total_net_amount(container_type=:pod, css_class=nil)\n          total_section('AmountExTax', :total_net_amount, :currency_total_net_amount, nil, container_type, css_class)\n        end\n\n        # Renders the total_tax_amount pod.\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        # @param css_class [String] additional css classes to be applied.\n        def total_tax_amount(container_type=:pod, css_class=nil)\n          total_section('TotalTaxAmount', :total_tax_amount, :currency_total_tax_amount, nil, container_type, css_class)\n        end\n\n        # Renders a total_payments pod.\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        # @param css_class [String] additional css classes to be applied.\n        def total_payments(container_type=:pod, css_class=nil)\n          total_section('InvoicePayments', :currency_total_payments, :currency_total_payments, nil, container_type,\n                        css_class)\n        end\n\n        # Renders an outstanding pod.\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        # @param css_class [String] additional css classes to be applied.\n        def outstanding(container_type=:pod, css_class=nil)\n          total_section('InvoiceOutstanding', :currency_outstanding, :currency_outstanding,\n                        nil, container_type, css_class)\n        end\n\n        # Renders the invoice total pod.\n        #\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        # @param pull_dir [Symbol] direction to pull the container, defaults to :right\n        def total(container_type=:pod, pull_dir=:right)\n          total_section('InvoiceGrandTotal', :total, :currency_total, pull_dir, container_type)\n        end\n\n        # @param container_type [Symbol] type of container to render, defaults to :pod.\n        #\n        # @return [Hash] Exchange rate pod.\n        def exchange_rate(container_type=:pod)\n          render_field('ExchangeRate', :exchange_rate, :exchange_rate, container_type)\n        end\n\n        # Determines if multi-currency needed\n        #\n        # @return [Boolean] Multi-currency status\n        def multi_currency?\n          @multi_currency ||= @artefact.contact.has_foreign_currency?\n        end\n\n        # Determines if base currency symbols needed\n        #\n        # @return [Boolean] BaseCurrencySymbols status\n        def show_base_currency_symbols?\n          @show_base_currency_symbols\n        end\n\n        # Determines whether to show outstanding amount\n        #\n        # @return [Boolean] Show outstanding flag\n        def show_outstanding?\n          @include_outstanding || @artefact.currency_outstanding < @artefact.currency_total\n        end\n\n        # Determines whether to include tax summary\n        #\n        # @return [Boolean] Include tax summary flag\n        def include_tax_summary?\n          @artefact.taxable? && @artefact.respond_to?(:tax_summary_for)\n        end\n\n        # Renders the tax breakdown\n        def tax_breakdown\n          @context.ui :container, html: { id: 'VatBreakdown'}, pull: :right do\n            if show_base_currency_symbols? || multi_currency?\n              @context.ui :report, vat_summary_data, column_options: tax_breakdown_currency_column_options\n            else\n              @context.ui :report, vat_summary_data\n            end\n          end\n        end\n\n        # Renders the Sage PayNow button\n        def sage_pay_now_button\n          row_with 'InvoiceAction', 'fuji_invoicing/sales_invoices/invoice_templates/sage_pay_now_button'\n        end\n\n        # Render a field with label in a container\n        #\n        # @param  container_id    [String]  HTML ID for container tag\n        # @param  i18n_attribute  [Symbol]  Attribute name to localize for label\n        # @param  attribute       [Symbol]  Attribute name to retrieve value\n        # @param  container_type  [Symbol]  Container type\n        # @param  formatted       [Boolean] Whether to format attribute value\n        def render_field(container_id, i18n_attribute, attribute, container_type, formatted=false)\n          @context.ui container_type, html: { id: container_id } do\n            @context.ui :tag, :strong, text: @artefact.class.human_attribute_name(i18n_attribute)\n\n            tag_text = formatted ? @artefact.send(attribute).formatted : @artefact.send(attribute)\n            @context.ui :tag, :span, text: tag_text\n          end\n        end\n\n        # Render lines wrapped with tag()\n        #\n        # @param  tag_lines [Array] Tag object stack\n        def render_tag_lines(tag_lines)\n          tag_lines.each { |t| @context.ui t[:widget], t[:tag_type], t[:tag_text] }\n        end\n\n        # Render a section of the totals column\n        # @param  html_id         [String]  Container HTML id\n        # @param  i18n_fld        [Symbol]  Name of local translation node\n        # @param  fld             [Symbol]  Name of attribute to display\n        # @param  pull_dir        [Symbol]  Container pull direction\n        # @param  container_type  [Symbol]  Container type\n        # @param  css_class       [String]  Field element CSS class(es)\n        def total_section(html_id, i18n_fld, fld, pull_dir=nil, container_type=:pod, css_class=nil)\n          tag_lines = []\n          tag_lines << tag(:strong, @artefact.class.human_attribute_name(i18n_fld))\n          tag_lines << multi_currency_tag(css_class) if show_base_currency_symbols? || multi_currency?\n\n          tag_lines << tag(:span, @artefact.send(fld).formatted, nil, css_class)\n\n          @context.ui container_type, html: { id: html_id }, pull: pull_dir do\n            tag_lines.each do |t|\n              merge_tag_text! t\n              @context.ui t[:widget], t[:tag_type], t[:tag_text]\n            end\n          end\n        end\n\n        private\n\n        def row_with(html_id, partial)\n          @context.ui :row, html: { id: html_id } do\n            @context.ui :partial, partial\n          end\n        end\n\n        def vat_summary_data\n          report_data = [\n            [I18n.t('tax_breakdown.report.headers.rate'), I18n.t('tax_breakdown.report.headers.net'),\n              I18n.t('tax_breakdown.report.headers.tax'), I18n.t('tax_breakdown.report.headers.total'),\n              { html_options: { class: 'header'}}]\n          ]\n\n          tax_rates.each do |tax_rate|\n            report_data << write_summary(tax_rate) if lines_for?(tax_rate) || carriage_tax_rate?(tax_rate)\n            report_data.uniq!\n          end\n\n          report_data.reject! { |rd | rd[3] == \"0.00\" } # remove zero rows\n          report_data\n        end\n\n        def lines_for?(tax_rate)\n          @artefact.line_items && @artefact.line_items.any? { |line| line.tax_rate_id == tax_rate.id }\n        end\n\n        def carriage_tax_rate?(tax_rate)\n          @artefact.carriage_tax_rate_id && tax_rate.id == @artefact.carriage_tax_rate_id\n        end\n\n        def write_summary(tax_rate)\n          summary = @artefact.tax_summary_for(tax_rate)\n          [tax_rate.formatted, summary[:net].formatted, summary[:tax].formatted, summary[:total].formatted]\n        end\n\n        def tax_breakdown_currency_column_options\n          currency_column_class = { html_options: { class: @artefact.business.base_currency.code }}\n          [nil, currency_column_class, currency_column_class, currency_column_class]\n        end\n\n        def tax_rates\n          context = { state_id: @artefact.state_id }\n          ::CoreAccounting::Taxes::Provider.new(@artefact.business, @artefact.date, context).available\n        end\n\n        def split_attribute(attribute, join_with=nil)\n          tag_lines = []\n\n          if join_with\n            split_data = @artefact.send(attribute).split(/\\n/).join(join_with)\n            tag_lines << tag(:span, split_data)\n          else\n            @artefact.send(attribute).split(/\\n/).each { |line| tag_lines << tag(:span, line) }\n          end\n\n          tag_lines\n        end\n\n        def multi_line_section(tag_label, tag_lines, label_position=:in, container_options={})\n          render_tag_label(tag_label) if label_position == :out\n          @context.ui :container, container_options do\n            render_tag_label(tag_label) if label_position == :in\n            render_tag_lines(tag_lines)\n          end\n        end\n\n        def render_tag_label(tag_label)\n          @context.ui tag_label[:widget], tag_label[:tag_type], tag_label[:tag_text]\n        end\n\n        def merge_tag_text! t\n          t[:tag_text].merge!(t[:currency]) if t[:currency]\n          t[:tag_text].merge!(t[:css_class]) if t[:css_class]\n        end\n\n        def multi_currency_tag(css_class)\n          tag(:span, \"&nbsp;\".html_safe, @artefact.currency.code, \"currency_div #{css_class}\")\n        end\n\n        # Assemble stylesheet paths\n        #\n        # @param  [Array<String>] handler_styles  Additional handler stylesheets\n        # @return [Array<String>] Full stylesheet paths\n        def stylesheet_paths(handler_styles)\n          # Assemble main currency symbols, template, and handler-specific stylesheets\n          css_path = \"#{AdvancedUk::Engine.root}/lib/assets/stylesheets/invoicing/templates/handlers\"\n          paths = [\n            \"#{Rails.root}/public/pdf_styles/currency_symbols.css\",\n            \"#{css_path}/invoice_template_#{@artefact.business.invoice_settings.template_number}.css\",\n          ]\n          handler_styles.each { |style| paths << \"#{css_path}/#{style}\" }\n          paths\n        end\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"200":{"range":{"start":{"row":6,"column":10},"end":{"row":6,"column":33}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"201":{"range":{"start":{"row":8,"column":30},"end":{"row":8,"column":31}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"202":{"range":{"start":{"row":53,"column":34},"end":{"row":53,"column":35}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"203":{"range":{"start":{"row":53,"column":48},"end":{"row":53,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"204":{"range":{"start":{"row":53,"column":63},"end":{"row":53,"column":64}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"205":{"range":{"start":{"row":54,"column":17},"end":{"row":54,"column":18}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"206":{"range":{"start":{"row":66,"column":14},"end":{"row":66,"column":44}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"207":{"range":{"start":{"row":73,"column":39},"end":{"row":73,"column":40}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"208":{"range":{"start":{"row":80,"column":36},"end":{"row":80,"column":37}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"209":{"range":{"start":{"row":87,"column":33},"end":{"row":87,"column":34}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"210":{"range":{"start":{"row":94,"column":35},"end":{"row":94,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"211":{"range":{"start":{"row":101,"column":35},"end":{"row":101,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"212":{"range":{"start":{"row":119,"column":42},"end":{"row":119,"column":43}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"213":{"range":{"start":{"row":122,"column":54},"end":{"row":122,"column":55}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"214":{"range":{"start":{"row":140,"column":8},"end":{"row":140,"column":11}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"215":{"range":{"start":{"row":140,"column":8},"end":{"row":140,"column":75}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"216":{"range":{"start":{"row":140,"column":57},"end":{"row":140,"column":58}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"217":{"range":{"start":{"row":140,"column":71},"end":{"row":140,"column":72}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"218":{"range":{"start":{"row":144,"column":10},"end":{"row":144,"column":37}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"219":{"range":{"start":{"row":160,"column":35},"end":{"row":160,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"220":{"range":{"start":{"row":160,"column":51},"end":{"row":160,"column":52}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"221":{"range":{"start":{"row":168,"column":43},"end":{"row":168,"column":44}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"222":{"range":{"start":{"row":168,"column":59},"end":{"row":168,"column":60}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"223":{"range":{"start":{"row":176,"column":43},"end":{"row":176,"column":44}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"224":{"range":{"start":{"row":176,"column":59},"end":{"row":176,"column":60}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"225":{"range":{"start":{"row":184,"column":41},"end":{"row":184,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"226":{"range":{"start":{"row":184,"column":57},"end":{"row":184,"column":58}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"227":{"range":{"start":{"row":193,"column":38},"end":{"row":193,"column":39}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"228":{"range":{"start":{"row":193,"column":54},"end":{"row":193,"column":55}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"229":{"range":{"start":{"row":202,"column":32},"end":{"row":202,"column":33}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"230":{"range":{"start":{"row":202,"column":47},"end":{"row":202,"column":48}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"231":{"range":{"start":{"row":209,"column":40},"end":{"row":209,"column":41}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"232":{"range":{"start":{"row":243,"column":60},"end":{"row":243,"column":61}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"233":{"range":{"start":{"row":264,"column":91},"end":{"row":264,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"234":{"range":{"start":{"row":287,"column":8},"end":{"row":287,"column":11}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"235":{"range":{"start":{"row":287,"column":25},"end":{"row":287,"column":99}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"236":{"range":{"start":{"row":287,"column":58},"end":{"row":287,"column":59}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"237":{"range":{"start":{"row":287,"column":78},"end":{"row":287,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"238":{"range":{"start":{"row":287,"column":94},"end":{"row":287,"column":95}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"239":{"range":{"start":{"row":310,"column":8},"end":{"row":310,"column":28}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"240":{"range":{"start":{"row":313,"column":14},"end":{"row":313,"column":56}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"241":{"range":{"start":{"row":314,"column":14},"end":{"row":314,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"242":{"range":{"start":{"row":314,"column":47},"end":{"row":314,"column":48}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"243":{"range":{"start":{"row":314,"column":48},"end":{"row":314,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"244":{"range":{"start":{"row":322,"column":35},"end":{"row":322,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"245":{"range":{"start":{"row":322,"column":47},"end":{"row":322,"column":53}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"246":{"range":{"start":{"row":340,"column":98},"end":{"row":340,"column":99}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"298":{"range":{"start":{"row":349,"column":48},"end":{"row":349,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"299":{"range":{"start":{"row":362,"column":67},"end":{"row":362,"column":68}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"300":{"range":{"start":{"row":362,"column":90},"end":{"row":362,"column":91}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"301":{"range":{"start":{"row":374,"column":28},"end":{"row":374,"column":29}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"302":{"range":{"start":{"row":380,"column":21},"end":{"row":380,"column":29}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"303":{"range":{"start":{"row":393,"column":0},"end":{"row":393,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"inside"},"314":{"range":{"start":{"row":347,"column":0},"end":{"row":347,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap"},"334":{"range":{"start":{"row":4,"column":6},"end":{"row":4,"column":26}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":243,"column":10},"end":{"row":243,"column":10}},"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":63,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[346,82],[346,82]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[346,82],[346,82]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[346,82],[346,82]],"newRange":[[346,82],[346,83]],"oldText":"","newText":","}},{"type":"change","content":{"oldRange":[[346,83],[346,83]],"newRange":[[346,83],[346,84]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[346,84],[346,84]],"newRange":[[346,84],[346,85]],"oldText":"","newText":"@"}},{"type":"change","content":{"oldRange":[[346,85],[346,85]],"newRange":[[346,85],[346,86]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[346,86],[346,86]],"newRange":[[346,86],[346,87]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[346,87],[346,87]],"newRange":[[346,87],[346,88]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[346,88],[346,88]],"newRange":[[346,88],[346,89]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[346,85],[346,89]],"newRange":[[346,85],[346,93]],"oldText":"arte","newText":"artefact"}},{"type":"change","content":{"oldRange":[[346,93],[346,93]],"newRange":[[346,93],[346,94]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[346,94],[346,94]],"newRange":[[346,94],[346,95]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[346,95],[346,95]],"newRange":[[346,95],[346,96]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[346,96],[346,96]],"newRange":[[346,96],[346,97]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[346,97],[346,97]],"newRange":[[346,97],[346,98]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[346,98],[346,98]],"newRange":[[346,98],[346,99]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[346,99],[346,99]],"newRange":[[346,99],[346,100]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[346,100],[346,100]],"newRange":[[346,100],[346,101]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[346,101],[346,101]],"newRange":[[346,101],[346,102]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[346,84],[346,84]],"newRange":[[346,84],[346,85]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[346,85],[346,85]],"newRange":[[346,85],[346,86]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[346,86],[346,86]],"newRange":[[346,86],[346,87]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[346,87],[346,87]],"newRange":[[346,87],[346,88]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[346,88],[346,88]],"newRange":[[346,88],[346,89]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[346,89],[346,89]],"newRange":[[346,89],[346,90]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[346,90],[346,90]],"newRange":[[346,90],[346,91]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[346,91],[346,91]],"newRange":[[346,91],[346,92]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[346,92],[346,92]],"newRange":[[346,92],[346,93]],"oldText":"","newText":":"}},{"type":"change","content":{"oldRange":[[346,93],[346,93]],"newRange":[[346,93],[346,94]],"oldText":"","newText":" "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[346,94],[346,94]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":30,"snapshot":{"2":{"1":{"range":[[346,84],[346,84]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[346,84],[346,84]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[346,84],[346,112]],"newRange":[[346,84],[346,84]],"oldText":"state_id: @artefact.state_id","newText":""}},{"type":"change","content":{"oldRange":[[346,84],[346,84]],"newRange":[[346,84],[346,85]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[346,85],[346,85]],"newRange":[[346,85],[346,86]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[346,86],[346,86]],"newRange":[[346,86],[346,87]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[346,87],[346,87]],"newRange":[[346,87],[346,88]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[346,88],[346,88]],"newRange":[[346,88],[346,89]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[346,89],[346,89]],"newRange":[[346,89],[346,90]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[346,90],[346,90]],"newRange":[[346,90],[346,91]],"oldText":"","newText":"t"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[346,91],[346,91]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":40,"snapshot":{"2":{"1":{"range":[[345,21],[345,21]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[345,21],[345,21]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[345,21],[345,21]],"newRange":[[345,21],[346,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[346,0],[346,0]],"newRange":[[346,0],[346,10]],"oldText":"","newText":"          "}},{"type":"change","content":{"oldRange":[[346,10],[346,10]],"newRange":[[346,10],[346,11]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[346,11],[346,11]],"newRange":[[346,11],[346,12]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[346,12],[346,12]],"newRange":[[346,12],[346,13]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[346,13],[346,13]],"newRange":[[346,13],[346,14]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[346,14],[346,14]],"newRange":[[346,14],[346,15]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[346,15],[346,15]],"newRange":[[346,15],[346,16]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[346,16],[346,16]],"newRange":[[346,16],[346,17]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[346,17],[346,17]],"newRange":[[346,17],[346,18]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[346,18],[346,18]],"newRange":[[346,18],[346,19]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[346,19],[346,19]],"newRange":[[346,19],[346,20]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[346,20],[346,20]],"newRange":[[346,20],[346,22]],"oldText":"","newText":"{}"}},{"type":"change","content":{"oldRange":[[346,21],[346,21]],"newRange":[[346,21],[346,49]],"oldText":"","newText":"state_id: @artefact.state_id"}},{"type":"change","content":{"oldRange":[[346,49],[346,49]],"newRange":[[346,49],[346,50]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[346,21],[346,21]],"newRange":[[346,21],[346,22]],"oldText":"","newText":" "}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[346,22],[346,22]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[348,10],[348,10]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[346,0],[346,0]],"newRange":[[346,0],[347,0]],"oldText":"","newText":"          ::CoreAccounting::Taxes::Provider.new(@artefact.business, @artefact.date).available\n"}},{"type":"change","content":{"oldRange":[[347,0],[349,0]],"newRange":[[347,0],[347,0]],"oldText":"          context = { state_id: @artefact.state_id }\n          ::CoreAccounting::Taxes::Provider.new(@artefact.business, @artefact.date, context).available\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[347,10],[347,10]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[348,0],[348,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[346,0],[346,0]],"newRange":[[346,0],[348,0]],"oldText":"","newText":"          context = { state_id: @artefact.state_id }\n          ::CoreAccounting::Taxes::Provider.new(@artefact.business, @artefact.date, context).available\n"}},{"type":"change","content":{"oldRange":[[348,0],[349,0]],"newRange":[[348,0],[348,0]],"oldText":"          ::CoreAccounting::Taxes::Provider.new(@artefact.business, @artefact.date).available\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[349,0],[349,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[348,0],[348,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[36,0],[36,0]],"newRange":[[36,0],[37,0]],"oldText":"","newText":"          target = @context.lookup_context.rendered_format == :pdf ? :pdf_html_head : :head\n"}},{"type":"change","content":{"oldRange":[[38,0],[38,0]],"newRange":[[38,0],[39,0]],"oldText":"","newText":"            @context.content_for(target, \"<style>#{@context.render(file: path)}</style>\".html_safe)\n"}},{"type":"change","content":{"oldRange":[[39,0],[42,0]],"newRange":[[39,0],[39,0]],"oldText":"            @context.content_for(:pdf_html_head) do\n              @context.render_ui(:tag, :link, rel: 'stylesheet', type: 'text/css', media: 'screen, print', href: path)\n            end\n","newText":""}},{"type":"change","content":{"oldRange":[[391,0],[391,0]],"newRange":[[391,0],[393,0]],"oldText":"","newText":"            \"#{Rails.root}/public/pdf_styles/currency_symbols.css\",\n            \"#{css_path}/invoice_template_#{@artefact.business.invoice_settings.template_number}.css\",\n"}},{"type":"change","content":{"oldRange":[[393,0],[395,0]],"newRange":[[393,0],[393,0]],"oldText":"            \"file://#{Rails.root}/public/pdf_styles/currency_symbols.css\",\n            \"file://#{css_path}/invoice_template_#{@artefact.business.invoice_settings.template_number}.css\",\n","newText":""}},{"type":"change","content":{"oldRange":[[394,0],[394,0]],"newRange":[[394,0],[395,0]],"oldText":"","newText":"          handler_styles.each { |style| paths << \"#{css_path}/#{style}\" }\n"}},{"type":"change","content":{"oldRange":[[395,0],[396,0]],"newRange":[[395,0],[395,0]],"oldText":"          handler_styles.each { |style| paths << \"file://#{css_path}/#{style}\" }\n","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[347,0],[347,0]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/invoice_templates/template_helper.rb","digestWhenLastPersisted":"590499183020c5ff18a59c9f6f9e893b4b747fd2","preferredLineEnding":null,"nextMarkerId":339,"deserializer":"TextBuffer","version":5},{"id":"202493e90a66ba2cf3f44b1b4e52dab0","text":"lib/global_accounting_base/matchers/\nlib/global_accounting_base/handlers/features/settings/predefined_settings.rb\n# We understand that a new strategy for seeds is necessary and it does not pay off to try this code at the moment. Victor Martins, Stephen Lloyd-Hirst, Tom Baker\nlib/global_accounting_base/seeds/\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":4,"column":0},"end":{"row":4,"column":0}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2},"42":{"id":"42","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":43,"history":{"version":3,"nextCheckpointId":273,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[1,76],[1,76]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[1,76],[1,76]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[1,76],[1,76]],"newRange":[[1,76],[2,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[2,0],[2,0]],"newRange":[[2,0],[2,0]],"oldText":"","newText":""}},{"type":"change","content":{"oldRange":[[2,0],[2,0]],"newRange":[[2,0],[2,1]],"oldText":"","newText":"l"}},{"type":"change","content":{"oldRange":[[2,1],[2,1]],"newRange":[[2,1],[2,2]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[2,2],[2,2]],"newRange":[[2,2],[2,3]],"oldText":"","newText":"b"}},{"type":"change","content":{"oldRange":[[2,3],[2,3]],"newRange":[[2,3],[2,4]],"oldText":"","newText":"/"}},{"type":"change","content":{"oldRange":[[2,4],[2,4]],"newRange":[[2,4],[2,5]],"oldText":"","newText":"g"}},{"type":"change","content":{"oldRange":[[2,5],[2,5]],"newRange":[[2,5],[2,6]],"oldText":"","newText":"l"}},{"type":"change","content":{"oldRange":[[2,6],[2,6]],"newRange":[[2,6],[2,7]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,7],[2,7]],"newRange":[[2,7],[2,8]],"oldText":"","newText":"b"}},{"type":"change","content":{"oldRange":[[2,8],[2,8]],"newRange":[[2,8],[2,9]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,9],[2,9]],"newRange":[[2,9],[2,10]],"oldText":"","newText":"l"}},{"type":"change","content":{"oldRange":[[2,10],[2,10]],"newRange":[[2,10],[2,11]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[2,11],[2,11]],"newRange":[[2,11],[2,12]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,12],[2,12]],"newRange":[[2,12],[2,13]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[2,13],[2,13]],"newRange":[[2,13],[2,14]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[2,14],[2,14]],"newRange":[[2,14],[2,15]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,15],[2,15]],"newRange":[[2,15],[2,16]],"oldText":"","newText":"u"}},{"type":"change","content":{"oldRange":[[2,16],[2,16]],"newRange":[[2,16],[2,17]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,17],[2,17]],"newRange":[[2,17],[2,18]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,18],[2,18]],"newRange":[[2,18],[2,19]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[2,19],[2,19]],"newRange":[[2,19],[2,20]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,20],[2,20]],"newRange":[[2,20],[2,21]],"oldText":"","newText":"g"}},{"type":"change","content":{"oldRange":[[2,21],[2,21]],"newRange":[[2,21],[2,22]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[2,22],[2,22]],"newRange":[[2,22],[2,23]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,22],[2,23]],"newRange":[[2,22],[2,22]],"oldText":"a","newText":""}},{"type":"change","content":{"oldRange":[[2,22],[2,22]],"newRange":[[2,22],[2,23]],"oldText":"","newText":"b"}},{"type":"change","content":{"oldRange":[[2,23],[2,23]],"newRange":[[2,23],[2,24]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,24],[2,24]],"newRange":[[2,24],[2,25]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,25],[2,25]],"newRange":[[2,25],[2,26]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,26],[2,26]],"newRange":[[2,26],[2,27]],"oldText":"","newText":"/"}},{"type":"change","content":{"oldRange":[[2,27],[2,27]],"newRange":[[2,27],[2,28]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,28],[2,28]],"newRange":[[2,28],[2,29]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,29],[2,29]],"newRange":[[2,29],[2,30]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,30],[2,30]],"newRange":[[2,30],[2,31]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[2,31],[2,31]],"newRange":[[2,31],[2,32]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,32],[2,32]],"newRange":[[2,32],[2,33]],"oldText":"","newText":";"}},{"type":"change","content":{"oldRange":[[2,32],[2,33]],"newRange":[[2,32],[2,32]],"oldText":";","newText":""}},{"type":"change","content":{"oldRange":[[2,32],[2,32]],"newRange":[[2,32],[2,33]],"oldText":"","newText":"/"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[2,33],[2,33]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":45,"snapshot":{"2":{"1":{"range":[[2,33],[2,33]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[2,33],[2,33]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[2,33],[2,33]],"newRange":[[2,33],[2,34]],"oldText":"","newText":"#"}},{"type":"change","content":{"oldRange":[[2,33],[2,34]],"newRange":[[2,33],[2,33]],"oldText":"#","newText":""}},{"type":"change","content":{"oldRange":[[2,33],[2,33]],"newRange":[[2,33],[2,34]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,34],[2,34]],"newRange":[[2,34],[2,35]],"oldText":"","newText":"#"}},{"type":"change","content":{"oldRange":[[2,35],[2,35]],"newRange":[[2,35],[2,36]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,36],[2,36]],"newRange":[[2,36],[2,37]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,37],[2,37]],"newRange":[[2,37],[2,38]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[2,38],[2,38]],"newRange":[[2,38],[2,39]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,39],[2,39]],"newRange":[[2,39],[2,40]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,40],[2,40]],"newRange":[[2,40],[2,41]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[2,41],[2,41]],"newRange":[[2,41],[2,42]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,42],[2,42]],"newRange":[[2,42],[2,43]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,43],[2,43]],"newRange":[[2,43],[2,44]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[2,44],[2,44]],"newRange":[[2,44],[2,45]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,45],[2,45]],"newRange":[[2,45],[2,46]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,46],[2,46]],"newRange":[[2,46],[2,47]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[2,47],[2,47]],"newRange":[[2,47],[2,48]],"oldText":"","newText":"k"}},{"type":"change","content":{"oldRange":[[2,48],[2,48]],"newRange":[[2,48],[2,49]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[2,49],[2,49]],"newRange":[[2,49],[2,50]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,50],[2,50]],"newRange":[[2,50],[2,51]],"oldText":"","newText":"g"}},{"type":"change","content":{"oldRange":[[2,51],[2,51]],"newRange":[[2,51],[2,52]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,51],[2,52]],"newRange":[[2,51],[2,51]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[2,50],[2,51]],"newRange":[[2,50],[2,50]],"oldText":"g","newText":""}},{"type":"change","content":{"oldRange":[[2,49],[2,50]],"newRange":[[2,49],[2,49]],"oldText":"n","newText":""}},{"type":"change","content":{"oldRange":[[2,48],[2,49]],"newRange":[[2,48],[2,48]],"oldText":"i","newText":""}},{"type":"change","content":{"oldRange":[[2,47],[2,48]],"newRange":[[2,47],[2,47]],"oldText":"k","newText":""}},{"type":"change","content":{"oldRange":[[2,46],[2,47]],"newRange":[[2,46],[2,46]],"oldText":"c","newText":""}},{"type":"change","content":{"oldRange":[[2,45],[2,46]],"newRange":[[2,45],[2,45]],"oldText":"a","newText":""}},{"type":"change","content":{"oldRange":[[2,44],[2,45]],"newRange":[[2,44],[2,44]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[2,43],[2,44]],"newRange":[[2,43],[2,43]],"oldText":"p","newText":""}},{"type":"change","content":{"oldRange":[[2,42],[2,43]],"newRange":[[2,42],[2,42]],"oldText":"s","newText":""}},{"type":"change","content":{"oldRange":[[2,41],[2,42]],"newRange":[[2,41],[2,41]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[2,40],[2,41]],"newRange":[[2,40],[2,40]],"oldText":"r","newText":""}},{"type":"change","content":{"oldRange":[[2,39],[2,40]],"newRange":[[2,39],[2,39]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[2,38],[2,39]],"newRange":[[2,38],[2,38]],"oldText":"t","newText":""}},{"type":"change","content":{"oldRange":[[2,37],[2,38]],"newRange":[[2,37],[2,37]],"oldText":"f","newText":""}},{"type":"change","content":{"oldRange":[[2,36],[2,37]],"newRange":[[2,36],[2,36]],"oldText":"a","newText":""}},{"type":"change","content":{"oldRange":[[2,36],[2,36]],"newRange":[[2,36],[2,37]],"oldText":"","newText":"W"}},{"type":"change","content":{"oldRange":[[2,37],[2,37]],"newRange":[[2,37],[2,38]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,38],[2,38]],"newRange":[[2,38],[2,39]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,39],[2,39]],"newRange":[[2,39],[2,40]],"oldText":"","newText":"u"}},{"type":"change","content":{"oldRange":[[2,40],[2,40]],"newRange":[[2,40],[2,41]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,41],[2,41]],"newRange":[[2,41],[2,42]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[2,42],[2,42]],"newRange":[[2,42],[2,43]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,43],[2,43]],"newRange":[[2,43],[2,44]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[2,44],[2,44]],"newRange":[[2,44],[2,45]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,45],[2,45]],"newRange":[[2,45],[2,46]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,46],[2,46]],"newRange":[[2,46],[2,47]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,47],[2,47]],"newRange":[[2,47],[2,48]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,48],[2,48]],"newRange":[[2,48],[2,49]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[2,49],[2,49]],"newRange":[[2,49],[2,50]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,50],[2,50]],"newRange":[[2,50],[2,51]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,51],[2,51]],"newRange":[[2,51],[2,52]],"oldText":"","newText":"h"}},{"type":"change","content":{"oldRange":[[2,52],[2,52]],"newRange":[[2,52],[2,53]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,53],[2,53]],"newRange":[[2,53],[2,54]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,54],[2,54]],"newRange":[[2,54],[2,55]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,55],[2,55]],"newRange":[[2,55],[2,56]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,56],[2,56]],"newRange":[[2,56],[2,57]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,57],[2,57]],"newRange":[[2,57],[2,58]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,58],[2,58]],"newRange":[[2,58],[2,59]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,59],[2,59]],"newRange":[[2,59],[2,60]],"oldText":"","newText":"w"}},{"type":"change","content":{"oldRange":[[2,60],[2,60]],"newRange":[[2,60],[2,61]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,61],[2,61]],"newRange":[[2,61],[2,62]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,62],[2,62]],"newRange":[[2,62],[2,63]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,63],[2,63]],"newRange":[[2,63],[2,64]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[2,64],[2,64]],"newRange":[[2,64],[2,65]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,65],[2,65]],"newRange":[[2,65],[2,66]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,66],[2,66]],"newRange":[[2,66],[2,67]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,67],[2,67]],"newRange":[[2,67],[2,68]],"oldText":"","newText":"g"}},{"type":"change","content":{"oldRange":[[2,68],[2,68]],"newRange":[[2,68],[2,69]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[2,69],[2,69]],"newRange":[[2,69],[2,70]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,70],[2,70]],"newRange":[[2,70],[2,71]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[2,71],[2,71]],"newRange":[[2,71],[2,72]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,72],[2,72]],"newRange":[[2,72],[2,73]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[2,73],[2,73]],"newRange":[[2,73],[2,74]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,74],[2,74]],"newRange":[[2,74],[2,75]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,75],[2,75]],"newRange":[[2,75],[2,76]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,76],[2,76]],"newRange":[[2,76],[2,77]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,77],[2,77]],"newRange":[[2,77],[2,78]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[2,78],[2,78]],"newRange":[[2,78],[2,79]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,79],[2,79]],"newRange":[[2,79],[2,80]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,80],[2,80]],"newRange":[[2,80],[2,81]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[2,81],[2,81]],"newRange":[[2,81],[2,82]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,82],[2,82]],"newRange":[[2,82],[2,83]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,83],[2,83]],"newRange":[[2,83],[2,84]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,84],[2,84]],"newRange":[[2,84],[2,85]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,85],[2,85]],"newRange":[[2,85],[2,86]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[2,86],[2,86]],"newRange":[[2,86],[2,87]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,87],[2,87]],"newRange":[[2,87],[2,88]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,88],[2,88]],"newRange":[[2,88],[2,89]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,89],[2,89]],"newRange":[[2,89],[2,90]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,90],[2,90]],"newRange":[[2,90],[2,91]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[2,91],[2,91]],"newRange":[[2,91],[2,92]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[2,92],[2,92]],"newRange":[[2,92],[2,93]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,93],[2,93]],"newRange":[[2,93],[2,94]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,94],[2,94]],"newRange":[[2,94],[2,95]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,95],[2,95]],"newRange":[[2,95],[2,96]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[2,96],[2,96]],"newRange":[[2,96],[2,97]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,97],[2,97]],"newRange":[[2,97],[2,98]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[2,98],[2,98]],"newRange":[[2,98],[2,99]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,99],[2,99]],"newRange":[[2,99],[2,100]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,100],[2,100]],"newRange":[[2,100],[2,101]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[2,101],[2,101]],"newRange":[[2,101],[2,102]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,102],[2,102]],"newRange":[[2,102],[2,103]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,103],[2,103]],"newRange":[[2,103],[2,104]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,104],[2,104]],"newRange":[[2,104],[2,105]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,105],[2,105]],"newRange":[[2,105],[2,106]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,106],[2,106]],"newRange":[[2,106],[2,107]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,107],[2,107]],"newRange":[[2,107],[2,108]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,108],[2,108]],"newRange":[[2,108],[2,109]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,109],[2,109]],"newRange":[[2,109],[2,110]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[2,110],[2,110]],"newRange":[[2,110],[2,111]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,111],[2,111]],"newRange":[[2,111],[2,112]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[2,112],[2,112]],"newRange":[[2,112],[2,113]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,113],[2,113]],"newRange":[[2,113],[2,114]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,114],[2,114]],"newRange":[[2,114],[2,115]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[2,115],[2,115]],"newRange":[[2,115],[2,116]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[2,116],[2,116]],"newRange":[[2,116],[2,117]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,117],[2,117]],"newRange":[[2,117],[2,118]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,118],[2,118]],"newRange":[[2,118],[2,119]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,119],[2,119]],"newRange":[[2,119],[2,120]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,120],[2,120]],"newRange":[[2,120],[2,121]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,121],[2,121]],"newRange":[[2,121],[2,122]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[2,122],[2,122]],"newRange":[[2,122],[2,123]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[2,123],[2,123]],"newRange":[[2,123],[2,124]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,124],[2,124]],"newRange":[[2,124],[2,125]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,125],[2,125]],"newRange":[[2,125],[2,126]],"oldText":"","newText":"h"}},{"type":"change","content":{"oldRange":[[2,126],[2,126]],"newRange":[[2,126],[2,127]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[2,127],[2,127]],"newRange":[[2,127],[2,128]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,128],[2,128]],"newRange":[[2,128],[2,129]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,129],[2,129]],"newRange":[[2,129],[2,130]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[2,130],[2,130]],"newRange":[[2,130],[2,131]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,131],[2,131]],"newRange":[[2,131],[2,132]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[2,132],[2,132]],"newRange":[[2,132],[2,133]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,133],[2,133]],"newRange":[[2,133],[2,134]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,134],[2,134]],"newRange":[[2,134],[2,135]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,135],[2,135]],"newRange":[[2,135],[2,136]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,136],[2,136]],"newRange":[[2,136],[2,137]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,137],[2,137]],"newRange":[[2,137],[2,138]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,138],[2,138]],"newRange":[[2,138],[2,139]],"oldText":"","newText":"h"}},{"type":"change","content":{"oldRange":[[2,139],[2,139]],"newRange":[[2,139],[2,140]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,140],[2,140]],"newRange":[[2,140],[2,141]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,141],[2,141]],"newRange":[[2,141],[2,142]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[2,142],[2,142]],"newRange":[[2,142],[2,143]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,143],[2,143]],"newRange":[[2,143],[2,144]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[2,144],[2,144]],"newRange":[[2,144],[2,145]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,145],[2,145]],"newRange":[[2,145],[2,146]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,146],[2,146]],"newRange":[[2,146],[2,147]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,147],[2,147]],"newRange":[[2,147],[2,148]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[2,148],[2,148]],"newRange":[[2,148],[2,149]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,149],[2,149]],"newRange":[[2,149],[2,150]],"oldText":"","newText":"V"}},{"type":"change","content":{"oldRange":[[2,150],[2,150]],"newRange":[[2,150],[2,151]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[2,151],[2,151]],"newRange":[[2,151],[2,152]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[2,152],[2,152]],"newRange":[[2,152],[2,153]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,153],[2,153]],"newRange":[[2,153],[2,154]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,154],[2,154]],"newRange":[[2,154],[2,155]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[2,155],[2,155]],"newRange":[[2,155],[2,156]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,156],[2,156]],"newRange":[[2,156],[2,157]],"oldText":"","newText":"M"}},{"type":"change","content":{"oldRange":[[2,157],[2,157]],"newRange":[[2,157],[2,158]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,158],[2,158]],"newRange":[[2,158],[2,159]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[2,159],[2,159]],"newRange":[[2,159],[2,160]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,160],[2,160]],"newRange":[[2,160],[2,161]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[2,161],[2,161]],"newRange":[[2,161],[2,162]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,162],[2,162]],"newRange":[[2,162],[2,163]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,163],[2,163]],"newRange":[[2,163],[2,164]],"oldText":"","newText":","}},{"type":"change","content":{"oldRange":[[2,164],[2,164]],"newRange":[[2,164],[2,165]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,165],[2,165]],"newRange":[[2,165],[2,166]],"oldText":"","newText":"S"}},{"type":"change","content":{"oldRange":[[2,166],[2,166]],"newRange":[[2,166],[2,167]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[2,167],[2,167]],"newRange":[[2,167],[2,168]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,168],[2,168]],"newRange":[[2,168],[2,169]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[2,169],[2,169]],"newRange":[[2,169],[2,170]],"oldText":"","newText":"h"}},{"type":"change","content":{"oldRange":[[2,170],[2,170]],"newRange":[[2,170],[2,171]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,171],[2,171]],"newRange":[[2,171],[2,172]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[2,172],[2,172]],"newRange":[[2,172],[2,173]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,173],[2,173]],"newRange":[[2,173],[2,174]],"oldText":"","newText":"L"}},{"type":"change","content":{"oldRange":[[2,174],[2,174]],"newRange":[[2,174],[2,175]],"oldText":"","newText":"L"}},{"type":"change","content":{"oldRange":[[2,174],[2,175]],"newRange":[[2,174],[2,174]],"oldText":"L","newText":""}},{"type":"change","content":{"oldRange":[[2,174],[2,174]],"newRange":[[2,174],[2,175]],"oldText":"","newText":"l"}},{"type":"change","content":{"oldRange":[[2,175],[2,175]],"newRange":[[2,175],[2,176]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,176],[2,176]],"newRange":[[2,176],[2,177]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[2,177],[2,177]],"newRange":[[2,177],[2,178]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[2,178],[2,178]],"newRange":[[2,178],[2,179]],"oldText":"","newText":","}},{"type":"change","content":{"oldRange":[[2,179],[2,179]],"newRange":[[2,179],[2,180]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,180],[2,180]],"newRange":[[2,180],[2,181]],"oldText":"","newText":"T"}},{"type":"change","content":{"oldRange":[[2,181],[2,181]],"newRange":[[2,181],[2,182]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[2,182],[2,182]],"newRange":[[2,182],[2,183]],"oldText":"","newText":"m"}},{"type":"change","content":{"oldRange":[[2,183],[2,183]],"newRange":[[2,183],[2,184]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,183],[2,184]],"newRange":[[2,183],[2,183]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[2,183],[2,183]],"newRange":[[2,183],[2,184]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[2,184],[2,184]],"newRange":[[2,184],[2,185]],"oldText":"","newText":"B"}},{"type":"change","content":{"oldRange":[[2,185],[2,185]],"newRange":[[2,185],[2,186]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[2,186],[2,186]],"newRange":[[2,186],[2,187]],"oldText":"","newText":"k"}},{"type":"change","content":{"oldRange":[[2,187],[2,187]],"newRange":[[2,187],[2,188]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[2,188],[2,188]],"newRange":[[2,188],[2,189]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[2,178],[2,178]],"newRange":[[2,178],[2,179]],"oldText":"","newText":"-"}},{"type":"change","content":{"oldRange":[[2,179],[2,179]],"newRange":[[2,179],[2,180]],"oldText":"","newText":"H"}},{"type":"change","content":{"oldRange":[[2,180],[2,180]],"newRange":[[2,180],[2,181]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[2,181],[2,181]],"newRange":[[2,181],[2,182]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[2,182],[2,182]],"newRange":[[2,182],[2,183]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[2,183],[2,183]],"newRange":[[2,183],[2,184]],"oldText":"","newText":"t"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[2,184],[2,184]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":265,"snapshot":{"2":{"1":{"range":[[2,34],[2,34]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[2,34],[2,195]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[2,34],[2,195]],"newRange":[[2,34],[2,34]],"oldText":"# We understand that a new strategy for seeds is necessary and it does not pay off to try this code at the moment. Victor Martins, Stephen Lloyd-Hirst, Tom Baker","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[2,34],[2,34]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[1,76],[1,76]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[1,76],[1,76]],"newRange":[[1,76],[2,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[2,0],[2,0]],"newRange":[[2,0],[2,0]],"oldText":"","newText":""}},{"type":"change","content":{"oldRange":[[2,0],[2,0]],"newRange":[[2,0],[2,161]],"oldText":"","newText":"# We understand that a new strategy for seeds is necessary and it does not pay off to try this code at the moment. Victor Martins, Stephen Lloyd-Hirst, Tom Baker"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[2,161],[2,161]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[2,159],[2,159]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[3,33],[3,34]],"newRange":[[3,33],[3,33]],"oldText":" ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[2,159],[2,159]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/.flayignore","digestWhenLastPersisted":"c854c47b7208055de29b25ec83003d95b63bda0d","preferredLineEnding":null,"nextMarkerId":81,"deserializer":"TextBuffer","version":5},{"id":"1f46cf05ba203278f125b2c5f4744dd9","text":"require 'spec_helper'\n\nmodule SopUi\n  class DummyContext < ActionView::Base\n    def ui(widget, *args, &block)\n      yield if block_given?\n    end\n  end\nend\n\nmodule CoreAccounting\n  module Taxes\n    class Provider\n      def initialize(business, date, options={})\n      end\n    end\n  end\nend\n\nmodule AdvancedUk\n  module Engine\n  end\nend\n\nmodule GlobalAccountingBase::Handlers::InvoiceTemplates\n  describe TemplateHelper do\n    let(:user) { double }\n    let(:context) { SopUi::DummyContext.new }\n    let(:artefact) { double }\n\n    subject { described_class.new(user: user, business: business, artefact: artefact, context: context)}\n\n    # TODO Steve - Dave said can we use sop descendants_of_type mechanism instead of the should_receive approach\n\n    describe '#header' do\n      let(:address) { double }\n\n      it 'renders company partials in the order specified' do\n        allow(artefact).to receive_message_chain(:contact, :main_address).and_return(address)\n        allow(context).to receive(:ui).with(:row, html: { id: 'InvoiceHead' }).and_call_original\n        allow(context).to receive(:ui).with(:partial, \"advanced_uk/partials/pdfs/company_foo\",\n                                         locals: { business: business, contact_address: address })\n        allow(context).to receive(:ui).with(:partial, \"advanced_uk/partials/pdfs/company_bar\",\n                                         locals: { business: business, contact_address: address })\n        allow(context).to receive(:ui).with(:partial, \"advanced_uk/partials/pdfs/company_baz\",\n                                         locals: { business: business, contact_address: address })\n        subject.header(%w{foo bar baz})\n      end\n    end\n\n    describe '#stylesheets' do\n      let(:template_num) { 1 }\n      let(:root) { 'advanced_uk' }\n      let(:css_path) { \"#{root}/lib/assets/stylesheets/invoicing/templates/handlers\" }\n      let(:currency_path) { \"#{Rails.root}/public/pdf_styles/currency_symbols.css\" }\n      let(:template_path) { \"#{css_path}/invoice_template_#{template_num}.css\" }\n      let(:style) { 'some CSS' }\n      let(:tags) { \"<style>#{style}</style>\" }\n      let(:format) { :pdf }\n      let(:target) { :pdf_html_head }\n\n      before :each do\n        expect(AdvancedUk::Engine).to receive(:root).and_return(root)\n        expect(artefact).to receive_message_chain(:business, :invoice_settings, :template_number).\n          and_return(template_num)\n        expect(context).to receive_message_chain(:lookup_context, :rendered_format).and_return(format)\n        expect(context).to receive(:render).with(file: currency_path).and_return(style)\n        expect(context).to receive(:render).with(file: template_path).and_return(style)\n        expect(context).to receive(:content_for).with(target, tags).at_least(2).times\n      end\n\n      context 'when no stylesheets provided' do\n        it 'renders required inline stylesheets' do\n          subject.stylesheets\n        end\n      end\n\n      context 'when stylesheets provided' do\n        let(:handler_style) { 'handler_style.css' }\n        let(:handler_path) { \"#{css_path}/#{handler_style}\" }\n\n        it 'renders required and additional stylesheets inline' do\n          expect(context).to receive(:render).with(file: handler_path).and_return(style)\n          subject.stylesheets(handler_style)\n        end\n      end\n\n      context 'when rendering HTML' do\n        let(:format) { :html }\n        let(:target) { :head }\n\n        it 'renders inline stylesheets to HTML layout target' do\n          subject.stylesheets\n        end\n      end\n    end\n\n    describe '#online_payment_buttons' do\n      context 'when no options provided' do\n        it 'does not render buttons widget' do\n          expect(context).not_to receive(:ui)\n          subject.online_payment_buttons\n        end\n      end\n\n      context 'when options provided' do\n        let(:options) { double }\n\n        it 'renders buttons widget' do\n          subject.instance_variable_set(:@online_payment_options, options)\n          expect(context).to receive(:ui).with(:online_payment_buttons, options)\n          subject.online_payment_buttons\n        end\n      end\n    end\n\n    describe '#tag' do\n      it 'returns tag of given type and text' do\n        tag = subject.tag :strong, 'foo'\n        expect(tag[:widget]).to eq :tag\n        expect(tag[:tag_type]).to eq :strong\n        expect(tag[:tag_text]).to eq(text: 'foo')\n      end\n\n      it 'only returns tag text if given' do\n        tag = subject.tag :strong, 'foo'\n        expect(tag[:tag_text]).to eq(text: 'foo')\n\n        tag = subject.tag :strong\n        expect(tag[:tag_text]).to be_nil\n      end\n    end\n\n    describe '#company_registration' do\n      context \"when business is limited company\" do\n        before :each do\n          expect(business).to receive(:limited_company?).and_return(true)\n        end\n\n        it 'renders a partial containing the footer business reg info' do\n          expect(context).to receive(:ui).once.with(:partial,\n            'advanced_uk/partials/pdfs/company_registration_foot',\n            locals: { business: business })\n\n          subject.company_registration\n        end\n      end\n\n      context \"when business is not a limited company\" do\n        before :each do\n          expect(business).to receive(:limited_company?).and_return(false)\n        end\n\n        it 'should not render a partial containing the footer business reg info' do\n          expect(context).not_to receive(:ui).with(:partial)\n\n          subject.company_registration\n        end\n      end\n    end\n\n    describe '#contact_name' do\n      before(:each) do\n        allow(artefact).to receive_message_chain(:contact, :formatted).and_return('my contact name')\n        allow(artefact).to receive_message_chain(:class, :human_attribute_name).and_return('contact label')\n      end\n\n      it 'renders a pod of InvoiceName and a tag for the contact name' do\n        allow(context).to receive(:ui).with(:pod, html: { id: 'InvoiceName'}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"contact label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"my contact name\"})\n        subject.contact_name\n      end\n\n      it 'allows you to override the container type' do\n        allow(context).to receive(:ui).with(:container, html: { id: 'InvoiceName'})\n        subject.contact_name(:container)\n      end\n    end\n\n    describe '#reference' do\n      before(:each) do\n        allow(artefact).to receive(:reference).and_return('my ref')\n        allow(artefact).to receive_message_chain(:class, :human_attribute_name).and_return('Reference label')\n      end\n\n      it 'renders a pod of InvoiceReference and a tag for the reference' do\n        allow(context).to receive(:ui).with(:pod, html: { id: 'InvoiceReference'}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"Reference label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"my ref\"})\n\n        subject.reference\n      end\n\n      it 'allows you to override the container type' do\n        allow(context).to receive(:ui).with(:container, html: { id: 'InvoiceReference'})\n        subject.reference(:container)\n      end\n    end\n\n    describe '#number' do\n      before(:each) do\n        allow(artefact).to receive(:artefact_number_formatted).and_return('xyz123')\n        allow(artefact).to receive(:is_a?).and_return(true)\n        allow(artefact).to receive(:sales_invoice?).and_return(true)\n        allow(artefact).to receive_message_chain(:class, :human_attribute_name).and_return('inv num label')\n      end\n\n      it 'renders a pod of InvoiceNumber and a tag for the number' do\n        allow(context).to receive(:ui).with(:pod, html: { id: 'InvoiceNumber'}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"inv num label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"xyz123\"})\n\n        subject.number\n      end\n\n      it 'allows you to override the container type' do\n        allow(context).to receive(:ui).with(:container, html: { id: 'InvoiceNumber'})\n        subject.number(:container)\n      end\n    end\n\n    describe '#doc_date' do\n      before(:each) do\n        allow(artefact).to receive_message_chain(:date, :formatted).and_return('doc_date_nice')\n        allow(artefact).to receive_message_chain(:class, :human_attribute_name).and_return('doc date label')\n      end\n\n      it 'renders a pod of InvoiceDate and a tag for the document date' do\n        allow(context).to receive(:ui).with(:pod, html: { id: 'InvoiceDate'}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"doc date label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"doc_date_nice\"})\n\n        subject.doc_date\n      end\n\n      it 'allows you to override the container type' do\n        allow(context).to receive(:ui).with(:container, html: { id: 'InvoiceDate'})\n        subject.doc_date(:container)\n      end\n    end\n\n    describe '#due_date' do\n      before(:each) do\n        allow(artefact).to receive_message_chain(:due_date, :formatted).and_return('due_date_nice')\n        allow(artefact).to receive_message_chain(:class, :human_attribute_name).and_return('due date label')\n      end\n\n      it 'renders a pod of InvoiceDue and a tag for the due date' do\n        allow(context).to receive(:ui).with(:pod, html: { id: 'InvoiceDue'}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"due date label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"due_date_nice\"})\n\n        subject.due_date\n      end\n\n      it 'allows you to override the container type' do\n        allow(context).to receive(:ui).with(:container, html: { id: 'InvoiceDue'})\n        subject.due_date(:container)\n      end\n    end\n\n    describe '#contact_tax_number' do\n      it 'renders a pod of ContactVatNumber and a tag for the contact tax_number' do\n        allow(artefact).to receive_message_chain(:contact, :tax_number_formatted).and_return('ABC 123')\n\n        allow(context).to receive(:ui).with(:container, html: { id: 'ContactVatNumber'}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :span, { text: I18n.t('invoices_general.pdf.vat_number')})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"ABC 123\"})\n\n        subject.contact_tax_number\n      end\n    end\n\n    describe '#line_items' do\n      it 'renders the invoice line_items' do\n        allow(context).to receive(:ui).with(:row, html: { id: 'InvoiceLineItems'}).and_call_original\n        allow(context).to receive(:ui).with(:partial, 'fuji_invoicing/sales_invoices/line_items')\n        subject.line_items\n      end\n    end\n\n    describe '#ec_sales_legend' do\n      it 'renders the ec sales legned with a default of row' do\n        allow(context).to receive(:ui).with(:partial,\n                                         'fuji_invoicing/sales_invoices/invoice_templates/ec_sales_legend',\n                                         locals: { widget: :row})\n        subject.ec_sales_legend\n      end\n\n      it 'allows you to customise the widget type in the partial' do\n        allow(context).to receive(:ui).with(:partial,\n                                         'fuji_invoicing/sales_invoices/invoice_templates/ec_sales_legend',\n                                         locals: { widget: :container})\n        subject.ec_sales_legend(:container)\n      end\n    end\n\n    describe '#assoc_logos' do\n      it 'renders the association logos partial' do\n        allow(context).to receive(:ui).with(:partial, 'advanced_uk/partials/pdfs/assoc_logo_foot',\n                                         locals: { business: business})\n        subject.assoc_logos\n      end\n    end\n\n    describe '#multi_line' do\n      let(:artefact_class) { double(human_attribute_name: human_attribute_name)}\n      let(:artefact_second_class) { double(human_attribute_name: human_attribute_foo)}\n      let(:human_attribute_name) { 'multi lines label' }\n      let(:human_attribute_foo) { 'multi foo label' }\n\n      before(:each) do\n        allow(artefact).to receive(:multi_lines).and_return(\"first line\\nsecond line\")\n        allow(artefact).to receive(:class).and_return(artefact_class)\n      end\n\n      it 'renders a pod with a tag for each line break of the attribute' do\n        allow(context).to receive(:ui).with(:pod, :html => { id: 'MyHtmlID' }).and_call_original\n        allow(context).to receive(:ui).with(:container, {}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"multi lines label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"first line\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"second line\"})\n\n        subject.multi_line('MyHtmlID', :multi_lines)\n      end\n\n      it 'renders the outer container with given widget type' do\n        allow(context).to receive(:ui).with(:foo_bar, :html => { id: 'MyHtmlID' }).and_call_original\n        allow(context).to receive(:ui).with(:container, {}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"multi lines label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"first line\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"second line\"})\n\n        subject.multi_line('MyHtmlID', :multi_lines, :foo_bar)\n      end\n\n      it 'allows label to be positioned outside the inner container' do\n        allow(context).to receive(:ui).with(:pod, :html => { id: 'MyHtmlID' }).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"multi lines label\"})\n        allow(context).to receive(:ui).with(:container, {}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"first line\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"second line\"})\n\n        subject.multi_line('MyHtmlID', :multi_lines, :pod, { label_position: :out})\n      end\n\n      it 'allows options to apply css to the inner container' do\n        allow(context).to receive(:ui).with(:pod, :html => { id: 'MyHtmlID' }).and_call_original\n        allow(context).to receive(:ui).with(:container, {html: { class: 'lines'}}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"multi lines label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"first line\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"second line\"})\n\n        subject.multi_line('MyHtmlID', :multi_lines, :pod, { container_options: { html: { class: 'lines' }}})\n      end\n\n      it 'allows the attribute to be joined with given seperator' do\n        allow(context).to receive(:ui).with(:pod, :html => { id: 'MyHtmlID' }).and_call_original\n        allow(context).to receive(:ui).with(:container, {}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"multi lines label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"first line, second line\"})\n\n        subject.multi_line('MyHtmlID', :multi_lines, :pod, { join_with: ', '})\n      end\n\n      it 'allows the i18n_attribute to be different from the attribute' do\n        allow(context).to receive(:ui).with(:pod, :html => { id: 'MyHtmlID' }).and_call_original\n        allow(context).to receive(:ui).with(:container, {}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"multi foo label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"first line\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"second line\"})\n\n        allow(artefact).to receive(:class).and_return(artefact_second_class)\n        subject.multi_line('MyHtmlID', :multi_lines, :pod, { i18n_attribute: :multi_foo})\n      end\n    end\n\n    describe '#discount' do\n      let(:html_id) { 'Discount' }\n      let(:field) { :currency_total_discount }\n      let(:type) { :foo_bar }\n      let(:css) { 'foo bar baz' }\n\n      it 'renders the discount field' do\n        expect(subject).to receive(:total_section).with(html_id, field, field, nil, :pod, nil)\n        subject.discount\n      end\n\n      it 'allows the container to be of any type' do\n        expect(subject).to receive(:total_section).with(html_id, field, field, nil, type, nil)\n        subject.discount(type)\n      end\n\n      it 'allows additional css classes to be applied' do\n        expect(subject).to receive(:total_section).with(html_id, field, field, nil, :pod, css)\n        subject.discount(:pod, css)\n      end\n    end\n\n    describe '#total_net_amount' do\n      let(:html_id) { 'AmountExTax' }\n      let(:i18n) { :total_net_amount }\n      let(:field) { :currency_total_net_amount }\n      let(:type) { :foo_bar }\n      let(:css) { 'foo bar baz' }\n\n      it 'renders the total_net_amount field' do\n        expect(subject).to receive(:total_section).with(html_id, i18n, field, nil, :pod, nil)\n        subject.total_net_amount\n      end\n\n      it 'allows the container to be of any type' do\n        expect(subject).to receive(:total_section).with(html_id, i18n, field, nil, type, nil)\n        subject.total_net_amount(type)\n      end\n\n      it 'allows additional css classes to be applied' do\n        expect(subject).to receive(:total_section).with(html_id, i18n, field, nil, :pod, css)\n        subject.total_net_amount(:pod, css)\n      end\n    end\n\n    describe '#total_tax_amount' do\n      let(:html_id) { 'TotalTaxAmount' }\n      let(:i18n) { :total_tax_amount }\n      let(:field) { :currency_total_tax_amount }\n      let(:type) { :foo_bar }\n      let(:css) { 'foo bar baz' }\n\n      it 'renders the total_tax_amount field' do\n        expect(subject).to receive(:total_section).with(html_id, i18n, field, nil, :pod, nil)\n        subject.total_tax_amount\n      end\n\n      it 'allows the container to be of any type' do\n        expect(subject).to receive(:total_section).with(html_id, i18n, field, nil, type, nil)\n        subject.total_tax_amount(type)\n      end\n\n      it 'allows additional css classes to be applied' do\n        expect(subject).to receive(:total_section).with(html_id, i18n, field, nil, :pod, css)\n        subject.total_tax_amount(:pod, css)\n      end\n    end\n\n    describe '#total_payments' do\n      before(:each) do\n        allow(artefact).to receive_message_chain(:currency_total_payments, :formatted).and_return('my total payment')\n        allow(artefact).to receive_message_chain(:class, :human_attribute_name).with(:currency_total_payments).\n          and_return('total payment label')\n        allow(artefact).to receive_message_chain(:contact, :has_foreign_currency?).and_return(false)\n      end\n\n      context 'multi_currency' do\n        before(:each) do\n          allow(artefact).to receive_message_chain(:contact, :has_foreign_currency?).and_return(true)\n          allow(artefact).to receive_message_chain(:currency, :code).and_return('tom')\n        end\n\n        it 'renders the currency_total_payments field' do\n          expect(context).to receive(:ui).with(:pod, html: { id: 'InvoicePayments'}, pull: nil).and_call_original\n          expect(context).to receive(:ui).with(:tag, :strong, { text: \"total payment label\"})\n          expect(context).to receive(:ui).with(:tag, :span, :\"data-currency\" => 'tom',\n                                           text: \"&nbsp;\".html_safe, class: \"currency_div \")\n          expect(context).to receive(:ui).with(:tag, :span, { text: \"my total payment\"})\n\n          subject.total_payments\n        end\n\n        it 'allows additional css classes to be applied to the multi currency span' do\n          expect(context).to receive(:ui).with(:pod, html: { id: 'InvoicePayments'}, pull: nil).and_call_original\n          expect(context).to receive(:ui).with(:tag, :strong, { text: \"total payment label\"})\n          expect(context).to receive(:ui).with(:tag, :span, :\"data-currency\" => 'tom',\n                                           text: \"&nbsp;\".html_safe, class: \"currency_div foo bar baz\")\n          expect(context).to receive(:ui).with(:tag, :span, { text: \"my total payment\", class: 'foo bar baz'})\n\n          subject.total_payments(:pod, 'foo bar baz')\n        end\n      end\n\n      context 'not multi_currency' do\n        it 'renders the currency_total_payments field' do\n          expect(context).to receive(:ui).with(:pod, html: { id: 'InvoicePayments'}, pull: nil).and_call_original\n          expect(context).to receive(:ui).with(:tag, :strong, { text: \"total payment label\"})\n          expect(context).to receive(:ui).with(:tag, :span, { text: \"my total payment\"})\n\n          subject.total_payments\n        end\n\n        it 'allows the container to be of any type' do\n          expect(context).to receive(:ui).with(:foo_bar, html: { id: 'InvoicePayments'}, pull: nil).and_call_original\n          expect(context).to receive(:ui).with(:tag, :strong, { text: \"total payment label\"})\n          expect(context).to receive(:ui).with(:tag, :span, { text: \"my total payment\"})\n\n          subject.total_payments(:foo_bar)\n        end\n\n        it 'allows additional css classes to be applied' do\n          expect(context).to receive(:ui).with(:pod, html: { id: 'InvoicePayments'}, pull: nil).and_call_original\n          expect(context).to receive(:ui).with(:tag, :strong, { text: \"total payment label\"})\n          expect(context).to receive(:ui).with(:tag, :span, { text: \"my total payment\", class: 'foo bar baz'})\n\n          subject.total_payments(:pod, 'foo bar baz')\n        end\n      end\n    end\n\n    describe '#outstanding' do\n      let(:html_id) { 'InvoiceOutstanding' }\n      let(:field) { :currency_outstanding }\n      let(:type) { :foo_bar }\n      let(:css) { 'foo bar baz' }\n\n      it 'renders the currency_outstanding field' do\n        expect(subject).to receive(:total_section).with(html_id, field, field, nil, :pod, nil)\n        subject.outstanding\n      end\n\n      it 'allows the container to be of any type' do\n        expect(subject).to receive(:total_section).with(html_id, field, field, nil, type, nil)\n        subject.outstanding(type)\n      end\n\n      it 'allows additional css classes to be applied' do\n        expect(subject).to receive(:total_section).with(html_id, field, field, nil, :pod, css)\n        subject.outstanding(:pod, css)\n      end\n    end\n\n    describe '#total' do\n      let(:html_id) { 'InvoiceGrandTotal' }\n      let(:i18n) { :total }\n      let(:field) { :currency_total }\n      let(:type) { :foo_bar }\n      let(:pull) { :left }\n\n      it 'renders the currency_total field' do\n        expect(subject).to receive(:total_section).with(html_id, i18n, field, :right, :pod)\n        subject.total\n      end\n\n      it 'allows the container to be of any type' do\n        expect(subject).to receive(:total_section).with(html_id, i18n, field, :right, type)\n        subject.total(type)\n      end\n\n      it 'allows the pull direction to be set' do\n        expect(subject).to receive(:total_section).with(html_id, i18n, field, pull, :pod)\n        subject.total(:pod, pull)\n      end\n    end\n\n    describe '#exchange_rate' do\n      before(:each) do\n        allow(artefact).to receive(:exchange_rate).and_return('2.34567')\n        allow(artefact).to receive_message_chain(:class, :human_attribute_name).and_return('exchange rate label')\n      end\n\n      it 'renders a pod of ExchangeRate and a tag for the exchange rate' do\n        allow(context).to receive(:ui).with(:pod, html: { id: 'ExchangeRate'}).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, { text: \"exchange rate label\"})\n        allow(context).to receive(:ui).with(:tag, :span, { text: \"2.34567\"})\n\n        subject.exchange_rate\n      end\n\n      it 'allows you to override the container type' do\n        allow(context).to receive(:ui).with(:container, html: { id: 'ExchangeRate'})\n        subject.exchange_rate(:container)\n      end\n    end\n\n    describe '#multi_currency?' do\n      it 'returns result of contact having multi_currency' do\n        allow(artefact).to receive_message_chain(:contact, :has_foreign_currency?).and_return(false)\n        expect(subject).to_not be_multi_currency\n\n        allow(artefact).to receive_message_chain(:contact, :has_foreign_currency?).and_return(true)\n        expect(subject).to be_multi_currency\n      end\n    end\n\n    describe '#include_tax_summary?' do\n      it 'returns result of artefact taxable and responds to tax_summary_for' do\n        allow(artefact).to receive(:taxable?).and_return(false)\n        expect(subject.include_tax_summary?).to be_falsey\n\n        allow(artefact).to receive(:taxable?).and_return(true)\n        expect(subject.include_tax_summary?).to be_falsey\n\n        allow(artefact).to receive(:tax_summary_for)\n        expect(subject.include_tax_summary?).to be_truthy\n      end\n    end\n\n    describe '#show_outstanding?' do\n      it 'returns true if outstanding amount < total or zero' do\n        allow(artefact).to receive(:currency_outstanding).and_return(50)\n        allow(artefact).to receive(:currency_total).and_return(55)\n        expect(subject.show_outstanding?).to be_truthy\n\n        allow(artefact).to receive(:currency_outstanding).and_return(0)\n        expect(subject.show_outstanding?).to be_truthy\n      end\n\n      it 'returns false if outstanding amount == total' do\n        allow(artefact).to receive(:currency_outstanding).and_return(55)\n        allow(artefact).to receive(:currency_total).and_return(55)\n        expect(subject.show_outstanding?).to be_falsey\n      end\n\n      it 'returns true if include_outstanding is true' do\n        foo = described_class.new(user: user, business: business, artefact: artefact, context: context,\n                                  include_outstanding: true)\n        expect(foo.show_outstanding?).to be_truthy\n      end\n    end\n\n    describe '#tax_breakdown' do\n      let(:tax_rate_1) { double( id: 1, formatted: 'Low') }\n      let(:tax_rate_2) { double( id: 2, formatted: 'Medium') }\n      let(:tax_rate_3) { double( id: 3, formatted: 'High') }\n      let(:summary_1) { { net: double(formatted: '100.00'),\n        tax: double(formatted: '10.10'),\n        total: double(formatted: '110.10')}}\n      let(:summary_2) { { net: double(formatted: '200.00'),\n        tax: double(formatted: '20.20'),\n        total: double(formatted: '220.20')}}\n      let(:summary_3) { { net: double(formatted: '300.00'),\n        tax: double(formatted: '30.30'),\n        total: double(formatted: '330.30')}}\n      let(:line1) { double(tax_rate_id: tax_rate_1.id) }\n      let(:line2) { double(tax_rate_id: tax_rate_2.id) }\n      let(:tax_rates) { [tax_rate_1, tax_rate_2, tax_rate_3] }\n      let(:report_data) do\n        [[I18n.t('tax_breakdown.report.headers.rate'),\n          I18n.t('tax_breakdown.report.headers.net'),\n          I18n.t('tax_breakdown.report.headers.tax'),\n          I18n.t('tax_breakdown.report.headers.total'),\n          { html_options: { class: 'header'}}],\n          [\"Low\", \"100.00\", \"10.10\", \"110.10\"],\n          [\"Medium\", \"200.00\", \"20.20\", \"220.20\"],\n          [\"High\", \"300.00\", \"30.30\", \"330.30\"]\n        ]\n      end\n\n      before(:each) do\n        allow(artefact).to receive(:line_items).and_return([line1, line2])\n        allow(artefact).to receive(:carriage_tax_rate_id).and_return(3)\n        allow(artefact).to receive(:date).and_return(Date.today)\n        allow(artefact).to receive(:business).and_return(double)\n        allow(artefact).to receive(:tax_summary_for) do |tax_rate|\n          if tax_rate == tax_rate_1\n            summary_1\n          elsif tax_rate == tax_rate_2\n            summary_2\n          else\n            summary_3\n          end\n        end\n\n        allow_any_instance_of(::CoreAccounting::Taxes::Provider).to receive(:available).and_return(tax_rates)\n      end\n\n      context 'multi_currency' do\n        it 'renders a vat breakdown' do\n          allow(artefact).to receive(:state_id)\n          allow(artefact).to receive_message_chain(:contact, :has_foreign_currency?).and_return(true)\n          allow(artefact).to receive_message_chain(:business, :base_currency, :code).and_return('EUR')\n\n          currency_column_class = { html_options: { class: 'EUR' }}\n          currency_column_options = [nil, currency_column_class, currency_column_class, currency_column_class]\n\n          allow(context).to receive(:ui).with(:container, html: { id: 'VatBreakdown'}, pull: :right).and_call_original\n          allow(context).to receive(:ui).with(:report, report_data, column_options: currency_column_options)\n\n          subject.tax_breakdown\n        end\n      end\n\n      context 'not multi currency' do\n        it 'renders a vat breakdown' do\n          allow(artefact).to receive(:state_id)\n          allow(artefact).to receive_message_chain(:contact, :has_foreign_currency?).and_return(false)\n\n          allow(context).to receive(:ui).with(:container, html: { id: 'VatBreakdown'}, pull: :right).and_call_original\n          allow(context).to receive(:ui).with(:report, report_data)\n\n          subject.tax_breakdown\n        end\n      end\n    end\n\n    describe '#sage_pay_now_button' do\n      it 'renders a sage pay now button' do\n        allow(context).to receive(:ui).with(:row, { html: { id: \"InvoiceAction\"}}).and_call_original\n        allow(context).to receive(:ui).with(:partial,\n                                         'fuji_invoicing/sales_invoices/invoice_templates/sage_pay_now_button')\n\n        subject.sage_pay_now_button\n      end\n    end\n\n    describe '#render_field' do\n      let(:id) { 'MyContainerId' }\n      let(:attrib) { :my_value }\n      let(:type) { :pod }\n      let(:label) { 'container label' }\n      let(:value) { 'field value' }\n\n      before :each do\n        allow(artefact).to receive_message_chain(:class, :human_attribute_name).and_return(label)\n        allow(artefact).to receive(attrib).and_return(value)\n      end\n\n      it 'renders a field with a label and value' do\n        allow(context).to receive(:ui).with(type, html: { id: id }).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, text: label).and_call_original\n        allow(context).to receive(:ui).with(:tag, :span, text: value).and_call_original\n\n        subject.render_field(id, :label, attrib, type)\n      end\n\n      it 'formats the value if requested' do\n        allow(value).to receive(:formatted).and_return(value.upcase)\n        allow(context).to receive(:ui).with(type, html: { id: id }).and_call_original\n        allow(context).to receive(:ui).with(:tag, :strong, text: label).and_call_original\n        allow(context).to receive(:ui).with(:tag, :span, text: value.upcase).and_call_original\n\n        subject.render_field(id, :label, attrib, type, true)\n      end\n    end\n\n    describe '#render_tag_lines' do\n      it 'renders a tag for each line' do\n        tags = []\n        [ 'Line One', 'Line Two', 'Line Three' ].each do |line|\n          ltag = subject.tag(:span, line)\n          tags << ltag\n          expect(context).to receive(:ui).with(ltag[:widget], ltag[:tag_type], ltag[:tag_text]).and_call_original\n        end\n        subject.render_tag_lines(tags)\n      end\n    end\n\n    describe '#total_section' do\n      let(:ts_id) { 'TsFieldId' }\n      let(:ts_i18n) { :ts_i18n_fld }\n      let(:ts_fld) { :ts_field }\n      let(:ts_label) { 'Total Label' }\n      let(:ts_amt) { '42.13' }\n\n      before(:each) do\n        allow(artefact).to receive_message_chain(:class, :human_attribute_name).with(ts_i18n).and_return(ts_label)\n        allow(artefact).to receive_message_chain(:contact, :has_foreign_currency?).and_return(false)\n        allow(artefact).to receive_message_chain(ts_fld, :formatted).and_return(ts_amt)\n\n        expect(context).to receive(:ui).with(:tag, :strong, { text: ts_label })\n      end\n\n      context 'not multi_currency' do\n        let(:sc_pull) { :left }\n        let(:sc_type) { :container }\n        let(:sc_class) { 'quux zed' }\n\n        it 'renders the discount field' do\n          expect(context).to receive(:ui).with(:pod, html: { id: ts_id }, pull: nil).and_call_original\n          expect(context).to receive(:ui).with(:tag, :span, { text: ts_amt })\n\n          subject.total_section(ts_id, ts_i18n, ts_fld)\n        end\n\n        it 'allows pull direction, container type, and CSS classes to be specified' do\n          expect(context).to receive(:ui).with(sc_type, html: { id: ts_id }, pull: sc_pull).and_call_original\n          expect(context).to receive(:ui).with(:tag, :span, { text: ts_amt, class: sc_class })\n\n          subject.total_section(ts_id, ts_i18n, ts_fld, sc_pull, sc_type, sc_class)\n        end\n      end\n\n      context 'multi_currency' do\n        let(:mc_code) { 'ABC' }\n        let(:mc_pull) { :right }\n        let(:mc_type) { :container }\n        let(:mc_class) { 'foo bar baz' }\n\n        before(:each) do\n          allow(artefact).to receive_message_chain(:contact, :has_foreign_currency?).and_return(true)\n          allow(artefact).to receive_message_chain(:currency, :code).and_return(mc_code)\n        end\n\n        it 'renders the discount field' do\n          expect(context).to receive(:ui).with(:pod, html: { id: ts_id }, pull: nil).and_call_original\n          expect(context).to receive(:ui).with(:tag, :span, :\"data-currency\" => mc_code,\n                                               text: '&nbsp;'.html_safe, class: 'currency_div ')\n          expect(context).to receive(:ui).with(:tag, :span, { text: ts_amt })\n\n          subject.total_section(ts_id, ts_i18n, ts_fld)\n        end\n\n        it 'allows pull direction, container type, and CSS classes to be specified' do\n          expect(context).to receive(:ui).with(mc_type, html: { id: ts_id }, pull: mc_pull).and_call_original\n          expect(context).to receive(:ui).with(:tag, :span, :\"data-currency\" => mc_code,\n                                               text: '&nbsp;'.html_safe, class: \"currency_div #{mc_class}\")\n          expect(context).to receive(:ui).with(:tag, :span, { text: ts_amt, class: mc_class })\n\n          subject.total_section(ts_id, ts_i18n, ts_fld, mc_pull, mc_type, mc_class)\n        end\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"293":{"range":{"start":{"row":667,"column":36},"end":{"row":667,"column":46}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap"},"411":{"range":{"start":{"row":3,"column":2},"end":{"row":3,"column":7}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"412":{"range":{"start":{"row":4,"column":11},"end":{"row":4,"column":17}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"413":{"range":{"start":{"row":4,"column":20},"end":{"row":4,"column":24}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"414":{"range":{"start":{"row":4,"column":27},"end":{"row":4,"column":32}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"415":{"range":{"start":{"row":12,"column":4},"end":{"row":12,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"416":{"range":{"start":{"row":13,"column":44},"end":{"row":13,"column":45}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"417":{"range":{"start":{"row":20,"column":2},"end":{"row":20,"column":8}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"419":{"range":{"start":{"row":24,"column":0},"end":{"row":24,"column":6}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"420":{"range":{"start":{"row":24,"column":7},"end":{"row":24,"column":55}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"421":{"range":{"start":{"row":30,"column":103},"end":{"row":30,"column":104}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"422":{"range":{"start":{"row":32,"column":6},"end":{"row":32,"column":11}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"423":{"range":{"start":{"row":40,"column":54},"end":{"row":40,"column":93}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"424":{"range":{"start":{"row":41,"column":41},"end":{"row":41,"column":97}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"425":{"range":{"start":{"row":42,"column":54},"end":{"row":42,"column":93}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"426":{"range":{"start":{"row":43,"column":41},"end":{"row":43,"column":97}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"427":{"range":{"start":{"row":44,"column":54},"end":{"row":44,"column":93}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"428":{"range":{"start":{"row":45,"column":41},"end":{"row":45,"column":97}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"429":{"range":{"start":{"row":46,"column":23},"end":{"row":46,"column":38}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"430":{"range":{"start":{"row":63,"column":97},"end":{"row":63,"column":98}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"431":{"range":{"start":{"row":134,"column":14},"end":{"row":134,"column":48}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"432":{"range":{"start":{"row":141,"column":12},"end":{"row":141,"column":65}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"433":{"range":{"start":{"row":142,"column":12},"end":{"row":142,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"434":{"range":{"start":{"row":148,"column":14},"end":{"row":148,"column":54}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"435":{"range":{"start":{"row":168,"column":75},"end":{"row":168,"column":76}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"436":{"range":{"start":{"row":169,"column":59},"end":{"row":169,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"437":{"range":{"start":{"row":169,"column":67},"end":{"row":169,"column":82}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"438":{"range":{"start":{"row":169,"column":82},"end":{"row":169,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"439":{"range":{"start":{"row":170,"column":57},"end":{"row":170,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"440":{"range":{"start":{"row":170,"column":65},"end":{"row":170,"column":82}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"441":{"range":{"start":{"row":170,"column":82},"end":{"row":170,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"442":{"range":{"start":{"row":175,"column":81},"end":{"row":175,"column":82}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"443":{"range":{"start":{"row":187,"column":80},"end":{"row":187,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"444":{"range":{"start":{"row":188,"column":59},"end":{"row":188,"column":85}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"445":{"range":{"start":{"row":188,"column":67},"end":{"row":188,"column":84}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"446":{"range":{"start":{"row":188,"column":84},"end":{"row":188,"column":85}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"447":{"range":{"start":{"row":189,"column":57},"end":{"row":189,"column":74}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"448":{"range":{"start":{"row":189,"column":65},"end":{"row":189,"column":73}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"449":{"range":{"start":{"row":189,"column":73},"end":{"row":189,"column":74}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"450":{"range":{"start":{"row":195,"column":86},"end":{"row":195,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"451":{"range":{"start":{"row":209,"column":77},"end":{"row":209,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"452":{"range":{"start":{"row":210,"column":59},"end":{"row":210,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"453":{"range":{"start":{"row":210,"column":67},"end":{"row":210,"column":82}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"454":{"range":{"start":{"row":210,"column":82},"end":{"row":210,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"455":{"range":{"start":{"row":211,"column":57},"end":{"row":211,"column":74}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"456":{"range":{"start":{"row":211,"column":65},"end":{"row":211,"column":73}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"457":{"range":{"start":{"row":211,"column":73},"end":{"row":211,"column":74}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"458":{"range":{"start":{"row":217,"column":83},"end":{"row":217,"column":84}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"459":{"range":{"start":{"row":229,"column":75},"end":{"row":229,"column":76}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"460":{"range":{"start":{"row":230,"column":59},"end":{"row":230,"column":84}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"461":{"range":{"start":{"row":230,"column":67},"end":{"row":230,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"462":{"range":{"start":{"row":230,"column":83},"end":{"row":230,"column":84}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"463":{"range":{"start":{"row":231,"column":57},"end":{"row":231,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"464":{"range":{"start":{"row":231,"column":65},"end":{"row":231,"column":80}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"465":{"range":{"start":{"row":231,"column":80},"end":{"row":231,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"466":{"range":{"start":{"row":237,"column":81},"end":{"row":237,"column":82}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"467":{"range":{"start":{"row":249,"column":74},"end":{"row":249,"column":75}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"468":{"range":{"start":{"row":250,"column":59},"end":{"row":250,"column":84}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"469":{"range":{"start":{"row":250,"column":67},"end":{"row":250,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"470":{"range":{"start":{"row":250,"column":83},"end":{"row":250,"column":84}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"471":{"range":{"start":{"row":251,"column":57},"end":{"row":251,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"472":{"range":{"start":{"row":251,"column":65},"end":{"row":251,"column":80}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"473":{"range":{"start":{"row":251,"column":80},"end":{"row":251,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"474":{"range":{"start":{"row":257,"column":80},"end":{"row":257,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"475":{"range":{"start":{"row":266,"column":86},"end":{"row":266,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"476":{"range":{"start":{"row":267,"column":57},"end":{"row":267,"column":107}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"477":{"range":{"start":{"row":267,"column":106},"end":{"row":267,"column":107}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"478":{"range":{"start":{"row":268,"column":57},"end":{"row":268,"column":75}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"479":{"range":{"start":{"row":268,"column":65},"end":{"row":268,"column":74}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"480":{"range":{"start":{"row":268,"column":74},"end":{"row":268,"column":75}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"481":{"range":{"start":{"row":276,"column":80},"end":{"row":276,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"482":{"range":{"start":{"row":285,"column":41},"end":{"row":285,"column":106}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"483":{"range":{"start":{"row":286,"column":41},"end":{"row":286,"column":64}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"484":{"range":{"start":{"row":286,"column":63},"end":{"row":286,"column":64}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"485":{"range":{"start":{"row":292,"column":41},"end":{"row":292,"column":106}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"486":{"range":{"start":{"row":293,"column":41},"end":{"row":293,"column":70}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"487":{"range":{"start":{"row":293,"column":69},"end":{"row":293,"column":70}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"488":{"range":{"start":{"row":301,"column":41},"end":{"row":301,"column":70}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"489":{"range":{"start":{"row":301,"column":69},"end":{"row":301,"column":70}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"490":{"range":{"start":{"row":307,"column":79},"end":{"row":307,"column":80}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"491":{"range":{"start":{"row":308,"column":85},"end":{"row":308,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"492":{"range":{"start":{"row":318,"column":50},"end":{"row":318,"column":58}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"493":{"range":{"start":{"row":320,"column":59},"end":{"row":320,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"494":{"range":{"start":{"row":320,"column":67},"end":{"row":320,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"495":{"range":{"start":{"row":320,"column":86},"end":{"row":320,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"496":{"range":{"start":{"row":321,"column":57},"end":{"row":321,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"497":{"range":{"start":{"row":321,"column":65},"end":{"row":321,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"498":{"range":{"start":{"row":321,"column":77},"end":{"row":321,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"499":{"range":{"start":{"row":322,"column":57},"end":{"row":322,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"500":{"range":{"start":{"row":322,"column":65},"end":{"row":322,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"501":{"range":{"start":{"row":322,"column":78},"end":{"row":322,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"502":{"range":{"start":{"row":328,"column":54},"end":{"row":328,"column":62}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"503":{"range":{"start":{"row":330,"column":59},"end":{"row":330,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"504":{"range":{"start":{"row":330,"column":67},"end":{"row":330,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"505":{"range":{"start":{"row":330,"column":86},"end":{"row":330,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"506":{"range":{"start":{"row":331,"column":57},"end":{"row":331,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"507":{"range":{"start":{"row":331,"column":65},"end":{"row":331,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"508":{"range":{"start":{"row":331,"column":77},"end":{"row":331,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"509":{"range":{"start":{"row":332,"column":57},"end":{"row":332,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"510":{"range":{"start":{"row":332,"column":65},"end":{"row":332,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"511":{"range":{"start":{"row":332,"column":78},"end":{"row":332,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"512":{"range":{"start":{"row":338,"column":50},"end":{"row":338,"column":58}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"513":{"range":{"start":{"row":339,"column":59},"end":{"row":339,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"514":{"range":{"start":{"row":339,"column":67},"end":{"row":339,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"515":{"range":{"start":{"row":339,"column":86},"end":{"row":339,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"516":{"range":{"start":{"row":341,"column":57},"end":{"row":341,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"517":{"range":{"start":{"row":341,"column":65},"end":{"row":341,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"518":{"range":{"start":{"row":341,"column":77},"end":{"row":341,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"519":{"range":{"start":{"row":342,"column":57},"end":{"row":342,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"520":{"range":{"start":{"row":342,"column":65},"end":{"row":342,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"521":{"range":{"start":{"row":342,"column":78},"end":{"row":342,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"522":{"range":{"start":{"row":344,"column":59},"end":{"row":344,"column":82}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"523":{"range":{"start":{"row":344,"column":81},"end":{"row":344,"column":82}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"524":{"range":{"start":{"row":348,"column":50},"end":{"row":348,"column":58}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"525":{"range":{"start":{"row":349,"column":56},"end":{"row":349,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"526":{"range":{"start":{"row":349,"column":56},"end":{"row":349,"column":57}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"527":{"range":{"start":{"row":349,"column":79},"end":{"row":349,"column":80}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"528":{"range":{"start":{"row":349,"column":80},"end":{"row":349,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"529":{"range":{"start":{"row":350,"column":59},"end":{"row":350,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"530":{"range":{"start":{"row":350,"column":67},"end":{"row":350,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"531":{"range":{"start":{"row":350,"column":86},"end":{"row":350,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"532":{"range":{"start":{"row":351,"column":57},"end":{"row":351,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"533":{"range":{"start":{"row":351,"column":65},"end":{"row":351,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"534":{"range":{"start":{"row":351,"column":77},"end":{"row":351,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"535":{"range":{"start":{"row":352,"column":57},"end":{"row":352,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"536":{"range":{"start":{"row":352,"column":65},"end":{"row":352,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"537":{"range":{"start":{"row":352,"column":78},"end":{"row":352,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"538":{"range":{"start":{"row":354,"column":59},"end":{"row":354,"column":108}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"539":{"range":{"start":{"row":354,"column":106},"end":{"row":354,"column":107}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"540":{"range":{"start":{"row":354,"column":107},"end":{"row":354,"column":108}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"541":{"range":{"start":{"row":358,"column":50},"end":{"row":358,"column":58}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"542":{"range":{"start":{"row":360,"column":59},"end":{"row":360,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"543":{"range":{"start":{"row":360,"column":67},"end":{"row":360,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"544":{"range":{"start":{"row":360,"column":86},"end":{"row":360,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"545":{"range":{"start":{"row":361,"column":57},"end":{"row":361,"column":91}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"546":{"range":{"start":{"row":361,"column":65},"end":{"row":361,"column":90}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"547":{"range":{"start":{"row":361,"column":90},"end":{"row":361,"column":91}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"548":{"range":{"start":{"row":363,"column":59},"end":{"row":363,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"549":{"range":{"start":{"row":363,"column":76},"end":{"row":363,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"550":{"range":{"start":{"row":367,"column":50},"end":{"row":367,"column":58}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"551":{"range":{"start":{"row":369,"column":59},"end":{"row":369,"column":85}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"552":{"range":{"start":{"row":369,"column":67},"end":{"row":369,"column":84}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"553":{"range":{"start":{"row":369,"column":84},"end":{"row":369,"column":85}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"554":{"range":{"start":{"row":370,"column":57},"end":{"row":370,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"555":{"range":{"start":{"row":370,"column":65},"end":{"row":370,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"556":{"range":{"start":{"row":370,"column":77},"end":{"row":370,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"557":{"range":{"start":{"row":371,"column":57},"end":{"row":371,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"558":{"range":{"start":{"row":371,"column":65},"end":{"row":371,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"559":{"range":{"start":{"row":371,"column":78},"end":{"row":371,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"560":{"range":{"start":{"row":374,"column":59},"end":{"row":374,"column":88}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"561":{"range":{"start":{"row":374,"column":87},"end":{"row":374,"column":88}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"562":{"range":{"start":{"row":449,"column":110},"end":{"row":449,"column":111}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"563":{"range":{"start":{"row":461,"column":82},"end":{"row":461,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"564":{"range":{"start":{"row":462,"column":62},"end":{"row":462,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"565":{"range":{"start":{"row":462,"column":70},"end":{"row":462,"column":91}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"566":{"range":{"start":{"row":462,"column":91},"end":{"row":462,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"567":{"range":{"start":{"row":464,"column":43},"end":{"row":464,"column":67}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"568":{"range":{"start":{"row":464,"column":49},"end":{"row":464,"column":57}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"569":{"range":{"start":{"row":464,"column":76},"end":{"row":464,"column":91}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"570":{"range":{"start":{"row":465,"column":60},"end":{"row":465,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"571":{"range":{"start":{"row":465,"column":68},"end":{"row":465,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"572":{"range":{"start":{"row":465,"column":86},"end":{"row":465,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"573":{"range":{"start":{"row":471,"column":82},"end":{"row":471,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"574":{"range":{"start":{"row":472,"column":62},"end":{"row":472,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"575":{"range":{"start":{"row":472,"column":70},"end":{"row":472,"column":91}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"576":{"range":{"start":{"row":472,"column":91},"end":{"row":472,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"577":{"range":{"start":{"row":474,"column":43},"end":{"row":474,"column":67}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"578":{"range":{"start":{"row":474,"column":49},"end":{"row":474,"column":57}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"579":{"range":{"start":{"row":474,"column":76},"end":{"row":474,"column":102}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"580":{"range":{"start":{"row":475,"column":60},"end":{"row":475,"column":109}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"581":{"range":{"start":{"row":475,"column":68},"end":{"row":475,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"582":{"range":{"start":{"row":475,"column":108},"end":{"row":475,"column":109}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"583":{"range":{"start":{"row":483,"column":82},"end":{"row":483,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"584":{"range":{"start":{"row":484,"column":62},"end":{"row":484,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"585":{"range":{"start":{"row":484,"column":70},"end":{"row":484,"column":91}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"586":{"range":{"start":{"row":484,"column":91},"end":{"row":484,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"587":{"range":{"start":{"row":485,"column":60},"end":{"row":485,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"588":{"range":{"start":{"row":485,"column":68},"end":{"row":485,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"589":{"range":{"start":{"row":485,"column":86},"end":{"row":485,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"590":{"range":{"start":{"row":491,"column":86},"end":{"row":491,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"591":{"range":{"start":{"row":492,"column":62},"end":{"row":492,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"592":{"range":{"start":{"row":492,"column":70},"end":{"row":492,"column":91}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"593":{"range":{"start":{"row":492,"column":91},"end":{"row":492,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"594":{"range":{"start":{"row":493,"column":60},"end":{"row":493,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"595":{"range":{"start":{"row":493,"column":68},"end":{"row":493,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"596":{"range":{"start":{"row":493,"column":86},"end":{"row":493,"column":87}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"597":{"range":{"start":{"row":499,"column":82},"end":{"row":499,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"598":{"range":{"start":{"row":500,"column":62},"end":{"row":500,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"599":{"range":{"start":{"row":500,"column":70},"end":{"row":500,"column":91}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"600":{"range":{"start":{"row":500,"column":91},"end":{"row":500,"column":92}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"601":{"range":{"start":{"row":501,"column":60},"end":{"row":501,"column":109}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"602":{"range":{"start":{"row":501,"column":68},"end":{"row":501,"column":86}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"603":{"range":{"start":{"row":501,"column":108},"end":{"row":501,"column":109}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"604":{"range":{"start":{"row":560,"column":76},"end":{"row":560,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"605":{"range":{"start":{"row":561,"column":59},"end":{"row":561,"column":89}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"606":{"range":{"start":{"row":561,"column":67},"end":{"row":561,"column":88}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"607":{"range":{"start":{"row":561,"column":88},"end":{"row":561,"column":89}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"608":{"range":{"start":{"row":562,"column":57},"end":{"row":562,"column":75}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"609":{"range":{"start":{"row":562,"column":65},"end":{"row":562,"column":74}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"610":{"range":{"start":{"row":562,"column":74},"end":{"row":562,"column":75}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"611":{"range":{"start":{"row":568,"column":82},"end":{"row":568,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"612":{"range":{"start":{"row":620,"column":32},"end":{"row":620,"column":33}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"613":{"range":{"start":{"row":621,"column":32},"end":{"row":621,"column":33}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"614":{"range":{"start":{"row":622,"column":32},"end":{"row":622,"column":33}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"615":{"range":{"start":{"row":623,"column":22},"end":{"row":623,"column":23}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"616":{"range":{"start":{"row":623,"column":24},"end":{"row":623,"column":59}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"617":{"range":{"start":{"row":624,"column":8},"end":{"row":624,"column":39}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"618":{"range":{"start":{"row":625,"column":8},"end":{"row":625,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"619":{"range":{"start":{"row":625,"column":42},"end":{"row":625,"column":43}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"620":{"range":{"start":{"row":625,"column":43},"end":{"row":625,"column":44}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"621":{"range":{"start":{"row":626,"column":22},"end":{"row":626,"column":23}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"622":{"range":{"start":{"row":626,"column":24},"end":{"row":626,"column":59}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"623":{"range":{"start":{"row":627,"column":8},"end":{"row":627,"column":39}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"624":{"range":{"start":{"row":628,"column":8},"end":{"row":628,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"625":{"range":{"start":{"row":628,"column":42},"end":{"row":628,"column":43}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"626":{"range":{"start":{"row":628,"column":43},"end":{"row":628,"column":44}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"627":{"range":{"start":{"row":629,"column":22},"end":{"row":629,"column":23}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"628":{"range":{"start":{"row":629,"column":24},"end":{"row":629,"column":59}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"629":{"range":{"start":{"row":630,"column":8},"end":{"row":630,"column":39}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"630":{"range":{"start":{"row":631,"column":8},"end":{"row":631,"column":42}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"631":{"range":{"start":{"row":631,"column":42},"end":{"row":631,"column":43}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"632":{"range":{"start":{"row":631,"column":43},"end":{"row":631,"column":44}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"633":{"range":{"start":{"row":640,"column":43},"end":{"row":640,"column":44}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"634":{"range":{"start":{"row":640,"column":44},"end":{"row":640,"column":45}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"635":{"range":{"start":{"row":641,"column":10},"end":{"row":641,"column":46}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"636":{"range":{"start":{"row":641,"column":11},"end":{"row":641,"column":16}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"637":{"range":{"start":{"row":641,"column":18},"end":{"row":641,"column":26}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"638":{"range":{"start":{"row":641,"column":28},"end":{"row":641,"column":35}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"639":{"range":{"start":{"row":641,"column":37},"end":{"row":641,"column":45}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"640":{"range":{"start":{"row":642,"column":10},"end":{"row":642,"column":49}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"641":{"range":{"start":{"row":642,"column":11},"end":{"row":642,"column":19}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"642":{"range":{"start":{"row":642,"column":21},"end":{"row":642,"column":29}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"643":{"range":{"start":{"row":642,"column":31},"end":{"row":642,"column":38}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"644":{"range":{"start":{"row":642,"column":40},"end":{"row":642,"column":48}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"645":{"range":{"start":{"row":643,"column":10},"end":{"row":643,"column":47}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"646":{"range":{"start":{"row":643,"column":11},"end":{"row":643,"column":17}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"647":{"range":{"start":{"row":643,"column":19},"end":{"row":643,"column":27}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"648":{"range":{"start":{"row":643,"column":29},"end":{"row":643,"column":36}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"649":{"range":{"start":{"row":643,"column":38},"end":{"row":643,"column":46}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"650":{"range":{"start":{"row":671,"column":66},"end":{"row":671,"column":67}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"651":{"range":{"start":{"row":674,"column":84},"end":{"row":674,"column":85}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"678":{"range":{"start":{"row":683,"column":46},"end":{"row":683,"column":47}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap"},"679":{"range":{"start":{"row":683,"column":36},"end":{"row":683,"column":37}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap"},"680":{"range":{"start":{"row":24,"column":0},"end":{"row":24,"column":55}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"681":{"range":{"start":{"row":686,"column":84},"end":{"row":686,"column":85}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"682":{"range":{"start":{"row":696,"column":50},"end":{"row":696,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"683":{"range":{"start":{"row":696,"column":64},"end":{"row":696,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"684":{"range":{"start":{"row":696,"column":79},"end":{"row":696,"column":80}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"685":{"range":{"start":{"row":696,"column":80},"end":{"row":696,"column":81}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"686":{"range":{"start":{"row":698,"column":41},"end":{"row":698,"column":110}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"687":{"range":{"start":{"row":737,"column":9},"end":{"row":737,"column":10}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"688":{"range":{"start":{"row":737,"column":46},"end":{"row":737,"column":47}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"689":{"range":{"start":{"row":758,"column":60},"end":{"row":758,"column":78}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"690":{"range":{"start":{"row":768,"column":60},"end":{"row":768,"column":76}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"691":{"range":{"start":{"row":775,"column":60},"end":{"row":775,"column":93}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"692":{"range":{"start":{"row":795,"column":47},"end":{"row":795,"column":71}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"693":{"range":{"start":{"row":796,"column":60},"end":{"row":796,"column":76}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"694":{"range":{"start":{"row":804,"column":47},"end":{"row":804,"column":71}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"695":{"range":{"start":{"row":805,"column":60},"end":{"row":805,"column":93}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":683,"column":46},"end":{"row":683,"column":46}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":54,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[667,25],[667,25]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[667,25],[667,25]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[666,39],[666,39]],"newRange":[[666,39],[667,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[667,0],[667,0]],"newRange":[[667,0],[667,10]],"oldText":"","newText":"          "}},{"type":"change","content":{"oldRange":[[667,10],[667,10]],"newRange":[[667,10],[667,25]],"oldText":"","newText":"allow(artefact)"}},{"type":"change","content":{"oldRange":[[667,25],[667,25]],"newRange":[[667,25],[667,26]],"oldText":"","newText":"."}},{"type":"change","content":{"oldRange":[[667,26],[667,26]],"newRange":[[667,26],[667,27]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[667,27],[667,27]],"newRange":[[667,27],[667,28]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[667,28],[667,28]],"newRange":[[667,28],[667,29]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[667,29],[667,29]],"newRange":[[667,29],[667,30]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[667,30],[667,30]],"newRange":[[667,30],[667,31]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[667,31],[667,31]],"newRange":[[667,31],[667,32]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[667,32],[667,32]],"newRange":[[667,32],[667,33]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[667,33],[667,33]],"newRange":[[667,33],[667,34]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[667,34],[667,34]],"newRange":[[667,34],[667,35]],"oldText":"","newText":"v"}},{"type":"change","content":{"oldRange":[[667,35],[667,35]],"newRange":[[667,35],[667,36]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[667,36],[667,36]],"newRange":[[667,36],[667,38]],"oldText":"","newText":"()"}},{"type":"change","content":{"oldRange":[[667,37],[667,37]],"newRange":[[667,37],[667,38]],"oldText":"","newText":":"}},{"type":"change","content":{"oldRange":[[667,38],[667,38]],"newRange":[[667,38],[667,39]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[667,39],[667,39]],"newRange":[[667,39],[667,40]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[667,40],[667,40]],"newRange":[[667,40],[667,41]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[667,41],[667,41]],"newRange":[[667,41],[667,42]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[667,42],[667,42]],"newRange":[[667,42],[667,43]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[667,43],[667,43]],"newRange":[[667,43],[667,44]],"oldText":"","newText":"_"}},{"type":"change","content":{"oldRange":[[667,44],[667,44]],"newRange":[[667,44],[667,45]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[667,45],[667,45]],"newRange":[[667,45],[667,46]],"oldText":"","newText":"d"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[667,46],[667,46]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":30,"snapshot":{"2":{"1":{"range":[[13,36],[13,36]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[13,36],[13,36]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[13,35],[13,35]],"newRange":[[13,35],[13,36]],"oldText":"","newText":","}},{"type":"change","content":{"oldRange":[[13,36],[13,36]],"newRange":[[13,36],[13,37]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[13,37],[13,37]],"newRange":[[13,37],[13,38]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[13,38],[13,38]],"newRange":[[13,38],[13,39]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[13,39],[13,39]],"newRange":[[13,39],[13,40]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[13,40],[13,40]],"newRange":[[13,40],[13,41]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[13,41],[13,41]],"newRange":[[13,41],[13,42]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[13,42],[13,42]],"newRange":[[13,42],[13,43]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[13,43],[13,43]],"newRange":[[13,43],[13,44]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[13,44],[13,44]],"newRange":[[13,44],[13,45]],"oldText":"","newText":"-"}},{"type":"change","content":{"oldRange":[[13,44],[13,45]],"newRange":[[13,44],[13,44]],"oldText":"-","newText":""}},{"type":"change","content":{"oldRange":[[13,44],[13,44]],"newRange":[[13,44],[13,45]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[13,45],[13,45]],"newRange":[[13,45],[13,47]],"oldText":"","newText":"{}"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[13,47],[13,47]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":47,"snapshot":{"2":{"1":{"range":[[667,46],[667,46]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[667,46],[667,46]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[682,39],[682,39]],"newRange":[[682,39],[683,0]],"oldText":"","newText":"\n"}},{"type":"change","content":{"oldRange":[[683,0],[683,0]],"newRange":[[683,0],[683,10]],"oldText":"","newText":"          "}},{"type":"change","content":{"oldRange":[[683,10],[683,10]],"newRange":[[683,10],[683,47]],"oldText":"","newText":"allow(artefact).to receive(:state_id)"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[683,47],[683,47]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/invoice_templates/template_helper_spec.rb","digestWhenLastPersisted":"89ec45205935c903129228953e65f2062f2dfbee","preferredLineEnding":null,"nextMarkerId":699,"deserializer":"TextBuffer","version":5},{"id":"2bfd92ca2737367e8a3fc1ae426670f2","text":"require 'spec_helper'\n\nmodule GlobalAccountingBase::RuleHelpers\n\n  describe Tax do\n    class DummyTaxProvider\n      attr_accessor :business, :date\n\n      def initialize(business, date, options={})\n        @business = business\n        @date = date\n      end\n    end\n\n    let(:tax_rate) { double( combined?: false ) }\n    let(:control_type) { :sales }\n    let(:control_name) { :sales_type }\n\n    let(:taxable_object) {\n      double(\n        tax_rate: tax_rate,\n        tax_amount: 40,\n        net_amount: 200,\n        tax_rate_percentage: 20,\n        tax_rate_id: 5\n      )\n    }\n    let(:artefact) { double(business: double(id: 1), date: Date.today) }\n    subject { described_class.new(artefact) }\n\n    before :each do\n      GlobalAccountingBase::Config.config do |c|\n        c.tax_provider_class = DummyTaxProvider\n      end\n      allow_any_instance_of(DummyTaxProvider).to receive(:percentage_for_tax_rate_id).and_return(BigDecimal('321'))\n      allow_any_instance_of(DummyTaxProvider).to receive(:tax_rate_for_id).and_return(tax_rate)\n      allow_any_instance_of(DummyTaxProvider).to receive(:control_name_for_tax_rate)\n        .with(control_type, taxable_object.tax_rate_id)\n        .and_return(control_name)\n    end\n\n    describe '#percentage_for_tax_rate_id' do\n      it 'returns percentage for a given tax rate id' do\n        expect(subject.percentage_for_tax_rate_id(999)).to eql 321\n      end\n    end\n\n    describe '#for_tax_rate' do\n      context 'when combined tax rate' do\n        let(:sub_rate1) { double(amount: 33, percentage: 3, tax_rate_id: 6) }\n        let(:sub_rate2) { double(amount: 44, percentage: 4, tax_rate_id: 7) }\n        let(:tax_rate) { double( combined?: true)}\n        let(:provider) { double(tax_rate_for_id: tax_rate)}\n        let(:taxable_object) {\n          double( net_amount: 1, tax_rate: tax_rate, tax_amount: 1, tax_rate_id: 6 )\n        }\n\n        context 'when is_carriage=false' do\n          context 'when taxable_object responds to :net_amount' do\n            before :each do\n              allow(tax_rate).to receive(:split_amount_by_sub_rates).with(taxable_object.tax_amount)\n              .and_return([sub_rate1, sub_rate2])\n\n              [sub_rate1, sub_rate2].each do |sub_rate|\n                allow_any_instance_of(DummyTaxProvider).to receive(:control_name_for_tax_rate)\n                .with(control_type, sub_rate.tax_rate_id)\n                .and_return(control_name)\n              end\n            end\n\n            context 'when control type is sales' do\n              it 'yields with correct values, for each tax rate' do\n                expect { |b| subject.for_tax_rate(taxable_object, control_type: control_type, is_carriage: false, &b) }\n                    .to yield_successive_args(\n                    [sub_rate1.amount, sub_rate1.tax_rate_id, sub_rate1.percentage,\n                     taxable_object.net_amount, control_name],\n                    [sub_rate2.amount, sub_rate2.tax_rate_id, sub_rate2.percentage,\n                     taxable_object.net_amount, control_name]\n                )\n              end\n            end\n\n            context 'when control type is purchases' do\n              let(:control_type) { :purchases }\n\n              it 'yields with correct values, for each tax rate' do\n                expect { |b| subject.for_tax_rate(taxable_object, control_type: control_type, is_carriage: false, &b) }\n                    .to yield_successive_args(\n                    [sub_rate1.amount, sub_rate1.tax_rate_id, sub_rate1.percentage,\n                     taxable_object.net_amount, control_name],\n                    [sub_rate2.amount, sub_rate2.tax_rate_id, sub_rate2.percentage,\n                     taxable_object.net_amount, control_name]\n                )\n              end\n            end\n\n            context 'when control type does not exist' do\n              let(:control_type) { nil }\n              it 'yields with correct values, for each tax rate' do\n                expect { |b| subject.for_tax_rate(taxable_object, control_type: control_type, is_carriage: false, &b) }\n                  .to yield_successive_args(\n                    [sub_rate1.amount, sub_rate1.tax_rate_id, sub_rate1.percentage, taxable_object.net_amount, ''],\n                    [sub_rate2.amount, sub_rate2.tax_rate_id, sub_rate2.percentage, taxable_object.net_amount, '']\n                )\n              end\n            end\n          end\n\n          context 'when taxable_object DOES NOT respond to :net_amount' do\n            let(:taxable_object) {\n              double(\n                tax_rate: tax_rate,\n                total_net_amount: 400,\n                tax_rate_percentage: 20,\n                tax_rate_id: 5,\n                total_tax_amount: 5\n              )\n            }\n\n            before :each do\n              allow(tax_rate).to receive(:split_amount_by_sub_rates).with(taxable_object.total_tax_amount)\n              .and_return([sub_rate1, sub_rate2])\n\n\n              [sub_rate1, sub_rate2].each do |sub_rate|\n                allow_any_instance_of(DummyTaxProvider)\n                .to receive(:control_name_for_tax_rate).with(control_type, sub_rate.tax_rate_id)\n                .and_return(control_name)\n              end\n            end\n\n            it 'yields with correct values, for each tax rate' do\n              expect { |b| subject.for_tax_rate(taxable_object, control_type: control_type, is_carriage: false, &b) }\n                .to yield_successive_args(\n                [sub_rate1.amount, sub_rate1.tax_rate_id, sub_rate1.percentage,\n                 taxable_object.total_net_amount, control_name],\n                [sub_rate2.amount, sub_rate2.tax_rate_id, sub_rate2.percentage,\n                 taxable_object.total_net_amount, control_name]\n              )\n            end\n          end\n        end\n\n        context 'when is_carriage=true' do\n          before do\n            allow(taxable_object).to receive(:carriage_tax_rate).and_return(tax_rate)\n            allow(taxable_object).to receive(:carriage_tax_amount).and_return(10)\n            allow(taxable_object).to receive(:carriage_net_amount).and_return(30)\n            allow(taxable_object).to receive(:carriage_tax_rate_id).and_return(8)\n\n            allow(tax_rate).to receive(:split_amount_by_sub_rates).with(taxable_object.carriage_tax_amount)\n            .and_return([sub_rate1, sub_rate2])\n\n\n            [sub_rate1, sub_rate2].each do |sub_rate|\n              allow_any_instance_of(DummyTaxProvider)\n                .to receive(:control_name_for_tax_rate).with(control_type, sub_rate.tax_rate_id)\n                .and_return(control_name)\n            end\n          end\n\n          it 'yields with correct values, for each tax rate' do\n            expect { |b| subject.for_tax_rate(taxable_object, control_type: control_type, is_carriage: true, &b) }\n              .to yield_successive_args(\n              [sub_rate1.amount, sub_rate1.tax_rate_id, sub_rate1.percentage,\n               taxable_object.carriage_net_amount, control_name],\n              [sub_rate2.amount, sub_rate2.tax_rate_id, sub_rate2.percentage,\n               taxable_object.carriage_net_amount, control_name]\n            )\n          end\n        end\n      end\n\n      context 'when a single tax rate' do\n        context 'when is_carriage=false' do\n          context 'when taxable_object responds to :tax_amount' do\n            it 'yields with correct values, once' do\n              expect { |b| subject.for_tax_rate(taxable_object, control_type: control_type, is_carriage: false, &b) }\n                .to yield_successive_args([\n                taxable_object.tax_amount,\n                taxable_object.tax_rate_id,\n                taxable_object.tax_rate_percentage,\n                taxable_object.net_amount,\n                control_name\n            ])\n            end\n          end\n          context 'when taxable_object DOES NOT respond to :tax_amount' do\n            let(:taxable_object) {\n              double(\n                tax_rate: tax_rate,\n                total_tax_amount: 80,\n                total_net_amount: 400,\n                tax_rate_percentage: 20,\n                tax_rate_id: 5\n              )\n            }\n\n            it 'yields with correct values, once' do\n              expect { |b| subject.for_tax_rate(taxable_object, control_type: control_type, is_carriage: false, &b) }\n                .to yield_successive_args([\n                taxable_object.total_tax_amount,\n                taxable_object.tax_rate_id,\n                taxable_object.tax_rate_percentage,\n                taxable_object.total_net_amount,\n                control_name\n            ])\n            end\n          end\n        end\n\n        context 'when is_carriage=true' do\n          before do\n            allow(taxable_object).to receive(:carriage_tax_rate).and_return(tax_rate)\n            allow(taxable_object).to receive(:carriage_tax_amount).and_return(10)\n            allow(taxable_object).to receive(:carriage_net_amount).and_return(30)\n            allow(taxable_object).to receive(:carriage_tax_rate_id).and_return(8)\n            allow(taxable_object).to receive(:carriage_tax_rate_percentage).and_return(33)\n\n            allow_any_instance_of(DummyTaxProvider).to receive(:control_name_for_tax_rate)\n              .with(control_type, taxable_object.carriage_tax_rate_id)\n              .and_return(control_name)\n          end\n\n          it 'yields with correct values, once' do\n            expect { |b| subject.for_tax_rate(taxable_object, control_type: control_type, is_carriage: true, &b) }\n              .to yield_successive_args([\n              taxable_object.carriage_tax_amount,\n              taxable_object.carriage_tax_rate_id,\n              taxable_object.carriage_tax_rate_percentage,\n              taxable_object.carriage_net_amount,\n              control_name\n            ])\n          end\n        end\n      end\n    end\n  end\nend\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"111":{"range":{"start":{"row":2,"column":0},"end":{"row":2,"column":40}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"112":{"range":{"start":{"row":2,"column":0},"end":{"row":2,"column":6}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"113":{"range":{"start":{"row":2,"column":7},"end":{"row":2,"column":40}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"114":{"range":{"start":{"row":3,"column":0},"end":{"row":3,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"115":{"range":{"start":{"row":5,"column":4},"end":{"row":5,"column":9}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"116":{"range":{"start":{"row":8,"column":37},"end":{"row":8,"column":44}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"117":{"range":{"start":{"row":8,"column":44},"end":{"row":8,"column":45}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"118":{"range":{"start":{"row":14,"column":28},"end":{"row":14,"column":29}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"119":{"range":{"start":{"row":14,"column":45},"end":{"row":14,"column":46}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"120":{"range":{"start":{"row":18,"column":25},"end":{"row":18,"column":26}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"121":{"range":{"start":{"row":51,"column":32},"end":{"row":51,"column":33}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"122":{"range":{"start":{"row":51,"column":49},"end":{"row":51,"column":50}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"123":{"range":{"start":{"row":52,"column":58},"end":{"row":52,"column":59}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"124":{"range":{"start":{"row":53,"column":29},"end":{"row":53,"column":30}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"125":{"range":{"start":{"row":54,"column":17},"end":{"row":54,"column":18}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"126":{"range":{"start":{"row":54,"column":82},"end":{"row":54,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"127":{"range":{"start":{"row":61,"column":14},"end":{"row":61,"column":25}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"128":{"range":{"start":{"row":65,"column":16},"end":{"row":65,"column":21}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"129":{"range":{"start":{"row":66,"column":16},"end":{"row":66,"column":27}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"130":{"range":{"start":{"row":73,"column":20},"end":{"row":73,"column":23}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"131":{"range":{"start":{"row":74,"column":20},"end":{"row":74,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"132":{"range":{"start":{"row":78,"column":16},"end":{"row":78,"column":17}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"133":{"range":{"start":{"row":87,"column":20},"end":{"row":87,"column":23}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"134":{"range":{"start":{"row":88,"column":20},"end":{"row":88,"column":83}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"135":{"range":{"start":{"row":92,"column":16},"end":{"row":92,"column":17}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"136":{"range":{"start":{"row":103,"column":16},"end":{"row":103,"column":17}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"137":{"range":{"start":{"row":109,"column":33},"end":{"row":109,"column":34}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"138":{"range":{"start":{"row":121,"column":14},"end":{"row":121,"column":25}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"139":{"range":{"start":{"row":123,"column":0},"end":{"row":123,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"140":{"range":{"start":{"row":126,"column":16},"end":{"row":126,"column":19}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"141":{"range":{"start":{"row":127,"column":16},"end":{"row":127,"column":27}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"142":{"range":{"start":{"row":134,"column":16},"end":{"row":134,"column":79}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"143":{"range":{"start":{"row":138,"column":14},"end":{"row":138,"column":15}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"144":{"range":{"start":{"row":151,"column":12},"end":{"row":151,"column":23}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"145":{"range":{"start":{"row":153,"column":0},"end":{"row":153,"column":0}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"146":{"range":{"start":{"row":164,"column":14},"end":{"row":164,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"147":{"range":{"start":{"row":168,"column":12},"end":{"row":168,"column":13}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"148":{"range":{"start":{"row":179,"column":16},"end":{"row":179,"column":41}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"149":{"range":{"start":{"row":184,"column":12},"end":{"row":184,"column":13}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"150":{"range":{"start":{"row":188,"column":33},"end":{"row":188,"column":34}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"151":{"range":{"start":{"row":201,"column":16},"end":{"row":201,"column":47}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"152":{"range":{"start":{"row":206,"column":12},"end":{"row":206,"column":13}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"153":{"range":{"start":{"row":227,"column":14},"end":{"row":227,"column":48}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"},"154":{"range":{"start":{"row":232,"column":12},"end":{"row":232,"column":13}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"inside"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":20,"column":26},"end":{"row":20,"column":26}},"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":13,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[8,36],[8,36]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[8,36],[8,36]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[8,35],[8,35]],"newRange":[[8,35],[8,36]],"oldText":"","newText":","}},{"type":"change","content":{"oldRange":[[8,36],[8,36]],"newRange":[[8,36],[8,37]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[8,37],[8,37]],"newRange":[[8,37],[8,38]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[8,38],[8,38]],"newRange":[[8,38],[8,39]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[8,39],[8,39]],"newRange":[[8,39],[8,40]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[8,40],[8,40]],"newRange":[[8,40],[8,41]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[8,37],[8,41]],"newRange":[[8,37],[8,44]],"oldText":"opti","newText":"options"}},{"type":"change","content":{"oldRange":[[8,44],[8,44]],"newRange":[[8,44],[8,45]],"oldText":"","newText":"="}},{"type":"change","content":{"oldRange":[[8,45],[8,45]],"newRange":[[8,45],[8,47]],"oldText":"","newText":"{}"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[8,47],[8,47]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/rule_helpers/tax_spec.rb","digestWhenLastPersisted":"d0bc83c5e285864a6691f41fbd627ae14bfe78cb","preferredLineEnding":null,"nextMarkerId":157,"deserializer":"TextBuffer","version":5},{"id":"9c30e02b952b27364a2ccd7e3be51d28","text":"flay:\n  max: 2328\nflog:\n  max: 32.4\n  average: 6.4\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":1,"column":9},"end":{"row":1,"column":9}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":6,"history":{"version":3,"nextCheckpointId":13,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[1,11],[1,11]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[1,11],[1,11]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[1,10],[1,11]],"newRange":[[1,10],[1,10]],"oldText":"4","newText":""}},{"type":"change","content":{"oldRange":[[1,9],[1,10]],"newRange":[[1,9],[1,9]],"oldText":"9","newText":""}},{"type":"change","content":{"oldRange":[[1,8],[1,9]],"newRange":[[1,8],[1,8]],"oldText":"7","newText":""}},{"type":"change","content":{"oldRange":[[1,7],[1,8]],"newRange":[[1,7],[1,7]],"oldText":"2","newText":""}},{"type":"change","content":{"oldRange":[[1,7],[1,7]],"newRange":[[1,7],[1,11]],"oldText":"","newText":"2328"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[1,11],[1,11]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/fudge_settings.yml","digestWhenLastPersisted":"f94d2e3a03dd59f14c1bf38c4f3bfd08385398f7","preferredLineEnding":null,"nextMarkerId":4,"deserializer":"TextBuffer","version":5},{"id":"454af7365e2406780aab962a914c70ec","text":"# Version NEXT\n\n### Changes\n\n* [SE-518](https://sageone.atlassian.net/browse/SE-518) - Added seeds for Tax Rates Tax Types associations\n\n# Version 10.11.0\n\n### Changes\n* [SJ-181](https://sageone.atlassian.net/browse/SJ-181) - Make invoice template stylesheets inline\n\n# Version 10.10.0\n\n### Changes\n* [SE-641](https://sageone.atlassian.net/browse/SE-641) - Make Tax inclusive on catalog items configurable\n* Correctly setup the reporting submenu for tax_return.\n\n# Version 10.9.0\n\n### Changes\n* [AC-527](https://sageone.atlassian.net/browse/AC-527) K1 - Editing or deleting allocation on VCA incorrectly dealt with on VAT return\n\n# Version 10.8.0\n\n### Changes\n* [SE-481](https://sageone.atlassian.net/browse/SE-481) - Tax submission frequency and tax type assocaitions\n\n# Version 10.7.0\n\n### Changes\n* Added new tax submission frequency types (Annually, Bi Annually, Four Monthly)\n* Change reporting menu header to accomodate Canadian Tax Returns (moving away from advanced_uk engine)\n\n# Version 10.6.0\n\n### Changes\n* [SD-512](https://sageone.atlassian.net/browse/SD-512) - Adds identifier to seeded ledger account types.\n* [SD-452](https://sageone.atlassian.net/browse/SD-452) - Adds identifier to seeded coa group types.\n* [SD-500](https://sageone.atlassian.net/browse/SD-500) - Adds identifier to seeded pearls types.\n* [SD-496](https://sageone.atlassian.net/browse/SD-496) - Adds identifier to seeded period types.\n* [SD-428](https://sageone.atlassian.net/browse/SD-428) - Adds identifier to seeded artefact statuses.\n* [SD-504](https://sageone.atlassian.net/browse/SD-504) - Adds identifier to seeded payment types.\n* [SD-436](https://sageone.atlassian.net/browse/SD-436) - Adds identifier to seeded bank payment types.\n* [SD-440](https://sageone.atlassian.net/browse/SD-440) - Adds identifier to seeded bank receipt types.\n* [SD-432](https://sageone.atlassian.net/browse/SD-432) - Adds identifier to seeded bank opening balance types.\n* [SD-444](https://sageone.atlassian.net/browse/SD-444) - Adds identifier to seeded batch entry types.\n* [SD-422](https://sageone.atlassian.net/browse/SD-422) - Adds identifier to seeded states.\n* [SD-468](https://sageone.atlassian.net/browse/SD-468) - Adds identifier to seeded tax schemes.\n* [SD-460](https://sageone.atlassian.net/browse/SD-460) - Adds identifier to seeded transaction types.\n\n# Version 10.5.0\n\n### Changes\n* [SE-534](https://sageone.atlassian.net/browse/SE-534) - Allow countries to customise ledger account types displayed\n\n# Version 10.4.2\n\n### Changes\n* Add simple product pricing feature for accounting. This allows us to disable it properly for micro\n\n# Version 10.4.1\n\n### Changes\n* Incorporate 10.3.1 fix\n\n# Version 10.4.0\n\n### Changes\n* Tax System handlers return tax system type identifier.\n\n# Version 10.3.1\n\n### Changes\n* Ensure entries are returned from custom_reverting_strategy\n\n# Version 10.3.0\n\n### Changes\n* Fix seeding issue due to identifier added to static data tables\n* Set SOP version to 2.2\n* Fix QSW propagating details to MS1\n\n# Version 10.2.0\n\n### Changes\n* Amended seeding to accomodate tax returns schema changes.\n\n# Version 10.1.0\n\n### Changes\n* [SD-406](https://sageone.atlassian.net/browse/SD-406) - Adds identifier to seeded account types.\n* [SD-410](https://sageone.atlassian.net/browse/SD-410) - Adds identifier to seeded address types.\n* [SD-414](https://sageone.atlassian.net/browse/SD-414) - Adds identifier to seeded contact types.\n\n# Version 10.0.0\n\n### Changes\n* Removed association logos configurator. This has now been moved to config.yml.\n\n# Version 9.0.0\n\n### Changes\n* Move subscription handler locale code to a shared module for other handlers e.g. accountant\n* [SJ-181](https://sageone.atlassian.net/browse/SJ-181) - Relocated invoice template handlers to GAC\n* [SOIGAC-184](https://sageone.atlassian.net/browse/SOIGAC-184) - Incorrect Validation of Business Number for Canadian Contacts on creation.\n\n# Version 8.14.0\n\n### Changes\n* [SE-490](https://sageone.atlassian.net/browse/SE-490) - Enable Global Annotations and destroy any annotation details if a transaction is corrected.\n\n# Version 8.13.0\n\n### Changes\n* [SE-539](https://sageone.atlassian.net/browse/SE-539) - Simplified Tax Settings.\n\n# Version 8.12.0\n### Changes\n* Added Seeding functionality for Annotation Element Tax Rate Associations.\n\n# Version 8.11.0\n\n### Changes\n* [SE-541](https://sageone.atlassian.net/browse/SE-541) - Fallback to country coa template if not found for given locale.\n\n# Version 8.10.0\n\n### Changes\n* [SE-541](https://sageone.atlassian.net/browse/SE-541) - Allow COA Templates to be multi language.\n\n# Version 8.9.0\n\n### Changes\n* [SE-539](https://sageone.atlassian.net/browse/SE-539) - Added ability to seed tax types\n\n# Version 8.8.0\n\n### Changes\n* [SE-551](https://sageone.atlassian.net/browse/SE-551) - Created Seeding functionality for Global Annotations.\n\n# Version 8.7.0\n\n### Changes\n* [SG-415](https://sageone.atlassian.net/browse/SG-415) - Added Journals/Bank Opening Balance to the transaction types shown in the Receipts and Payments Report in Micro.\n\n# Version 8.6.2\n\n### Changes\n* Create DummyZeroTaxRate for unit tests.\n\n# Version 8.6.1\n\n### Changes\n* Create DummyExemptTaxRate for unit tests.\n\n# Version 8.6.0\n\n### Changes\n* [SE-455] (https://sageone.atlassian.net/browse/SE-455) - Fix implementation of No/Zero/Exempt tax rates\n\n# Version 8.5.0\n\n### Changes\n* Fix Seeding Data for States.\n\n# Version 8.4.0\n\n### Changes\n* Upgrade Soroban to v3.1.0\n\n# Version 8.3.0\n\n###Changes\n* [SG-411](https://sageone.atlassian.net/browse/SG-411) - Hidden 1100 & 2100 ledger accounts from Micro users.\n\n# Version 8.2.0\n\n### Changes\n* [AC-537](https://sageone.atlassian.net/browse/AC-537) - Added payment-to-liability rule helper\n\n# Version 8.1.2\n\n### Changes\n* [SG-267](https://sageone.atlassian.net/browse/SG-267) - P/L report overhaul: Period by period analysis\n\n# Version 8.1.1\n\n### Changes\n* Changes in global_accounting_dev only\n\n# Version 8.1.0\n\n### Changes\n* [SE-366](https://sageone.atlassian.net/browse/SE-366) - Tax Screen province PST and GST have \\_7 after the label\n\n# Version 8.0.0\n\n### Changes\n* Changes for Canada work\n  * Renamed 'vat_enabled?' into 'tax_returns_enabled?'\n  * Renamed Quick Start Wizard Vat step into Tax\n  * Modified Quick Start handlers\n  * Added 'default_tax_location_settings'\n  * Added 'provincial_tax' tax system\n  * Changed tax rate scope_id to include the country code - rake tasks to run in the country gems\n  * Added provinces\n\n# Version 7.5.0\n\n### Changes\n* [SG-200](https://sageone.atlassian.net/browse/SG-200) - Added vat validations feature\n\n# Version 7.4.0\n\n### Changes\n* [SJ-80](https://sageone.atlassian.net/browse/SJ-80) - Changed report structure to accommodate new reports index layout\n\n# Version 7.3.0\n\n### Changes\n* [AC-537](https://sageone.atlassian.net/browse/AC-537) - Added credit ledger account type to seed data\n\n# Version 7.2.0\n\n### Changes\n* [SG-348](https://sageone.atlassian.net/browse/SG-378) - Move reports to top level of menu for Micro\n* [SG-341](https://sageone.atlassian.net/browse/SG-341) - Define multiple addresses as a feature for accounting, exclude from micro\n\n# Version 7.1.0\n\n### Changes\n* [SOIGAC-108](https://sageone.atlassian.net/browse/SOIGAC-108) - Add country-specific server side validation for sort_code;\n  Add a new flag routing_number_enabled? to show or hide routing_number in all relevant grids and forms.\n\n# Version 7.0.0\n\n### Changes\n* SOP v2 upgrade\n\n# Version 6.5.3\n\n### Changes\n* Temporary revert business setting provision changes as this requires version of GAC which is being release with\n  SOP 2 but require normal functionality of 6.5.2 to work as a hotfix.\n\n# Version 6.5.2\n\n### Changes\n* MysageoneModelUpdater updated to use Rails 4 ActiveJob and mechanisms in SOP to track success/failure and auto\nrestart of the job.\n* Locked version of sprockets-rails until we fix this issue https://github.com/Sage/sop/issues/4056\n\n# Version 6.5.2\n\n### Changes\n* [AC-526](https://sageone.atlassian.net/browse/AC-526) - A number of VAT cash accounting payment on account fixes.\n\n# Version 6.5.1\n\n### Changes\n* [SJ-29] (https://sageone.atlassian.net/browse/SJ-29) - Removed email defaults initialization on provision\n\n# Version 6.5.0\n\n### Changes\n* Set locale to country locale if US and user locale is en.\n\n# Version 6.4.0\n\n### Changes\n* To cater for future multi language work, save locale to users table.\n\n# Version 6.3.1\n\n### Changes\n* Updated script/publish.sh\n\n# Version 6.3.0\n\n### Changes\n* [SG-247] (https://sageone.atlassian.net/browse/SG-247) - Slight tweak to order of primary navigation\n\n# Version 6.2.0\n### Changes\n* Relax sop version\n\n# Version 6.1.0\n\n### Changes\n* [SG-91](https://sageone.atlassian.net/browse/SG-91) Simplifying Ledger Account menus when adding payments and receipts\n* [AC-409](https://sageone.atlassian.net/browse/AC-409) Add Greenland to country seeds data\n\n# Version 6.0.0\n\n### Changes\n* [SG-195](https://sageone.atlassian.net/browse/SG-195) US have UKI VAT report and EC Sales Analysis report (and they should only have Sales Tax).\n\n# Version 5.3.0\n\n### Changes\n* [SG-44](https://sageone.atlassian.net/browse/SG-44) Added Features handlers to determine which features are enabled/disabled for a given service/country. Removed the seeds for features/service_features.\n\n# Version 5.2.0\n\n### Changes\n* [SG-72](https://sageone.atlassian.net/browse/SG-72) New menu structure for micro\n\n# Version 5.1.0\n### Changes\n* Upgrade and restart support for micro\n\n# Version 5.0.0\n\n### Changes\n* Changed i18n keys within the settings handler, this prevents issues with load order\n\n# Version 4.2.1\n\n### Changes\n* Updated i18n key to follow the same structure as the rest of the settings page\n\n# Version 4.2.0\n\n### Changes\n* Upgraded to SOP 1.24\n* [SOGACW-3518](https://sageone.atlassian.net/browse/SOGACW-3518) Add Artefact Options configurator\n\nVersion 4.1.3\n\n### Changes\n* [SE-125] (https://sageone.atlassian.net/browse/SE-125) - QSW - New animation sometimes appears twice\n\n# Version 4.1.2\n\n### Changes\n* Made sop gem locking more optimistic\n\n# Version 4.1.1\n\n### Changes\n* Add some service_features to seed data\n* Update to publish script\n\n# Version 4.1.0\n\n### Changes\n* [SOGACW-3324](https://sageone.atlassian.net/browse/SOGACW-3324) Make Editing of Sales Invoices and Credit Notes configurable\n* [SOGACW-2964](https://sageone.atlassian.net/browse/SOGACW-2964) Make it possible to configure soroban custom reverting strategy by country\n* [SOGACW-3316](https://sageone.atlassian.net/browse/SOGACW-3316) Enable voided transaction to have a corrected by transaction relation\n\n# Version 4.0.0\n\n### Changes\n* [SE-47](https://sageone.atlassian.net/browse/SE-47) Renamed cashbook to micro as part of original work: Display different \"Getting Started\" depending on where you came from (Phase 1).\n* Added support to seed exchange rates\n\n# Version 3.1.0\n\n### Changes\n* [SOGACW-3040](https://sageone.atlassian.net/browse/SOGACW-3040) Added Quick Start Wizard for Cashbook (and refactored the QSW for Accounting).\n\n# Version 3.0.1\n\n### Changes\n* [SOGACW-3248](https://sageone.atlassian.net/browse/SOGACW-3248) - Removed business classifications from step 1 of the quick start wizard\n\n# Version 3.0.0\n\n### Changes\n* Fixed bug in rule helpers to stop incorrect cash based ledger entries\n  posting.\n\nAn area param is now required for cash based postings\n`for_cash_based_postings(transaction, payment_artefact, area)`\n\n# Version 2.8.0\n\n### Changes\n* [SOGACW-2530](https://sageone.atlassian.net/browse/SOGACW-2530) Add better error handling for QSW API call to MS1\n\n### Dependencies\n* GAC v2.14.0 or higher\n\n# Version 2.7.1\n\n### Changes\n* [SOGACW-2750](https://sageone.atlassian.net/browse/SOGACW-2750) Ensure proper locale is set when provisioning service users\n\n### Dependencies\n* GAC v2.16.0 or higher\n\n# Version 2.7.0\n\n### Changes\n* Fixed task to speed up creating release candidates in country config gems\n\n### Dependencies\n* GAC v2.14.0 or higher\n\n# Version 2.6.1\n\n### Changes\n* Add debug statements to QSW logic to help troubleshoot an issue\n\n### Dependencies\n* GAC v2.14.0 or higher\n\n# Version 2.5.0\n\n### Changes\n* [SOGACW-2197](https://sageone.atlassian.net/browse/SOGACW-2197) Committing business data from Quick Start Wizard to mysageone in a single transaction during the ending animation. This is achieved by a delayed job and also makes use of a MySageOne BasicAuth.\n\n### Dependencies\n* GAC v2.14.0 or higher\n\n### Deploy Tasks\n* None\n\n# Version 2.4.0\n\n### Changes\n* [SOGACW-2116](https://sageone.atlassian.net/browse/SOGACW-2116) New version\n  of the handler API (for more information see the [Writing Your Own Handler GAC Guide](../guides/gac_guides/04_extension_points/00_writing_your_handler.html.md)).\n* [SOGACW-2024](https://sageone.atlassian.net/browse/SOGACW-2024) Allow CSV import handlers to be registered for specific countries\n\n### Dependencies\n* GAC v2.13.0 or higher\n\n### Deploy Tasks\n* None\n\n# Version 2.1.0\n\n### Changes\n\n* Adds business address information to pdf footer when applicable. See [SOGACW-961] (https://sageone.atlassian.net/browse/SOGACW-961).\n\n### Dependencies\n* GAC v2.10.0 or higher\n\n### Deploy Tasks\n* None\n\n# Version 1.5.0\n\n### Changes\n\n* Added extension points to enable country-specific fields on the new business settings form. See [SOGACW-908](https://sageone.atlassian.net/browse/SOGACW-908) and [GITHUB](https://github.com/Sage/sage_one_advanced/tree/master/guides/gac_guides/04_extension_points/13_business_settings.html.md) and [GITHUB](https://github.com/Sage/sage_one_advanced/tree/master/guides/gac_guides/04_extension_points/14_business_mandatory_attributes.html.md)\n\n### Dependencies\n* GAC v2.8.0 or higher\n\n### Deploy Tasks\n* None\n\n# Version 1.4.0\n\n### Changes\n* Fixes a bug in tax rule helper where taxable amount was not correct for single rates\n\n* Added additional transaction type groups with common default types that can be extended by each country config. [SOGACW-962](https://sageone.atlassian.net/browse/SOGACW-962)\n  * contact_payment_types\n  * sundry_receipt_types\n  * sundry_payment_types\n\n* Remove classes/overrides now provided by SopSettings (see https://github.com/Sage/sop/pull/3438)\n* Use SopSettings base classes for existing handlers\n\n### Dependencies\n* GAC v2.7.0 or higher\n\n### Deploy Tasks\n* None\n\n# Version 1.3.0\n\n### Changes\n* Removed unit_type seeding\n* Adds an extension point for tax systems to enable/disable automatic download of tax rates when the business address is updated\n  * Defaults to enabled for sales tax systems\n  * Defaults to disabled for vat tax systems (no supporting tax rate service at the moment)\n* Upgraded SOP to 1.15.4\n\n### Dependencies\n* GAC v2.6.0 or higher\n\n### Deploy Tasks\n* None\n\n# Version 1.2.0\n\n### Changes\n* Fixes sales tax issues with product/service import\n* Uses Faker for Customer/Supplier Name on other imports\n* Added ability for Google tag manager to be configured.\n\n### Dependencies\n* GAC v2.5.0 or higher\n\n### Deploy Tasks\n* None\n\n# Version 1.1.0\n\n### Changes\n* Now possible to specify custom transaction types for receipts and payments day book report\n\n### Dependencies\n* GAC v2.4.0 or higher\n\n### Deploy Tasks\n* None\n\n# Version 1.0.0\n\n### Changes\n* Added support for enabling yodlee via bank configurator\n* Renamed gem from global_accounts_core to global_accounting_base\n* Introduces the ability to configure contact csv import per country. More info can be found at [JIRA](https://sageone.atlassian.net/browse/SOGAC-1129) and [GITHUB](https://github.com/Sage/sage_one_advanced/tree/master/guides/gac_guides/04_extension_points/12_contacts_import_configuration.html.md)\n* Allocations are now taken into account when calculating what has already been paid on an invoice in the payment helper.\n* Adjustments can be made on the final payment to take into account where splitting allocations proportionally amongst entries causes an imbalance.\n* Upgraded propagate_to_transaction matcher to be compatible with RSpec 3.\n\n### Dependencies\n* None\n\n### Deploy Tasks\n* None\n\n# Version 0.10.0\n\n### Changes\n* Introduces the ability to configure contact csv import per country. More info can be found at [JIRA](https://sageone.atlassian.net/browse/SOGAC-1129) and [GITHUB](https://github.com/Sage/sage_one_advanced/tree/master/guides/gac_guides/04_extension_points/12_contacts_import_configuration.html.md)\n* Introduces the ability to display a currency symbol when exporting invoices or statements to PDF. More info can be found at [JIRA](https://sageone.atlassian.net/browse/ADVANCED-4764) and [GITHUB](https://github.com/Sage/sage_one_advanced/tree/master/guides/gac_guides/04_extension_points/11_base_currency_symbols.html.md)\n\n\n### Dependencies\n* None\n\n### Deploy Tasks\n* None\n\n# Version 0.9.0\n* Adds method to base tax system to return tax scheme and tax settings. For VAT tax system it additionally return the tax number.\n\n# Version 0.8.0\n\n### Changes\n* Upgraded gem to use Rails 3.2.21\n* Remove the interdependency between advanced_uk and sage_one_gac_us - any linking should be between sage_one_gac_us and global_accounting_base [#B-15784](https://www5.v1host.com/TheSageGroupplc/Search.mvc/Advanced?q=B-15784)\n* Added the base classes for the feedback system: Feedback::Handlers and Feedback::Models [#682](https://sageone.atlassian.net/browse/SOGAC-682)\n* Fixed US Rules::Unable to create a Sales transaction with Tax [#SOGAC-1102 ](https://sageone.atlassian.net/browse/SOGAC-1102) [#3371](https://github.com/Sage/sage_one_advanced/pull/3371) [#3460](https://github.com/Sage/sage_one_advanced/pull/3460)\n* Extended Contact handlers to support hidden fields, to enable creating Contacts on the fly [#SOGAC-1009](https://sageone.atlassian.net/browse/SOGAC-1009)\n* Added API to add functionality for tax rates custom display order [#SOGAC-1007](https://sageone.atlassian.net/browse/SOGAC-1007)\n\n### Dependencies\n* None\n\n### Deploy Tasks\n* Ensure \"require 'rails'\" is called in /lib/country_config.rb and not /lib/country_config/engine.rb (it must be called before \"require 'global_accounting_base'\")\n\n# Version 0.7.0\n\n### Changes\n* Added tax and util rule helpers for use in accounting rules [SOGAC-692](https://sageone.atlassian.net/browse/SOGAC-692)\n* Added public method GlobalAccountingBase::RuleHelpers::Settings#bank_charges_ledger_account\n* Added public method GlobalAccountingBase::RuleHelpers::Settings#for_tax_rate\n* Exposed InvoiceTemplates::TemplateHelper#render_field as public method\n* Exposed InvoiceTemplates::TemplateHelper#render_tag_lines as public method\n* Added InvoiceTemplates::TemplateHelper#total_payments method to show total payments made\n* Made InvoiceTemplates::TemplateHelper#number method use :artefact_number i18n and :artefact_number_formatted attribute for automatic artefact-type selection\n* Made the Handlers::TaxSystems::Base have the sales_tax_enabled and purchase_tax_enabled methods be false. Implemented the right flags on the Vat and SalesTax Handlers\n\n### Dependencies\n* None\n\n### Deploy Tasks\n* None\n\n# Version 0.6.0\n\n### Changes\n* Added payment and settings rule helpers for use in accounting rules.\n* Created have_cash_balance and have_accrual_balance rspec matchers for use in accounting rules.\n\n### Dependencies\n* None\n\n### Deploy Tasks\n* None\n\n# Version 0.5.0\n\n### Changes\n* Added RSpec matchers (propagate_to_transaction, soft_delete)\n* Modified some seeding methods to take options that now default to off\n* Ability to customise invoice templates, [see guide](../guides/invoice_templates.md), [SOGAC-232](https://sageone.atlassian.net/browse/SOGAC-232)\n\n### Dependencies\n* None\n\n### Deploy Tasks\n* None\n\n# Version 0.4.0\n\n### Changes\n* [SOCC-88](https://sageone.atlassian.net/browse/SOCC-88) Fix coverage error and style code issue [#2723](https://github.com/Sage/sage_one_advanced/pull/2723)\n* Added ability to enable/disable Association Logos with a configurator, [see guide] (../guides/association_logos.md)\n* Changed the way we provision the No Tax for Sales Tax to use Rails API\n\n### Dependencies\n* None\n\n### Deploy Tasks\n* None\n\n# Version 0.3.0\n\n### Changes\n* Added ability to set the tax system in tax configurator, [see guide] (../guides/tax_configurator.md)\n* Added API to create contact extensions, [see guide] (../guides/contacts.md)\n* Added ability to enable/disable EU suppoort in tax configurator.\n* Added multi currency configurator, [see guide] (../guides/multi_currency_configurator.md)\n\n### Dependencies\n* GlobalAccountingDev\n\n### Deploy Tasks\n* None\n\n### Tasks\n* All countries will need to configure their tax_system (e.g. `tax_system :vat`)\n\n# Version 0.2.0\n\n### Changes\n* Added ability in tax configurator to remove tax rate in chart of accounts.\n\n### Dependencies\n* None\n\n### Deploy Tasks\n* None\n\n# Version 0.1.0\n\n### Changes\n* Initial Release\n* Bank Configurator\n* Tax Configurator\n* Journal Handler extension point\n\n### Dependencies\n* None\n\n### Deploy Tasks\n* None\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":4,"column":104},"end":{"row":4,"column":104}},"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"5":{"id":"5","maintainHistory":false,"markersById":{},"version":2},"27":{"id":"27","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":28,"history":{"version":3,"nextCheckpointId":116,"undoStack":[{"type":"checkpoint","id":1,"snapshot":{"2":{"1":{"range":[[9,0],[9,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[9,0],[9,0]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[4,1],[4,1]],"newRange":[[4,1],[4,2]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,2],[4,2]],"newRange":[[4,2],[4,100]],"oldText":"","newText":"* [SJ-181](https://sageone.atlassian.net/browse/SJ-181) - Make invoice template stylesheets inline"}},{"type":"change","content":{"oldRange":[[4,3],[4,4]],"newRange":[[4,3],[4,3]],"oldText":" ","newText":""}},{"type":"change","content":{"oldRange":[[4,2],[4,3]],"newRange":[[4,2],[4,2]],"oldText":"*","newText":""}},{"type":"change","content":{"oldRange":[[4,3],[4,9]],"newRange":[[4,3],[4,4]],"oldText":"SJ-181","newText":"S"}},{"type":"change","content":{"oldRange":[[4,4],[4,4]],"newRange":[[4,4],[4,5]],"oldText":"","newText":"E"}},{"type":"change","content":{"oldRange":[[4,5],[4,5]],"newRange":[[4,5],[4,6]],"oldText":"","newText":"-"}},{"type":"change","content":{"oldRange":[[4,6],[4,6]],"newRange":[[4,6],[4,7]],"oldText":"","newText":"5"}},{"type":"change","content":{"oldRange":[[4,7],[4,7]],"newRange":[[4,7],[4,8]],"oldText":"","newText":"1"}},{"type":"change","content":{"oldRange":[[4,8],[4,8]],"newRange":[[4,8],[4,9]],"oldText":"","newText":"8"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[4,9],[4,9]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":16,"snapshot":{"2":{"1":{"range":[[4,98],[4,98]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[4,98],[4,98]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[4,53],[4,54]],"newRange":[[4,53],[4,53]],"oldText":"1","newText":""}},{"type":"change","content":{"oldRange":[[4,52],[4,53]],"newRange":[[4,52],[4,52]],"oldText":"8","newText":""}},{"type":"change","content":{"oldRange":[[4,51],[4,52]],"newRange":[[4,51],[4,51]],"oldText":"1","newText":""}},{"type":"change","content":{"oldRange":[[4,50],[4,51]],"newRange":[[4,50],[4,50]],"oldText":"-","newText":""}},{"type":"change","content":{"oldRange":[[4,49],[4,50]],"newRange":[[4,49],[4,49]],"oldText":"J","newText":""}},{"type":"change","content":{"oldRange":[[4,48],[4,49]],"newRange":[[4,48],[4,48]],"oldText":"S","newText":""}},{"type":"change","content":{"oldRange":[[4,48],[4,48]],"newRange":[[4,48],[4,49]],"oldText":"","newText":"S"}},{"type":"change","content":{"oldRange":[[4,49],[4,49]],"newRange":[[4,49],[4,50]],"oldText":"","newText":"E"}},{"type":"change","content":{"oldRange":[[4,50],[4,50]],"newRange":[[4,50],[4,51]],"oldText":"","newText":"-"}},{"type":"change","content":{"oldRange":[[4,51],[4,51]],"newRange":[[4,51],[4,52]],"oldText":"","newText":"5"}},{"type":"change","content":{"oldRange":[[4,52],[4,52]],"newRange":[[4,52],[4,53]],"oldText":"","newText":"1"}},{"type":"change","content":{"oldRange":[[4,53],[4,53]],"newRange":[[4,53],[4,54]],"oldText":"","newText":"8"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[4,54],[4,54]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[4,58],[4,98]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[4,58],[4,98]],"newRange":[[4,58],[4,58]],"oldText":"Make invoice template stylesheets inline","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[4,58],[4,58]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":36,"snapshot":{"2":{"1":{"range":[[4,58],[4,58]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[4,58],[4,58]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[4,58],[4,58]],"newRange":[[4,58],[4,59]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[4,58],[4,59]],"newRange":[[4,58],[4,58]],"oldText":"d","newText":""}},{"type":"change","content":{"oldRange":[[4,58],[4,58]],"newRange":[[4,58],[4,59]],"oldText":"","newText":"A"}},{"type":"change","content":{"oldRange":[[4,59],[4,59]],"newRange":[[4,59],[4,60]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[4,60],[4,60]],"newRange":[[4,60],[4,61]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[4,61],[4,61]],"newRange":[[4,61],[4,62]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[4,62],[4,62]],"newRange":[[4,62],[4,63]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[4,63],[4,63]],"newRange":[[4,63],[4,64]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,64],[4,64]],"newRange":[[4,64],[4,65]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[4,65],[4,65]],"newRange":[[4,65],[4,66]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[4,66],[4,66]],"newRange":[[4,66],[4,67]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[4,67],[4,67]],"newRange":[[4,67],[4,68]],"oldText":"","newText":"d"}},{"type":"change","content":{"oldRange":[[4,68],[4,68]],"newRange":[[4,68],[4,69]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[4,69],[4,69]],"newRange":[[4,69],[4,70]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,70],[4,70]],"newRange":[[4,70],[4,71]],"oldText":"","newText":"f"}},{"type":"change","content":{"oldRange":[[4,71],[4,71]],"newRange":[[4,71],[4,72]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[4,72],[4,72]],"newRange":[[4,72],[4,73]],"oldText":"","newText":"r"}},{"type":"change","content":{"oldRange":[[4,73],[4,73]],"newRange":[[4,73],[4,74]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,74],[4,74]],"newRange":[[4,74],[4,75]],"oldText":"","newText":"T"}},{"type":"change","content":{"oldRange":[[4,75],[4,75]],"newRange":[[4,75],[4,76]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[4,76],[4,76]],"newRange":[[4,76],[4,77]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[4,77],[4,77]],"newRange":[[4,77],[4,78]],"oldText":"","newText":"R"}},{"type":"change","content":{"oldRange":[[4,78],[4,78]],"newRange":[[4,78],[4,79]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[4,79],[4,79]],"newRange":[[4,79],[4,80]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[4,80],[4,80]],"newRange":[[4,80],[4,81]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[4,81],[4,81]],"newRange":[[4,81],[4,82]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[4,81],[4,82]],"newRange":[[4,81],[4,81]],"oldText":"s","newText":""}},{"type":"change","content":{"oldRange":[[4,81],[4,81]],"newRange":[[4,81],[4,82]],"oldText":"","newText":"T"}},{"type":"change","content":{"oldRange":[[4,82],[4,82]],"newRange":[[4,82],[4,83]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[4,82],[4,83]],"newRange":[[4,82],[4,82]],"oldText":"a","newText":""}},{"type":"change","content":{"oldRange":[[4,81],[4,82]],"newRange":[[4,81],[4,81]],"oldText":"T","newText":""}},{"type":"change","content":{"oldRange":[[4,80],[4,81]],"newRange":[[4,80],[4,80]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[4,79],[4,80]],"newRange":[[4,79],[4,79]],"oldText":"t","newText":""}},{"type":"change","content":{"oldRange":[[4,78],[4,79]],"newRange":[[4,78],[4,78]],"oldText":"a","newText":""}},{"type":"change","content":{"oldRange":[[4,77],[4,78]],"newRange":[[4,77],[4,77]],"oldText":"R","newText":""}},{"type":"change","content":{"oldRange":[[4,76],[4,77]],"newRange":[[4,76],[4,76]],"oldText":"x","newText":""}},{"type":"change","content":{"oldRange":[[4,75],[4,76]],"newRange":[[4,75],[4,75]],"oldText":"a","newText":""}},{"type":"change","content":{"oldRange":[[4,75],[4,75]],"newRange":[[4,75],[4,76]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[4,76],[4,76]],"newRange":[[4,76],[4,77]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[4,77],[4,77]],"newRange":[[4,77],[4,78]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,78],[4,78]],"newRange":[[4,78],[4,79]],"oldText":"","newText":"R"}},{"type":"change","content":{"oldRange":[[4,79],[4,79]],"newRange":[[4,79],[4,80]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[4,80],[4,80]],"newRange":[[4,80],[4,81]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[4,81],[4,81]],"newRange":[[4,81],[4,82]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[4,82],[4,82]],"newRange":[[4,82],[4,83]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[4,83],[4,83]],"newRange":[[4,83],[4,84]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,84],[4,84]],"newRange":[[4,84],[4,85]],"oldText":"","newText":"T"}},{"type":"change","content":{"oldRange":[[4,85],[4,85]],"newRange":[[4,85],[4,86]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[4,86],[4,86]],"newRange":[[4,86],[4,87]],"oldText":"","newText":"x"}},{"type":"change","content":{"oldRange":[[4,87],[4,87]],"newRange":[[4,87],[4,88]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,88],[4,88]],"newRange":[[4,88],[4,89]],"oldText":"","newText":"T"}},{"type":"change","content":{"oldRange":[[4,89],[4,89]],"newRange":[[4,89],[4,90]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[4,90],[4,90]],"newRange":[[4,90],[4,91]],"oldText":"","newText":"p"}},{"type":"change","content":{"oldRange":[[4,91],[4,91]],"newRange":[[4,91],[4,92]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[4,92],[4,92]],"newRange":[[4,92],[4,93]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[4,93],[4,93]],"newRange":[[4,93],[4,94]],"oldText":"","newText":" "}},{"type":"change","content":{"oldRange":[[4,94],[4,94]],"newRange":[[4,94],[4,95]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[4,95],[4,95]],"newRange":[[4,95],[4,96]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[4,96],[4,96]],"newRange":[[4,96],[4,97]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[4,97],[4,97]],"newRange":[[4,97],[4,98]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[4,98],[4,98]],"newRange":[[4,98],[4,99]],"oldText":"","newText":"c"}},{"type":"change","content":{"oldRange":[[4,99],[4,99]],"newRange":[[4,99],[4,100]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[4,100],[4,100]],"newRange":[[4,100],[4,101]],"oldText":"","newText":"a"}},{"type":"change","content":{"oldRange":[[4,101],[4,101]],"newRange":[[4,101],[4,102]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[4,102],[4,102]],"newRange":[[4,102],[4,103]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[4,94],[4,103]],"newRange":[[4,94],[4,105]],"oldText":"associati","newText":"association"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[4,105],[4,105]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"checkpoint","id":113,"snapshot":{"2":{"1":{"range":[[4,105],[4,105]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}},"isBoundary":false},{"type":"group-start","snapshot":{"2":{"1":{"range":[[4,105],[4,105]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[4,105],[4,105]],"newRange":[[4,105],[4,106]],"oldText":"","newText":"s"}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[4,106],[4,106]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[4,104],[4,104]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[14,106],[14,107]],"newRange":[[14,106],[14,106]],"oldText":" ","newText":""}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[4,104],[4,104]],"properties":{"type":"selection","goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/RELEASE_NOTES.md","digestWhenLastPersisted":"a0539d7a5a846a5ab0f5ded02a15aa1883d6b0c9","preferredLineEnding":null,"nextMarkerId":1042,"deserializer":"TextBuffer","version":5}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"Pane","id":545,"items":[{"deserializer":"TextEditor","id":546,"softTabs":true,"firstVisibleScreenRow":314,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":547,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/core_accounting.rb","bufferId":"70f0e1e36d1dfbad06aa7bff112e793a","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":670,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":671,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/.flayignore","bufferId":"202493e90a66ba2cf3f44b1b4e52dab0","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":686,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":687,"softWrapped":true,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/RELEASE_NOTES.md","bufferId":"454af7365e2406780aab962a914c70ec","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":642,"softTabs":true,"firstVisibleScreenRow":26,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":643,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_ca/lib/sage_one_gac_ca/handlers/quick_start/tax/tax_profiles_updater.rb","bufferId":"9074fb6a22ddd04d26490b65820cee6c","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":646,"softTabs":true,"firstVisibleScreenRow":217,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":647,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/invoice_templates/template_helper.rb","bufferId":"e89a550709e8425cd8b96dd0dcf20236","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":674,"softTabs":true,"firstVisibleScreenRow":646,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":675,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/invoice_templates/template_helper_spec.rb","bufferId":"1f46cf05ba203278f125b2c5f4744dd9","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":682,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":683,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/fudge_settings.yml","bufferId":"9c30e02b952b27364a2ccd7e3be51d28","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":678,"softTabs":true,"firstVisibleScreenRow":0,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":679,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/rule_helpers/tax_spec.rb","bufferId":"2bfd92ca2737367e8a3fc1ae426670f2","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"},{"deserializer":"TextEditor","id":638,"softTabs":true,"firstVisibleScreenRow":42,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":639,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/base.rb","bufferId":"f9871210fb33329145b62766f7b738a5","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"}],"activeItemURI":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/RELEASE_NOTES.md","focused":true,"flexScale":1},"activePaneId":545},"packagesWithActiveGrammars":["language-ruby","language-gfm","language-yaml","language-hyperlink","language-todo"],"destroyedItemURIs":["/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/configurators/tax.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/quick_start/field_base.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/quick_start/business_basics/business_type.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/quick_start/step_base.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/tax_systems/provincial_tax_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/tax_systems/sales_tax_spec.rb","/Users/victor.martins/Google Drive/_Projects/_learning/taxes.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/tax_systems/vat_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/base_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/tax_systems/provincial_tax.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/tax_systems/provincial_tax_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/global_accounting_base.gemspec","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/tax_systems/base_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/tax_systems/sales_tax_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_dev/global_accounts_dev.gemspec","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/tax_systems/vat_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_dev/global_accounts_dev.gemspec","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/tax_systems/base.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/tax_systems/vat.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/features/main_menu/micro.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/.gitignore","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/SOP_VERSION","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/quick_start.rb","atom://config/updates","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_dev/Gemfile","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_dev/spec/dummy/config/application.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/tax_systems/sales_tax.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/config.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_dev/lib/global_accounting_dev.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/base_info.rb","atom://config","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/.cane","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/csv_imports/handlers/quick_entries/supplier_name_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/csv_imports/handlers/quick_entries/total_net_amount_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/csv_imports/handlers/quick_entries/total_tax_amount_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/csv_imports/handlers/quick_entries/vat_rate_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/csv_imports/handlers_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/csv_imports/handlers/quick_entries/customer_name_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/csv_imports/handlers/contacts/credit_limit_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/address_2_country.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/address_2_post_code.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/address_2_type.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/bank_account_bic.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/bank_account_iban.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/bank_account_name.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/bank_account_number.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/bank_account_sort_code.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/credit_limit.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/customer_ledger_account.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/customer_payment_terms.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/customer_reference.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/main_address_country.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/opening_balances/customer_name.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/features/settings/predefined_settings.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/micro/ledger_accounts.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/features.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/csv_imports/handlers/contacts/address_2_county_spec.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/address_2_line_1.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/address_2_line_2.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/address_2_town.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/main_address_county.rb","atom://find-and-replace/project-results","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/main_address_line_1.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/main_address_line_2.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/main_address_town.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/currency.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/matchers/soroban_matchers.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/base.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/address.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/annotations.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/banking.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/business_classification.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/catalogs.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/contacts.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/exchange_rates.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/invoicing.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/misc.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/originating_services.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/services.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/tax_settings.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_ca/seeds/data/tax_rate_percentages.csv","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_ca/seeds/data/tax_types.csv","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_ca/seeds/data/tax_rates.csv","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/Gemfile","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_ca/seeds/data/tax_rates_tax_types.csv","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/csv_imports/handlers/contacts/address_2_county.rb","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_ca/fudge_settings.yml","/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/rule_helpers/tax.rb"]},"windowDimensions":{"x":0,"y":23,"width":2560,"height":1417,"maximized":true},"packageStates":{"find-and-replace":{"findOptions":{"findPattern":"provider_class","replacePattern":"","pathsPattern":"global_accounting_base/lib/global_accounting_base/seeds","useRegex":true,"wholeWord":false,"caseSensitive":false,"inCurrentSelection":false},"findHistory":["puts '#","\\.{2,}","puts '#","seed_annotation_element_tax_rate_associations","get_data","seed_annotation_element_tax_rate_associations","create_ledger_account_types","tax_type_id","model_field","register","model_field","config","def config","example_data","pry","setup_with","def seed_tax_rates","seed_tax_rates","self.seed_tax_rates","seed_tax_rate_percentages","create_tax_rate_percentage!","create_tax_rate_tax_type","tax_data","Provider","provider_class"],"replaceHistory":["country_gem_config_path","print_note","print_note '##","self.print_note","self.print_note '#"],"pathsHistory":["country_gem_config_path"]},"fuzzy-finder":{"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/core_accounting.rb":1460108033498,"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/.flayignore":1460110462612,"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/RELEASE_NOTES.md":1460111895008,"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_ca/lib/sage_one_gac_ca/handlers/quick_start/tax/tax_profiles_updater.rb":1459869706705,"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/handlers/invoice_templates/template_helper.rb":1460110369971,"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/handlers/invoice_templates/template_helper_spec.rb":1460110397443,"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/fudge_settings.yml":1460110450113,"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/spec/rule_helpers/tax_spec.rb":1460110372615,"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base/lib/global_accounting_base/seeds/base.rb":1459526601302},"keybinding-resolver":{},"metrics":{"sessionLength":588171937},"tabs":[{}],"tree-view":{"directoryExpansionStates":{"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems":{"isExpanded":true,"entries":{".git":{"isExpanded":false,"entries":{}},"global_accounting_base":{"isExpanded":false,"entries":{}},"global_accounting_dev":{"isExpanded":false,"entries":{}},"script":{"isExpanded":false,"entries":{}}}},"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_ca":{"isExpanded":false,"entries":{}}},"selectedPath":"/Users/victor.martins/Documents/SAGE/code/UK/sage_one_gac_gems/global_accounting_base","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":408},"linter":{"scope":"File"}},"fullScreen":false}